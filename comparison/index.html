<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<style>
  * {
    padding: 0;
    margin: 0;
    box-sizing: border-box
  }

  html {
    font-size: calc(14px + 1.4vw);
  }

  @media (min-width:928px) {
    html {
      font-size: 25px
    }
  }


  body {
    background: #eee;
    font-family: sans-serif;
    text-align: center;
    padding: 2vw;
  }

  .h2h {
    background: white;
  }

  .h2h__rail {
    overflow: auto;
  }

  .h2h__rail:before {
    content: "Swipe â†”";
    font-weight: 500;
    color: white;
    background: rgba(0, 0, 0, 0.3) no-repeat;
    background-size: 30px 25px;
    background-position: 100% 50%;
    border-radius: 12px;
    padding: 4px 9px;
    position: absolute;
    right: 10px;
    top: 50%;
    z-index: 10;
    transform: translateY(calc(-100% - 2rem));
    pointer-events: none;
    transition: opacity .5s;
    font-size: 0.7rem;
    visibility: hidden;
  }

  .h2h__rail[data-swipable]:before {
    visibility: visible
  }

  .h2h__canvas {
    position: relative;
    position: relative;
    height: 80vh;
    display: -ms-grid;
    display: grid;
    -ms-grid-columns: min-content 1fr;
    -ms-grid-rows: 1fr min-content min-content;
    grid-template-columns: min-content 1fr;
    grid-template-rows: 1fr min-content min-content;
    margin: 0 auto;
  }

  .h2h__pos {
    -ms-grid-column: 1;
    grid-column: 1;
    display: flex;
    position: relative;
    position: sticky;
    left: 0;
    flex-direction: column;
    border-right: 1px solid #ccc;
    background: white;
    align-items: flex-end;
    height: calc(100%);
    z-index: 4;
    box-shadow: 3px 0 rgba(0, 0, 0, 0.04)
  }

  .h2h__pos>span {
    padding-right: 0.75em;
    flex: 1;
    width: 100%;
    font-size: 0.65rem;
    color: #aaa;
    display: flex;
    align-items: flex-end;
    justify-content: flex-end
  }

  .h2h__body {
    -ms-grid-column: 2;
    grid-column: 2;
    border-top: 0;
    border-right: 0;
    border-bottom: 1px solid #ccc;
    position: relative;
    background: white;
  }

  .h2h__body-div {
    position: absolute;
    z-index: 1;
    width: 100%;
    height: 1px;
    background: #eee;
  }

  .h2h__body-div[data-pos="1"] {
    top: 5%;
  }

  .h2h__body-div[data-pos="5"] {
    top: 25%;
  }

  .h2h__body-div[data-pos="10"] {
    top: 50%;
  }

  .h2h__body-div[data-pos="15"] {
    top: 75%;
  }

  .h2h__body-div--relegation {
    height: calc(10%);
    background: #eee;
    bottom: 0;
    border-top: 1px solid #ddd
  }

  .h2h__year {
    -ms-grid-column: 2;
    -ms-grid-row: 3;
    grid-column: 2;
    grid-row: 3;
    display: flex;
    justify-content: space-between;
  }

  .h2h__year>span {
    padding: 1em 0;
    font-size: 0.65rem;
    color: #aaa
  }

  .h2h__overflow {
    -ms-grid-column: 2;
    -ms-grid-row: 2;
    grid-column: 2;
    grid-row: 2;
    height: 1px;
    /* background: #eee; */
  }

  .h2h__point {
    width: 24px;
    height: 24px;
    background: #ccc;
    border-radius: 50%;
    position: absolute;
    z-index: 3;
    transform: translate(-50%, -50%);
    color: #222;
    font-size: 0.6rem;
    display: flex;
    line-height: 0;
    justify-content: center;
    align-items: center;
    transition: transform 0.33s;
    transform-origin: center;
    cursor: pointer;
  }

  .h2h__point.animate-in-view {
    transform: scale(0)
  }

  .h2h__line {
    width: 2px;
    height: 2px;
    background: #ccc;
    position: absolute;
    z-index: 2;
    transform-origin: 0;
    transition: width 0.33s
  }

  .h2h__line.animate-in-view {
    width: 2px !important;
  }

  .h2h__line:not([style]) {
    display: none;
  }

  [data-label="home"] {
    background: black;
    color: white;
  }

  [data-label="away"] {
    background: #ccc;
    color: #222;
  }

  .h2h__tooltip {
    pointer-events: none;
    background: black;
    color: white;
    padding: 0.75em;
    position: absolute;
    z-index: 11;
    transform: translate(-50%, -100%);
    margin-top: -10px;
    transition: opacity 0.166s;
    white-space: pre-line;
    font-size: 14px;
    text-align: left;
    line-height: 1.2;
    left: -10000px
  }

  .h2h__tooltip:after {
    content: "";
    display: block;
    width: 8px;
    height: 8px;
    transform: rotate(-45deg);
    left: calc(50% - 4px);
    top: calc(100% - 4px);
    position: absolute;
    background: inherit;
  }
</style>

<body>
  <div>
    <span data-label="home">team 1</span>
    <select name="" id="home">
      <option value="0" selected>Tottenham</option>
      <option value="1">Arsenal</option>
      <option value="2">Liverpool</option>
      <option value="3">Everton</option>

    </select>
    <span data-label="away">team 2</span>
    <select name="" id="away">
      <option value="0">Tottenham</option>
      <option value="1" selected>Arsenal</option>
      <option value="2">Liverpool</option>
      <option value="3">Everton</option>

    </select>
  </div>
  <div class="h2h">
    <div class="h2h__rail">
      <div class="h2h__canvas">
        <div class="h2h__pos">
          <span>1</span>
          <span></span>
          <span></span>
          <span></span>
          <span>5</span>
          <span></span>
          <span></span>
          <span></span>
          <span></span>
          <span>10</span>
          <span></span>
          <span></span>
          <span></span>
          <span></span>
          <span>15</span>
          <span></span>
          <span></span>
          <span></span>
          <span></span>
          <span>20</span>

        </div>
        <div class="h2h__body">
          <div class="h2h__body-div" data-pos="1"></div>
          <div class="h2h__body-div" data-pos="5"></div>
          <div class="h2h__body-div" data-pos="10"></div>
          <div class="h2h__body-div" data-pos="15"></div>
          <div class="h2h__body-div h2h__body-div--relegation"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 8|Points: 59" style="top: calc(40%); left: 30px;">8</div>
          <div class="h2h__line" data-label="home"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 15|Points: 45" style="top: calc(75%); left: 60px;">15</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(81.7142deg); width: 208.173px; top: 235px; left: 30px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 7|Points: 62" style="top: calc(35%); left: 90px;">7</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(-82.725deg); width: 236.907px; top: 441px; left: 60px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 8|Points: 61" style="top: calc(40%); left: 120px;">8</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(44.029deg); width: 41.7253px; top: 206px; left: 90px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 10|Points: 46" style="top: calc(50%); left: 150px;">10</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(63.0478deg); width: 66.1891px; top: 235px; left: 120px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 14|Points: 44" style="top: calc(70%); left: 180px;">14</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(75.6186deg); width: 120.785px; top: 294px; left: 150px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 11|Points: 47" style="top: calc(55%); left: 210px;">11</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(-71.1753deg); width: 92.9731px; top: 411px; left: 180px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 10|Points: 53" style="top: calc(50%); left: 240px;">10</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(-44.029deg); width: 41.7253px; top: 323px; left: 210px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 12|Points: 49" style="top: calc(60%); left: 270px;">12</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(63.0478deg); width: 66.1891px; top: 294px; left: 240px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 9|Points: 50" style="top: calc(45%); left: 300px;">9</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(-71.3721deg); width: 93.9202px; top: 353px; left: 270px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 10|Points: 50" style="top: calc(50%); left: 330px;">10</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(45deg); width: 42.4264px; top: 264px; left: 300px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 14|Points: 45" style="top: calc(70%); left: 360px;">14</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(75.6186deg); width: 120.785px; top: 294px; left: 330px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 9|Points: 52" style="top: calc(45%); left: 390px;">9</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(-78.4654deg); width: 150.03px; top: 411px; left: 360px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 5|Points: 65" style="top: calc(25%); left: 420px;">5</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(-75.6186deg); width: 120.785px; top: 264px; left: 390px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 5|Points: 60" style="top: calc(25%); left: 450px;">5</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(0deg); width: 30px; top: 147px; left: 420px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 11|Points: 46" style="top: calc(55%); left: 480px;">11</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(80.3266deg); width: 178.539px; top: 147px; left: 450px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 8|Points: 51" style="top: calc(40%); left: 510px;">8</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(-71.1753deg); width: 92.9731px; top: 323px; left: 480px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 4|Points: 70" style="top: calc(20%); left: 540px;">4</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(-75.6186deg); width: 120.785px; top: 235px; left: 510px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 5|Points: 62" style="top: calc(25%); left: 570px;">5</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(44.029deg); width: 41.7253px; top: 118px; left: 540px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 4|Points: 69" style="top: calc(20%); left: 600px;">4</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(-44.029deg); width: 41.7253px; top: 147px; left: 570px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 5|Points: 72" style="top: calc(25%); left: 630px;">5</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(44.029deg); width: 41.7253px; top: 118px; left: 600px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 6|Points: 69" style="top: calc(30%); left: 660px;">6</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(44.029deg); width: 41.7253px; top: 147px; left: 630px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 5|Points: 64" style="top: calc(25%); left: 690px;">5</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(-44.029deg); width: 41.7253px; top: 176px; left: 660px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 3|Points: 70" style="top: calc(15%); left: 720px;">3</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(-63.0478deg); width: 66.1891px; top: 147px; left: 690px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 2|Points: 86" style="top: calc(10%); left: 750px;">2</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(-44.029deg); width: 41.7253px; top: 88px; left: 720px;"></div>
          <div class="h2h__point" data-label="home" data-tooltip="Position: 3|Points: 77" style="top: calc(15%); left: 780px;">3</div>
          <div class="h2h__line" data-label="home" style="transform: rotate(44.029deg); width: 41.7253px; top: 59px; left: 750px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 10|Points: 56" style="top: calc(50%); left: 30px;">10</div>
          <div class="h2h__line" data-label="away"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 4|Points: 71" style="top: calc(20%); left: 60px;">4</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(-80.3266deg); width: 178.539px; top: 294px; left: 30px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 12|Points: 51" style="top: calc(60%); left: 90px;">12</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(82.725deg); width: 236.907px; top: 118px; left: 60px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 5|Points: 63" style="top: calc(25%); left: 120px;">5</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(-81.7142deg); width: 208.173px; top: 353px; left: 90px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 3|Points: 68" style="top: calc(15%); left: 150px;">3</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(-63.0478deg); width: 66.1891px; top: 147px; left: 120px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 1|Points: 78" style="top: calc(5%); left: 180px;">1</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(-63.0478deg); width: 66.1891px; top: 88px; left: 150px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 2|Points: 78" style="top: calc(10%); left: 210px;">2</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(45deg); width: 42.4264px; top: 29px; left: 180px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 2|Points: 73" style="top: calc(10%); left: 240px;">2</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(0deg); width: 30px; top: 59px; left: 210px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 2|Points: 70" style="top: calc(10%); left: 270px;">2</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(0deg); width: 30px; top: 59px; left: 240px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 1|Points: 87" style="top: calc(5%); left: 300px;">1</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(-45deg); width: 42.4264px; top: 59px; left: 270px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 2|Points: 78" style="top: calc(10%); left: 330px;">2</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(45deg); width: 42.4264px; top: 29px; left: 300px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 1|Points: 90" style="top: calc(5%); left: 360px;">1</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(-45deg); width: 42.4264px; top: 59px; left: 330px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 2|Points: 83" style="top: calc(10%); left: 390px;">2</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(45deg); width: 42.4264px; top: 29px; left: 360px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 4|Points: 67" style="top: calc(20%); left: 420px;">4</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(63.0478deg); width: 66.1891px; top: 59px; left: 390px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 4|Points: 68" style="top: calc(20%); left: 450px;">4</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(0deg); width: 30px; top: 118px; left: 420px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 3|Points: 83" style="top: calc(15%); left: 480px;">3</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(-45deg); width: 42.4264px; top: 118px; left: 450px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 4|Points: 72" style="top: calc(20%); left: 510px;">4</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(45deg); width: 42.4264px; top: 88px; left: 480px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 3|Points: 75" style="top: calc(15%); left: 540px;">3</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(-45deg); width: 42.4264px; top: 118px; left: 510px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 4|Points: 68" style="top: calc(20%); left: 570px;">4</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(45deg); width: 42.4264px; top: 88px; left: 540px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 3|Points: 70" style="top: calc(15%); left: 600px;">3</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(-45deg); width: 42.4264px; top: 118px; left: 570px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 4|Points: 73" style="top: calc(20%); left: 630px;">4</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(45deg); width: 42.4264px; top: 88px; left: 600px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 4|Points: 79" style="top: calc(20%); left: 660px;">4</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(0deg); width: 30px; top: 118px; left: 630px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 3|Points: 75" style="top: calc(15%); left: 690px;">3</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(-45deg); width: 42.4264px; top: 118px; left: 660px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 2|Points: 71" style="top: calc(10%); left: 720px;">2</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(-44.029deg); width: 41.7253px; top: 88px; left: 690px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 5|Points: 75" style="top: calc(25%); left: 750px;">5</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(71.1753deg); width: 92.9731px; top: 59px; left: 720px;"></div>
          <div class="h2h__point" data-label="away" data-tooltip="Position: 6|Points: 63" style="top: calc(30%); left: 780px;">6</div>
          <div class="h2h__line" data-label="away" style="transform: rotate(44.029deg); width: 41.7253px; top: 147px; left: 750px;"></div>
        </div>
        <div class="h2h__overflow"></div>
        <div class="h2h__year">
          <span>1992/93</span>
          <span>1997/98</span>
          <span>2002/03</span>
          <span>2007/08</span>
          <span>2012/13</span>
          <span>2017/18</span>
        </div>
      </div>
    </div>
  </div>

  <div class="h2h__tooltip"></div>



  <script>
    NodeList.prototype.forEach = Array.prototype.forEach;

    var data = {
      teams: [{ "name": "Tottenham Hotspur", "positions": 20, "max": 20, "years": [{ "pts": 59, "pos": 8 }, { "pts": 45, "pos": 15 }, { "pts": 62, "pos": 7 }, { "pts": 61, "pos": 8 }, { "pts": 46, "pos": 10 }, { "pts": 44, "pos": 14 }, { "pts": 47, "pos": 11 }, { "pts": 53, "pos": 10 }, { "pts": 49, "pos": 12 }, { "pts": 50, "pos": 9 }, { "pts": 50, "pos": 10 }, { "pts": 45, "pos": 14 }, { "pts": 52, "pos": 9 }, { "pts": 65, "pos": 5 }, { "pts": 60, "pos": 5 }, { "pts": 46, "pos": 11 }, { "pts": 51, "pos": 8 }, { "pts": 70, "pos": 4 }, { "pts": 62, "pos": 5 }, { "pts": 69, "pos": 4 }, { "pts": 72, "pos": 5 }, { "pts": 69, "pos": 6 }, { "pts": 64, "pos": 5 }, { "pts": 70, "pos": 3 }, { "pts": 86, "pos": 2 }, { "pts": 77, "pos": 3 }] }, { "name": "Arsenal", "positions": 20, "max": 20, "years": [{ "pts": 56, "pos": 10 }, { "pts": 71, "pos": 4 }, { "pts": 51, "pos": 12 }, { "pts": 63, "pos": 5 }, { "pts": 68, "pos": 3 }, { "pts": 78, "pos": 1 }, { "pts": 78, "pos": 2 }, { "pts": 73, "pos": 2 }, { "pts": 70, "pos": 2 }, { "pts": 87, "pos": 1 }, { "pts": 78, "pos": 2 }, { "pts": 90, "pos": 1 }, { "pts": 83, "pos": 2 }, { "pts": 67, "pos": 4 }, { "pts": 68, "pos": 4 }, { "pts": 83, "pos": 3 }, { "pts": 72, "pos": 4 }, { "pts": 75, "pos": 3 }, { "pts": 68, "pos": 4 }, { "pts": 70, "pos": 3 }, { "pts": 73, "pos": 4 }, { "pts": 79, "pos": 4 }, { "pts": 75, "pos": 3 }, { "pts": 71, "pos": 2 }, { "pts": 75, "pos": 5 }, { "pts": 63, "pos": 6 }] }, { "name": "Liverpool", "positions": 20, "max": 20, "years": [{ "pts": 59, "pos": 6 }, { "pts": 60, "pos": 8 }, { "pts": 74, "pos": 4 }, { "pts": 71, "pos": 3 }, { "pts": 68, "pos": 4 }, { "pts": 65, "pos": 3 }, { "pts": 54, "pos": 7 }, { "pts": 67, "pos": 4 }, { "pts": 69, "pos": 3 }, { "pts": 80, "pos": 2 }, { "pts": 64, "pos": 5 }, { "pts": 60, "pos": 4 }, { "pts": 58, "pos": 5 }, { "pts": 82, "pos": 3 }, { "pts": 68, "pos": 3 }, { "pts": 76, "pos": 4 }, { "pts": 86, "pos": 2 }, { "pts": 63, "pos": 7 }, { "pts": 58, "pos": 6 }, { "pts": 52, "pos": 8 }, { "pts": 61, "pos": 7 }, { "pts": 84, "pos": 2 }, { "pts": 62, "pos": 6 }, { "pts": 60, "pos": 8 }, { "pts": 76, "pos": 4 }, { "pts": 75, "pos": 4 }] }, { "name": "Everton", "positions": 20, "max": 20, "years": [{ "pts": 53, "pos": 13 }, { "pts": 44, "pos": 17 }, { "pts": 50, "pos": 15 }, { "pts": 61, "pos": 6 }, { "pts": 42, "pos": 15 }, { "pts": 40, "pos": 17 }, { "pts": 43, "pos": 14 }, { "pts": 50, "pos": 13 }, { "pts": 42, "pos": 16 }, { "pts": 43, "pos": 15 }, { "pts": 59, "pos": 7 }, { "pts": 39, "pos": 17 }, { "pts": 61, "pos": 4 }, { "pts": 50, "pos": 11 }, { "pts": 58, "pos": 6 }, { "pts": 65, "pos": 5 }, { "pts": 63, "pos": 5 }, { "pts": 61, "pos": 8 }, { "pts": 54, "pos": 7 }, { "pts": 56, "pos": 7 }, { "pts": 63, "pos": 6 }, { "pts": 72, "pos": 5 }, { "pts": 47, "pos": 11 }, { "pts": 47, "pos": 11 }, { "pts": 61, "pos": 7 }, { "pts": 49, "pos": 8 }] }]
    };

    var rail = document.querySelector('.h2h__rail');
    var body = document.querySelector('.h2h__body');
    var overflow = document.querySelector('.h2h__overflow');
    var canvas = document.querySelector('.h2h__canvas');
    var tooltip = document.querySelector('.h2h__tooltip');
    var currentdata = {};
    var points = {
      home: [],
      away: []
    };
    var lines = {
      home: [],
      away: []
    };

    function setup(teams) {

      var showoverflow = 0;
      var years = 0;

      body.querySelectorAll('.h2h__point').forEach(function (item) {
        points[item.dataset.label].push(item);
        item.onmouseenter = showtooltip;
        item.onmouseleave = hidetooltip;
      });

      body.querySelectorAll('.h2h__line').forEach(function (item) {
        lines[item.dataset.label].push(item);
      });

      teams.forEach(function (team) {

        if (team.max > team.positions) {
          var max = (team.max - team.positions);
          if (max > showoverflow) {
            showoverflow = max
          }

        }

        if (team.years.length > years) {
          years = team.years.length
        }

      });

      if (showoverflow) {
        overflow.style.height = (showoverflow * 2) + 24 + "px";
      }

      else {
        overflow.style.height = "0";
      }

      canvas.style.width = ((years + 2) * 30) + "px";
    }

    function drawpoints(data, label, modifier) {

      currentdata[label] = data;

      modifier = modifier || '';

      points[label] = points[label] || [];
      lines[label] = lines[label] || [];

      data.years.forEach(function (year, index) {

        var point = points[label][index];
        var top;

        if (!point) {
          point = document.createElement('div');
          point.className = 'h2h__point ' + modifier;
          point.onmouseenter = showtooltip;
          point.onmouseleave = hidetooltip;
          body.appendChild(point);
          points[label].push(point);
        }

        point.setAttribute('data-label', label);
        point.setAttribute('data-tooltip', 'Position: ' + year.pos + '|Points: ' + year.pts);
        point.innerText = year.pos;

        if (year.pos > 20) {
          top = "100% + " + ((year.pos - 20) * 2) + "px";
        }

        else {
          top = topc(year.pos, 20) + "%";
        }

        point.style.cssText = "top:calc(" + top + "); left:" + ((index * 30) + 30) + "px";

        var line = lines[label][index];
        if (!line) {
          line = document.createElement('div');
          line.className = 'h2h__line ' + modifier;
          line.setAttribute('data-label', label);
          body.appendChild(line);
          lines[label].push(line);
        }

        if (points[label][index - 1]) {
          drawline(points[label][index - 1], point, line);
        }
      });
    }

    function topc(val, max) {
      return (100 / max) * val
    }

    function drawline(a, b, line) {
      var pointA = {
        left: a.offsetLeft,
        top: a.offsetTop
      };

      var pointB = {
        left: b.offsetLeft,
        top: b.offsetTop
      }

      var pointAcenterX = a.offsetWidth / 2;
      var pointAcenterY = a.offsetHeight / 2;
      var pointBcenterX = b.offsetWidth / 2;
      var pointBcenterY = b.offsetHeight / 2;
      var angle = Math.atan2(pointB.top - pointA.top, pointB.left - pointA.left) * 180 / Math.PI;
      var distance = lineDistance(pointA.left, pointA.top, pointB.left, pointB.top);

      // Set Angle
      line.style.cssText = 'transform: rotate(' + angle + 'deg); width:' + distance + 'px;';

      if (pointB.left < pointA.left) {

        line.style.top = (pointA.top) + 'px';
        line.style.left = (pointB.left) + 'px';
      }

      else {
        line.style.top = (pointA.top) + 'px';
        line.style.left = (pointA.left) + 'px';
      }
    }

    function lineDistance(x, y, x0, y0) {
      return Math.sqrt((x -= x0) * x + (y -= y0) * y);
    };

    function redraw() {
      setup([currentdata.home, currentdata.away]);
      drawpoints(currentdata.home, 'home');
      drawpoints(currentdata.away, 'away');
    }

    function showtooltip(event) {
      clearTimeout(tooltip.timeout);
      var dims = event.target.getBoundingClientRect();
      tooltip.textContent = event.target.getAttribute('data-tooltip').replace(/\|/g, '\n');
      tooltip.style.cssText = "opacity:1;visibility:visible;left:" + (dims.left + (dims.width / 2)) + "px;top: " + dims.top + "px";
    }

    function hidetooltip(event) {
      tooltip.timeout = setTimeout(function () {
        tooltip.style.opacity = "0";
      }, 333);
    }

    function swipable() {
      if (rail.scrollWidth > rail.offsetWidth) {
        rail.setAttribute('data-swipable', true);
      }

      rail.onscroll = function () {
        rail.onscroll = null;
        rail.removeAttribute('data-swipable');
      }
    }

    setup([data.teams[0], data.teams[1]]);
    drawpoints(data.teams[0], 'home', 'animate-in-view');
    drawpoints(data.teams[1], 'away', 'animate-in-view');


    var resize;
    window.addEventListener('resize', function () {
      clearTimeout(resize);
      resize = setTimeout(function () {
        redraw();
      }, 1000 / 3)
    })

    setTimeout(function () {
      document.querySelectorAll('.animate-in-view').forEach(function (item) {
        item.classList.remove('animate-in-view');
      })
    }, 1000)


    document.querySelectorAll('select').forEach(function (item) {
      item.onchange = function () {

        var s1 = document.querySelectorAll('select')[0];
        var s2 = document.querySelectorAll('select')[1];

        var data1 = data.teams[parseInt(s1.value, 10)];
        var data2 = data.teams[parseInt(s2.value, 10)];

        setup([data1, data2]);
        drawpoints(data1, s1.id);
        drawpoints(data2, s2.id);

      }
    });

    swipable();
  </script>
</body>

</html>