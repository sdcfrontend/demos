<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    * {
      padding: 0;
      margin: 0;
      box-sizing: border-box;
    }

    @font-face {
      font-family: skytext;
      src: url(sky-regular.woff) format("woff");
    }

    html {
      font-size: 18px;
      font-family: skytext
    }

    .gallery__slide {
      color: #eee;
      height: 140vh;
      position: sticky;
      top: 0;
    }

    .gallery__slide:last-of-type {
      height: 100vh;
    }

    .gallery__slide-figure {
      height: 100vh;
      /* display: flex; */
    }

    @media all and (min-width: 900px){
      .gallery__slide-image {
        position: relative;
        position: fixed;
        width: 60%;
        height: 100vh;
        top: 0;
        will-change: opacity;
        transition: opacity 0.33s
      }

      .gallery__slide
      .gallery__slide-image {
        opacity: 0;
      }

      .gallery__slide:first-of-type
      .gallery__slide-image {
        opacity: 1;
      }

      .gallery__slide-caption {
        margin-left: 60%;
        background: #222;
        opacity: 1;
      }

      .gallery__slide-caption > * {
        will-change: opacity;
        transition: opacity 0.33s
      }

      .gallery__slide-caption[hidden] > * {
        opacity: 0
      }
    }

    .gallery__slide-caption {
      flex: 1;
      width: 40%;
      min-width: 400px;
      height: 100%;
      background: #222;

    }

    .gallery__slide-image > img {
      position: absolute;
      width: 100%;
      height: 100%;
      object-fit: cover;
      background: #222
    }

    .gallery__slide-caption {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2em;
      flex-direction: column;
    }

    .gallery__slide-caption h4 {
      font-size: 2.2em;
      font-weight: 500;
      line-height: 1.15;
      max-width: 70%;
      min-width: 300px;
      margin-bottom: 1em
    }

    .gallery__slide-caption h5 {
      font-size: 16px;
      font-weight: 400;
      line-height: 1.15;
      max-width: 70%;
      min-width: 300px;
      margin-bottom: 0.8em;
      text-align: left;
      width: 100%;
      color: #ccc
    }

    .gallery__slide-caption p {
      font-size: 1.25em;
      font-weight: 500;
      line-height: 1.5;
      max-width: 70%;
      min-width: 300px;
    }

    .breaking {
      background: #ffcc00;
      color: black!important;
      padding: 3px 5px;
      display: inline-block;
      text-transform: uppercase;
      font-weight: 600;
      line-height: 1;
      font-size: 15px;
    }

    @media all and (max-width: 900px){
      
      .gallery__slide {
        height: 160vh
      }

      .gallery__slide-figure {
        height: 100vh;
        display: flex;
        flex-direction: column;
      }

      .gallery__slide-caption {
        max-width: 100%;
        min-width: 100%;
        flex: 1;
        padding: 1em;
      }

      .gallery__slide-image[class] {
        position: relative;
        width: 100%;
        height: 60vh;
        opacity: 1!important;
      } 

      .gallery__slide-caption h4 {
        font-size: 1.7em;
        margin-bottom: 0.5em;
      }

      .gallery__slide-caption h4,
      .gallery__slide-caption h5,
      .gallery__slide-caption p {
        max-width: 90%;
        text-align: left;
        width: 100%;
      }

      .gallery__slide-caption p {
        font-size: 18px;
      }
    }
  </style>
</head>
<body>
  <div class="gallery">
    <div class="gallery__con">
      <div class="gallery__slide">
        <figure class="gallery__slide-figure">
          <div class="gallery__slide-image"><img src="https://e3.365dm.com/18/02/768x1024/skynews-snow-weather-cold-uk_4241345.jpg?bypass-service-worker&20180226092416" alt=""></div>
          <figcaption class="gallery__slide-caption">
            <h5><span class="breaking">Breaking</span></h5>
            <h4>Britian shivers under beastly freeze.</h4>
            <p>The Met Office warns of "heavy snow showers" and disruption to travel as temperatures continue to plummet around the country.</p>
          </figcaption>
        </figure>
      </div>
      <div class="gallery__slide">
        <figure class="gallery__slide-figure">
          <div class="gallery__slide-image"><img src="https://e3.365dm.com/18/02/768x1024/skynews-fire-leicester-reported-explosion_4241134.jpg?bypass-service-worker&20180225223012" alt=""></div>
          <figcaption class="gallery__slide-caption">
              <h5>UK News</h5>
              <h4>Four dead following Leicester shop explosion.</h4>
              <p>Police believe there may still be people unaccounted for after a blast and subsequent fire destroy a shop and flats in Leicester.</p>
          </figcaption>
        </figure>
      </div>
      <div class="gallery__slide">
          <figure class="gallery__slide-figure">
              <div class="gallery__slide-image"><img src="https://e3.365dm.com/17/09/768x1024/b4a7f7df363f8fe4710d1e2ef022f817dd18021edf96a2c3488a2a4ad36ee4c7_4096630.jpg?bypass-service-worker&20170910101906" alt=""></div>
              <figcaption class="gallery__slide-caption">
                  <h5>Politics</h5>
                  <h4>Blair hits back after being branded 'complete liar'.</h4>
                  <p>The former prime minister is repeating denials about allegations included in Michael Wolff's book about the US President.</p>
              </figcaption>
            </figure>
      </div>
      <div class="gallery__slide">
          <figure class="gallery__slide-figure">
              <div class="gallery__slide-image"><img src="https://e3.365dm.com/18/02/768x1024/kevin-smith-director-us-sky-news_4241435.jpg?bypass-service-worker&20180226112001" alt=""></div>
              <figcaption class="gallery__slide-caption">
                  <h5>Entertainment</h5>
                  <h4>Kevin Smith: I nearly died from a heart attack'.</h4>
                  <p>The star tweets a selfie of himself in a hospital bed and says: "I would've died tonight. But for now, I'm still above ground!"</p>
              </figcaption>
            </figure>
      </div>
      <div class="gallery__slide">
          <figure class="gallery__slide-figure">
              <div class="gallery__slide-image"><img src="https://e3.365dm.com/18/02/768x1024/skysports-mrt-usa_4237498.jpg?20180222094003" alt=""></div>
              <figcaption class="gallery__slide-caption">
                  <h5>Offbeat</h5>
                  <h4>Curling is cool, fool! Mr T is a big Winter Olympics fan.</h4>
                  <p>The A-Team star can't stop tweeting about the Olympics, gripped by the action on the ice curling rink in particular.</p>
              </figcaption>
            </figure>
      </div>
    </div>
  </div>

  <script>
    var images = document.querySelectorAll('.gallery__slide-image');
    var slides = document.querySelectorAll('.gallery__slide');
    var captions = document.querySelectorAll('.gallery__slide-caption');

    function showImage(index){
      console.log(index);

      images.forEach(function(image, index){
        image.style.opacity = 0;
        captions[index].setAttribute('hidden', true);
        image.index = index;
      })

      images[index].style.opacity = 1;
      captions[index].removeAttribute('hidden');
    }

    function tick(){
      var imind = 0;
      var h = window.innerHeight;
      slides.forEach(function(slide, index){
        if(slide.getBoundingClientRect().top < (h/1.5)){
          imind = index;
        }
      });


      showImage(imind);
      window.requestAnimationFrame(tick)

    }
    tick()
  </script>
</body>
</html>