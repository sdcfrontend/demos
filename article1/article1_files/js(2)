(function(n,t){"use strict";(function(t){typeof define=="function"&&define.amd?define(["jquery"],t):typeof exports=="object"?t(require("jquery")):t(n.jQuery||n.Zepto)})(function(i){var r=this||{},u="",f=0,h=0,e=0,a=".adunit",c=!1,o=!1,s="googleAdUnit",v=function(n,t,o){var s;f=0;e=0;u=n;s=i(t);r.shouldCheckForAdBlockers=function(){return o?typeof o.afterAdBlocked=="function":!1};nt(o,s).then(function(){o=y(o);r.dfpOptions=o;var n=!1,t=function(){p(o,s);w(o,s)};o.beforeInitAds&&(n=o.beforeInitAds(t));n||i(function(){t()})})},y=function(r){var u={setTargeting:{},setCategoryExclusion:"",setLocation:"",enableSingleRequest:!0,collapseEmptyDivs:"original",refreshExisting:!0,disablePublisherConsole:!1,disableInitialLoad:!1,noFetch:!1,namespace:t,sizeMapping:{}};if(typeof r.setUrlTargeting=="undefined"||r.setUrlTargeting){var f=b(r.url);i.extend(!0,u.setTargeting,{UrlHost:f.Host,UrlPath:f.Path,UrlQuery:f.Query})}return i.extend(!0,u,r),u.googletag&&n.googletag.cmd.push(function(){i.extend(!0,n.googletag,u.googletag)}),u},p=function(t,o){var h=n.googletag;o.each(function(){var n=i(this);f++;var r=d(n,t),e=k(n,r),o=g(n);n.data("existingContent",n.html());n.html("").addClass("display-none");h.cmd.push(function(){var f,v=n.data(s);if(v)f=v;else{var c;c=u===""?r:"/"+u+"/"+r;n.data("outofpage")?f=h.defineOutOfPageSlot(c,e):(f=h.defineSlot(c,o,e),n.data("companion")&&(f=f.addService(h.companionAds())));f=f.addService(h.pubads())}var y=n.data("targeting");y&&i.each(y,function(n,t){f.setTargeting(n,t)});var p=n.data("exclusions");if(p){var b=p.split(","),l;i.each(b,function(n,t){l=i.trim(t);l.length>0&&f.setCategoryExclusion(l)})}var a=n.data("size-mapping");if(a&&t.sizeMapping[a]){var w=h.sizeMapping();i.each(t.sizeMapping[a],function(n,t){w.addSize(t.browser,t.ad_sizes)});f.defineSizeMapping(w.build())}n.data(s,f);typeof t.beforeEachAdLoaded=="function"&&t.beforeEachAdLoaded.call(this,n)})});h.cmd.push(function(){var n=h.pubads();t.enableSingleRequest&&n.enableSingleRequest();i.each(t.setTargeting,function(t,i){n.setTargeting(t,i)});var u=t.setLocation;if(typeof u=="object"&&(typeof u.latitude=="number"&&typeof u.longitude=="number"&&typeof u.precision=="number"?n.setLocation(u.latitude,u.longitude,u.precision):typeof u.latitude=="number"&&typeof u.longitude=="number"&&n.setLocation(u.latitude,u.longitude)),t.setCategoryExclusion.length>0){var c=t.setCategoryExclusion.split(","),s;i.each(c,function(t,r){s=i.trim(r);s.length>0&&n.setCategoryExclusion(s)})}t.collapseEmptyDivs&&n.collapseEmptyDivs();t.disablePublisherConsole&&n.disablePublisherConsole();t.companionAds&&(h.companionAds().setRefreshUnfilledSlots(!0),t.disableInitialLoad||n.enableVideoAds());t.disableInitialLoad&&n.disableInitialLoad();t.noFetch&&n.noFetch();n.addEventListener("slotRenderEnded",function(n){e++;var r=i("#"+n.slot.getSlotId().getDomId()),u=n.isEmpty?"none":"block",s=r.data("existingContent");u==="none"&&i.trim(s).length>0&&t.collapseEmptyDivs==="original"&&(r.show().html(s),u="block display-original");r.removeClass("display-none").addClass("display-"+u);typeof t.afterEachAdLoaded=="function"&&t.afterEachAdLoaded.call(this,r,n);typeof t.afterAllAdsLoaded=="function"&&e===f&&t.afterAllAdsLoaded.call(this,o)});r.shouldCheckForAdBlockers()&&!h._adBlocked_&&setTimeout(function(){var u=n.getSlots?n.getSlots():[];u.length>0&&i.get(u[0].getContentUrl()).always(function(n){n.status!==200&&i.each(u,function(){var n=i("#"+this.getSlotId().getDomId());t.afterAdBlocked.call(r,n,this)})})},0);h.enableServices()})},w=function(t,u){var f=n.googletag;if(r.shouldCheckForAdBlockers()&&!f._adBlocked_&&f.getVersion){var e="//partner.googleadservices.com/gpt/pubads_impl_"+f.getVersion()+".js";i.getScript(e).always(function(n){n&&n.statusText==="error"&&i.each(u,function(){t.afterAdBlocked.call(r,i(this))})})}u.each(function(){var n=i(this),u=n.data(s);f._adBlocked_&&r.shouldCheckForAdBlockers()&&t.afterAdBlocked.call(r,n);t.refreshExisting&&u&&n.hasClass("display-block")?f.cmd.push(function(){f.pubads().refresh([u])}):f.cmd.push(function(){f.display(n.attr("id"))})})},b=function(t){var i=(t||n.location.toString()).match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/),r=i[4]||"",u=(i[5]||"").replace(/(.)\/$/,"$1"),f=i[7]||"",e=f.replace(/\=/ig,":").split("&");return{Host:r,Path:u,Query:e}},k=function(n,t){return h++,n.attr("id")||n.attr("id",t.replace(/[^A-z0-9]/g,"_")+"-auto-gen-id-"+h).attr("id")},d=function(n,t){var i=n.data("adunit")||t.namespace||n.attr("id")||"";return typeof t.alterAdUnitName=="function"&&(i=t.alterAdUnitName.call(this,i,n)),i},g=function(t){var r=[],u=t.data("dimensions");if(u)if(u==="fluid")r.push("fluid"),n.innerWidth>1035?r.push([645,115]):n.innerWidth>800&&r.push([400,115]);else{var f=u.split(",");i.each(f,function(n,t){var i=t.split("x");r.push([parseInt(i[0],10),parseInt(i[1],10)])})}else r.push([t.width(),t.height()]);return r},nt=function(t,u){function e(){r.shouldCheckForAdBlockers()&&i.each(u,function(){t.afterAdBlocked.call(r,i(this))})}if(o=o||i('script[src*="googletagservices.com/tag/js/gpt.js"]').length,o)return c&&e(),i.Deferred().resolve();var s=i.Deferred();n.googletag=n.googletag||{};n.googletag.cmd=n.googletag.cmd||[];var f=document.createElement("script");f.async=!0;f.type="text/javascript";f.onerror=function(){l();s.resolve();c=!0;e()};f.onload=function(){googletag._loadStarted_||(googletag._adBlocked_=!0,e());s.resolve()};var a="https:"===document.location.protocol;f.src=(a?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var h=document.getElementsByTagName("script")[0];return h.parentNode.insertBefore(f,h),f.style.display==="none"&&l(),s},l=function(){var t=n.googletag,f=t.cmd,u=function(n,i,r){return t.ads.push(r),t.ads[r]={renderEnded:function(){},addService:function(){return this}},t.ads[r]};t={cmd:{push:function(n){n.call(r)}},ads:[],pubads:function(){return this},noFetch:function(){return this},disableInitialLoad:function(){return this},disablePublisherConsole:function(){return this},enableSingleRequest:function(){return this},setTargeting:function(){return this},collapseEmptyDivs:function(){return this},enableServices:function(){return this},defineSlot:function(n,t,i){return u(n,t,i,!1)},defineOutOfPageSlot:function(n,t){return u(n,[],t,!0)},display:function(n){return t.ads[n].renderEnded.call(r),this}};i.each(f,function(n,i){t.cmd.push(i)})};i.dfp=i.fn.dfp=function(n,i){i=i||{};n===t&&(n=u);typeof n=="object"&&(i=n,n=i.dfpID||u);var r=this;return typeof this=="function"&&(r=a),v(n,r,i),this}})})(window),function(n){var t={};window.pbads=window.pbads||{};var i=document.location.toString().toLowerCase().search("pbads_debug")!=-1;debug=function(){i&&console.log.apply(console,arguments)};t.init=function(n,i,r){try{debug("initiating dfp ads");t.dfpId=n;t.dfpTargeting=i;t.dfpUnitsConfig=r;var u=JSON.parse(r);debug("dfp config path",u.path);var r=u.config;debug("dfp config units",r);$(".adunit").each(function(){var t=$(this).attr("id");if(r.hasOwnProperty(t)){var n=r[t];debug("placement ["+t+"] founded with adunit ["+n.adunit+"], dimensions ["+n.dimensions+"]");$.isEmptyObject(n)?debug("ignore placement",t," empty config"):($(this).attr("data-adunit",n.adunit),typeof n.dimensions!="undefined"&&$(this).attr("data-dimensions",n.dimensions),$(this).attr("data-state","ready"))}else console.warn("missing config for adunit",t)});var f=Tools.getUrlParameterByName("parentUrl")||window.location.href;window.googletag&&googletag.cmd&&googletag.cmd.push(function(){googletag.pubads().set("page_url",f);googletag.pubads().addEventListener("slotRenderEnded",function(n){if(!n.isEmpty){var t=$("#"+n.slot.getSlotElementId());t.show();t.closest(".adunit-wrapper").show()}console.log("Slot has been rendered:")})})}catch(e){console.log("failed to initiate dfp ads ($.dfp)",e)}};t.refreshSingleSlot=function(n,t){var u=n.find(".adunit"),e=u.attr("id"),o=googletag.pubads().getSlots(),f=$.grep(o,function(n){return n.getSlotElementId()===e}),r=null;f.length>0&&(r=f[0]);var i=null;try{i=r.getResponseInformation().campaignId.toString()}catch(l){}var s=r!=null&&u.data("dfp-refresh")!="true",h=i==null||InQuestionCampaignIdDisregardArray.indexOf(i)==-1,c=i==null||t==null||t!=null&&t.indexOf(i)==-1;s&&h&&c&&(u.data("single-refreshed","true"),googletag.pubads().refresh([r]))};t.refresh=function(){var n=googletag.pubads().getSlots();$(".adunit[data-state='ready']").each(function(){for(slot in n){var t=null;try{var t=n[slot].getResponseInformation().campaignId}catch(i){}n[slot].getSlotElementId()!="ad-tags-placeholder"&&t!=InBannerCampaignId&&$(this).data("single-refreshed")!="true"&&n[slot].getSlotElementId()==$(this)[0].id&&($(this).data("dfp-refresh","true"),googletag.pubads().refresh([n[slot]]))}})};t.fetch=function(){try{var n=t.dfpTargeting,i=t.dfpId;$.each(t.dfpTargeting,function(n,t){debug("set targeting ["+n+"] with ["+t+"]")});$(".adunit[data-state='ready']").each(function(){var t=$(this),n=t.attr("data-adrefreshindex");n=typeof n!="undefined"?parseInt(n,10):0;var i=n+1;t.attr("data-adrefreshindex",i);t.attr("data-targeting",JSON.stringify({refresh:i}))});$(".adunit[data-state='ready']").dfp({dfpID:i,enableSingleRequest:!0,setTargeting:n,setUrlTargeting:!1,collapseEmptyDivs:null,beforeEachAdLoaded:function(n){n.attr("data-adtype","banner");var t=Tools.createUUID();n.attr("data-aduuid",t);debug("adunit ["+n.attr("id")+"] initiating...")},afterEachAdLoaded:function(n,t){var i=n.hasClass("display-block").toString();n.attr("data-adfill",i);n.attr("data-adblocked","false");i=="false"&&n[0].id.indexOf("after-question")>=0&&$(n.parents(".pbads_after-question")[0]).attr("style","display: none !important;");typeof n.data("callback")!="undefined"&&typeof window[n.data("callback")]=="function"&&window[n.data("callback")].call(this,n,t)},afterAllAdsLoaded:function(n){try{n.each(function(){debug("adunit ["+$(this).attr("id")+"] loaded. fill=["+$(this).hasClass("display-block").toString()+"]");debug("sending event for adunit ["+$(this).attr("id")+"]");t.sendEvent($(this).attr("id"))})}catch(i){console.warn("DFP: error loading adunits",i)}},beforeInitAds:function(n){return t.brealtimeConfig?t.checkIfNeedToLoadBrealtime(t.brealtimeConfig)?(t.loadBrealtimeScript(n),!0):!1:!1}})}catch(r){console.log("failed to fetch dfp ads ($.dfp)",r)}};t.sendEvent=function(n){try{var t=$("#"+n),r=t.attr("id"),u=t.attr("data-adunit"),f=t.attr("data-aduuid"),e=t.attr("data-adtype"),o=t.attr("data-adfill"),s=t.attr("data-dimensions"),h=t.attr("data-adRefreshIndex"),c=t.attr("data-adBlocked"),i={adPlacement:r,adUnitDFP:u,adUuid:f,adType:e,adFill:o,adDimensions:s,adRefreshIndex:h,adBlocked:c};AwsBridge.AdCallEvent(i);debug("sending dfp event to analytics",i)}catch(l){console.warn("failed to generate dfp event for analytics",adUnit)}};t.triggerRefreshEvents=function(t){if(typeof n.configuration!="undefined"&&typeof n.configuration.config!="undefined"&&typeof n.configuration.config.adRefreshRate!="undefined")for(var r=n.configuration.config.adRefreshRate,u=!1,i=0;i<r.length;i++){var f=r[i].RatePercent,e="Game.Progress."+f;t>=f&&!r[i].eventSent&&(r[i].eventSent=!0,u||($(document).trigger(e),u=!0))}};t.checkIfNeedToLoadBrealtime=function(n){var t=!1;try{var i=window.Tools;if(!n||!i)return!1;n.all?t=!0:$.each(n,function(n,r){var u=i.getURLParam(n);if(u&&$.inArray(u,r)>-1)return t=!0,!0})}catch(r){return debug("exception in checkIfNeedToLoadBrealtime: "+r),!1}return t};t.loadBrealtimeScript=function(n){try{if($('script[src*="biddr.brealtime.com"]').length)return;var t=document.createElement("script");t.type="text/javascript";t.src="//biddr.brealtime.com/54795959-891.js";t.onload=function(){debug("brealtime script loaded");n&&n()};t.onerror=function(){debug("brealtime script on error ocurred");n&&n()};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i.nextSibling)}catch(r){debug("exception in loadBrealtimeScript: "+r)}};window.pbads.dfp=t;$(document).trigger("pbads.dfp.ready")}(window.pbads);var ResultPixelHandler=function(){var n=!1;typeof(window.Tools||{}).isMobile!="undefined"&&(n=window.Tools.isMobile);function r(){return $('script[src*="googletagservices.com/tag/js/gpt.js"]').length}(function(){if(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],!r()){var n=document.createElement("script");n.async=!0;n.type="text/javascript";var i="https:"===document.location.protocol;n.src=(i?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}})();var u=function(n){typeof dfpTargeting!="undefined"&&$.each(dfpTargeting,function(t,i){n.setTargeting(t,i)})},i=function(n){var i=$("<script type='text/javascript'>googletag.cmd.push(function() {googletag.display('"+n+"');});<\/script>"),t=$("<div id='"+n+"'><\/div>");t.append(i);$("body").append(t)},t,f=function(){googletag.cmd.push(function(){t=n?googletag.defineSlot("/94166617/PB_Result_M1x1",[1,1],"div-gpt-PB_Result_M1x1").addService(googletag.pubads()):googletag.defineSlot("/94166617/PB_Result_W1x1",[1,1],"div-gpt-PB_Result_W1x1").addService(googletag.pubads());u(t);googletag.pubads().enableSingleRequest();googletag.enableServices()});n?i("div-gpt-PB_Result_M1x1"):i("div-gpt-PB_Result_W1x1")},e=function(){$(document).on("Game.End.Screen",function(){f()})};return{SendPixelOnResult:e}}