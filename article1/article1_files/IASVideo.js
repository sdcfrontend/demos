(function(){var N=function(a,d,b){var c={};return function(a,b,d){var m;try{c[a]||(c[a]=!0,d&&(m=d.contextNode,d.contextNode=""),(new Image).src="//pixel.adsafeprotected.com/jsdiagnostic?code:"+a+"&err:"+encodeURIComponent(b.message)+"&config:"+encodeURIComponent(JSON.stringify(d)),d&&(d.contextNode=m))}catch(p){}}}();try{(function(a){function d(){}function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");
if("function"!==typeof a)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];u(a,this)}function f(a,b){for(;3===a._state;)a=a._value;0===a._state?a._deferreds.push(b):(a._handled=!0,c._immediateFn(function(){var c=1===a._state?b.onFulfilled:b.onRejected;if(null===c)(1===a._state?e:k)(b.promise,a._value);else{var d;try{d=c(a._value)}catch(p){k(b.promise,p);return}e(b.promise,d)}}))}function e(a,e){try{if(e===a)throw new TypeError("A promise cannot be resolved with itself.");
if(e&&("object"===typeof e||"function"===typeof e)){var d=e.then;if(e instanceof c){a._state=3;a._value=e;m(a);return}if("function"===typeof d){u(b(d,e),a);return}}a._state=1;a._value=e;m(a)}catch(p){k(a,p)}}function k(a,b){a._state=2;a._value=b;m(a)}function m(a){2===a._state&&0===a._deferreds.length&&c._immediateFn(function(){a._handled||c._unhandledRejectionFn(a._value)});for(var b=0,e=a._deferreds.length;b<e;b++)f(a,a._deferreds[b]);a._deferreds=null}function p(a,b,c){this.onFulfilled="function"===
typeof a?a:null;this.onRejected="function"===typeof b?b:null;this.promise=c}function u(a,b){var c=!1;try{a(function(a){c||(c=!0,e(b,a))},function(a){c||(c=!0,k(b,a))})}catch(d){c||(c=!0,k(b,d))}}var C=setTimeout;c.prototype["catch"]=function(a){return this.then(null,a)};c.prototype.then=function(a,b){var c=new this.constructor(d);f(this,new p(a,b,c));return c};c.all=function(a){var b=Array.prototype.slice.call(a);return new c(function(a,c){function e(k,p){try{if(p&&("object"===typeof p||"function"===
typeof p)){var m=p.then;if("function"===typeof m){m.call(p,function(a){e(k,a)},c);return}}b[k]=p;0===--d&&a(b)}catch(f){c(f)}}if(0===b.length)return a([]);for(var d=b.length,k=0;k<b.length;k++)e(k,b[k])})};c.resolve=function(a){return a&&"object"===typeof a&&a.constructor===c?a:new c(function(b){b(a)})};c.reject=function(a){return new c(function(b,c){c(a)})};c.race=function(a){return new c(function(b,c){for(var e=0,d=a.length;e<d;e++)a[e].then(b,c)})};c._immediateFn="function"===typeof setImmediate&&
function(a){setImmediate(a)}||function(a){C(a,0)};c._unhandledRejectionFn=function(a){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};c._setImmediateFn=function(a){c._immediateFn=a};c._setUnhandledRejectionFn=function(a){c._unhandledRejectionFn=a};"undefined"!==typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)})(this);var s=function(){return{getDoc:function(){return document},getWindow:function(a){var d;a&&(d=a.ownerDocument);return a&&
d?d.defaultView||d.parentWindow:window}}}(),g=function(){var a=null,d=null,b=null,c=null,f,e=function(a){return a.replace(/^https?:\/\//,"//")};return{getFullUrl:function(b){if(null===a){g.log("getFullUrl called");var c=null;Array.prototype.slice.call(b.getElementsByTagName("script")).forEach(function(a){null===c&&0<=a.src.indexOf("IASVideo.js")&&(c=a.src)});g.log("src = "+c);a=c}return a},getQueryString:function(a){null===d&&(a=this.getFullUrl(a).split("?"),a.splice(0,1),d="?"+a.join("?"));return d},
getDomain:function(a){null===b&&(b=this.getFullUrl(a).split("?")[0]);return b},getUserAgent:function(){var a=s.getWindow(),b="";a&&a.navigator&&a.navigator.userAgent&&(b=a.navigator.userAgent);return b},loadJsCssFile:function(a,b,c,e){c=c||s.getDoc();var d;"js"===b?null===c.querySelector('script[src*="'+a+'"]')&&(d=c.createElement("script"),d.setAttribute("type","text/javascript"),d.setAttribute("src",a),d.setAttribute("async",!1)):"css"===b&&(d=c.createElement("link"),d.setAttribute("rel","stylesheet"),
d.setAttribute("type","text/css"),d.setAttribute("href",a));a=c.getElementsByTagName("head")[0];"undefined"!==typeof d&&(e?a.insertBefore(d,a.firstChild):a.appendChild(d),F.addDomElement(d))},getQueryParamByName:function(a,b){var c=this.getQueryString(s.getDoc());if(b){var e=c.split(a+"=");if(1<e.length)return e.splice(0,1),decodeURIComponent(e.join(a+"="))}a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");e=RegExp("[\\?&]"+a+"=([^&#]*)");g.log('looking for param "'+a+'" in '+c);c=e.exec(c);g.log("found "+
c);null!==c||this.isXDomain()||(c=e.exec(s.getWindow().top.location.search));return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))},getAdTagUrl:function(){var a=this.getQueryParamByName("originalVast",!0);return e(a)},getIasVidOpts:function(){var a={continueonclick:!1,hidecountdown:!1,frtimer:!1,gertimer:!1,topleftcount:!1,topmiddlecount:!1,toprightcount:!1,bottomleftcount:!0,bottommiddlecount:!1,bottomrightcount:!1},b=this.getQueryParamByName("IAS_VID_OPTS");if(0===b.length)return a;a=b.toLowerCase().split("|");
return a={continueonclick:0<=a.indexOf("continueonclick"),hidecountdown:0<=a.indexOf("hidecountdown"),frtimer:0<=a.indexOf("frtimer"),gertimer:0<=a.indexOf("gertimer"),topleftcount:0<=a.indexOf("topleftcount"),topmiddlecount:0<=a.indexOf("topmiddlecount"),toprightcount:0<=a.indexOf("toprightcount"),bottomleftcount:0<=a.indexOf("bottomleftcount"),bottommiddlecount:0<=a.indexOf("bottommiddlecount"),bottomrightcount:0<=a.indexOf("bottomrightcount")}},getIasScript:function(a){var b=this.getQueryParamByName("IAS_PATH"),
c=this.getQueryParamByName("fwServer"),e=0<b.length?b:"/jsvid";"/"!==e.charAt(0)&&(e="/"+e);var d=this.getFullUrl(s.getDoc()),b=function(a){a=a.split("?");var b="";(2>a.length?"":a[1]).split("&").forEach(function(a){0!==a.indexOf("IAS_VID_OPTS")&&0!==a.indexOf("originalVast")&&0!==a.indexOf("IAS_PATH")&&0!==a.indexOf("fwServer")&&(b+=a+"&")});0<b.length&&(b=b.substr(0,b.length-1));return b}(d);a=function(a,b,c){var e=a.indexOf(":"),d=a.substr(0,e);b=a.substr(e+3,a.length-e-3-b.length);b=b.replace("?",
"");var e=b=b.substr(0,b.indexOf("/")),p=b.split(".");2<p.length&&(p.splice(0,1),b=p.join("."));"/"===b.charAt(b.length-1)&&(b=b.substr(0,b.length-1));a=-1===a.indexOf("dev-")&&-1===a.indexOf("test-");p="";d+="://";return c=c&&0<c.length?d+c.replace(/^https?\:\/\//i,""):a?d+(p+"pixel.")+b:d+e}(d,b,c)+e+"?videoId="+a;0<b.length&&(a+="&"+b);return a},isXDomain:function(){if(null===c)try{c="string"!==typeof s.getTop().location.search}catch(a){c=!0}return c},log:function(a,b,c){"error"===b&&"undefined"!==
typeof c&&t.sendVideoMessage("error",{errorCode:c})},extend:function(a,b){b=b instanceof Array?b:[b];b.forEach(function(b){Object.keys(b).forEach(function(c){a[c]=b[c]})})},appendAttributesToNode:function(a,b){if(b)for(var c in b)if(b.hasOwnProperty(c))try{a.setAttribute(c,b[c])}catch(e){}return a},now:function(){return(new (s.getWindow().Date)).getTime()},getVideoId:function(){if(!f){var a=this.getQueryParamByName("videoId");f=0===a.length||isNaN(a)?Math.floor(1E5*Math.random()):parseInt(a)}return f},
fetch:function(a,b){var c,e=s.getWindow();try{c=new e.XMLHttpRequest,c.onreadystatechange=function(){4==c.readyState&&200==c.status&&b(c)},c.open("GET",a),c.send()}catch(d){}},toRelativeProtocol:e}}(),v=function(a,d){this.element=h.create(a,d);this.parent=void 0;this.children=[];this.remove=function(){this.parent instanceof v&&this.parent.children.splice(this.parent.children.indexOf(this),1);this.parent=void 0;this.children.forEach(function(a){a.remove()});h.remove(this.element);return this};this.appendChild=
function(a){if(a instanceof v)return this.children.push(a),h.appendChild(this.element,a.element),a.parent=this,this};this.appendTo=function(a){h.getNodeAndDo(a,function(c){h.appendChild(c,this.element);this.parent=a;a instanceof v&&a.children.push(this);return this}.bind(this))};this.updateProps=function(a){h.setProperties(this.element,a);return this};this.updateProp=function(a,c){h.setProperty(this.element,a,c);return this};this.getName=function(){return h.getName(this.element)};this.attr=function(a){return h.getAttribute(this.element,
a)};this.is=function(a){return this.getName()===a};this.getWindow=function(a){a=a||this;return void 0===a.parent?s.getWindow(a.element):"iframe"===a.getName()?a.element.contentWindow:this.getWindow(a.parent)};this.getDocument=function(){return this.element.ownerDocument};this.addEventListener=this.element.addEventListener.bind(this.element);this.removeEventListener=this.element.removeEventListener.bind(this.element);this.dispatchEvent=this.element.dispatchEvent.bind(this.element)},h=function(){var a=
["svg","circle","polygon"],d=function(a,b){a.contentWindow?a.contentWindow.document.body.appendChild(b):a.addEventListener("load",function(){a.contentWindow.document.body.appendChild(b)},!1)},b=function(a){a.addEventListener("load",function(){var b=a.contentWindow.document.body.style;b.margin=0;b.width=a.style.width;b.height=a.style.height;b.border=a.style.border},!1)},c=function(a){return!/%$/.test(a)&&/\d+/.test(a)&&parseFloat(/\d+/.exec(a)[0])},f=function(a){return[Element,XMLDocument,HTMLDocument].some(function(b){return a instanceof
b})};return{getOne:function(a,b){return(f(b)?b:s.getDoc()).querySelector(a)},get:function(a,b){var c=f(b)?b:s.getDoc();return n.toArray(c.querySelectorAll(a))},create:function(c,d,f){n.isDOMElement(c)||(f=f||s.getDoc(),c=-1!==a.indexOf(c)?f.createElementNS("http://www.w3.org/2000/svg",c):f.createElement(c));d&&this.setProperties(c,d);"iframe"===c.nodeName.toLowerCase()&&b(c);return c},setProperties:function(a,b){Object.keys(b).forEach(function(c){this.setProperty(a,c,b[c])}.bind(this))},setProperty:function(a,
b,c){b.split(".").reduce(function(a,b,d,e){if(d===e.length-1)n.isFunction(a.setAttribute)?a.setAttribute(b,c):a[b]=c;else return a[b]},a)},appendChild:function(a,b){n.isDOMElement(a)&&n.isDOMElement(b)&&("iframe"===a.nodeName.toLowerCase()?d(a,b):a.appendChild(b))},remove:function(a){a.remove?a.remove():a.removeNode?a.removeNode():a.parentNode.removeChild(a)},getNodeAndDo:function(a,b){var c;a instanceof v?c=a.element:n.isDOMElement(a)&&(c=a);if(c)return b(c)},toPx:function(a){return(a=c(a))&&a+"px"},
getWidth:function(a){return this.getNodeAndDo(a,function(a){return c(getComputedStyle(a,"").getPropertyValue("width"))||c(a.style.width)||a.width||a.clientWidth}.bind(this))},getHeight:function(a){return this.getNodeAndDo(a,function(a){return c(getComputedStyle(a,"").getPropertyValue("height"))||c(a.style.height)||a.height||a.clientHeight}.bind(this))},getParent:function(a){return a.parentElement||a.parentNode},getParentUntil:function(a,b){for(var c=this.getParent(a);this.getParent(c)&&c.tagName.toLowerCase()!==
b.toLowerCase();)c=this.getParent(c);return c},getText:function(a){return a?n.toArray(a.childNodes).map(function(a){return a.textContent.trim()}).join(""):""},getCdata:function(a){return a?n.toArray(a.childNodes).filter(function(a){return"#cdata-section"===a.nodeName}).map(function(a){return a.textContent.trim()})[0]:""},getName:function(a){return a.tagName.toLowerCase()},getAttribute:function(a,b){return a.getAttribute(b)||a[b]||""},getAttributes:function(a){return a?n.toArray(a.attributes).reduce(function(a,
b){return a[b.name]=b.nodeValue,a},{}):{}},getData:function(a){var b=h.getCdata(a);a=h.getText(a);return b||a||""},createEvent:function(a){var b;try{b=new Event(a)}catch(c){b=s.getDoc().createEvent("Event"),b.initEvent(a,!1,!0)}finally{return b}},parseXML:function(a){var b;try{b=n.isString(a)?(new DOMParser).parseFromString(a,"text/xml"):a,G.xmlParseError(b)}catch(c){console.error(c)}finally{return b}},serializeXMLNode:function(a){var b;try{b=(new XMLSerializer).serializeToString(a),G.xmlSerializeError()}catch(c){console.error(c)}finally{return b}}}}(),
G=function(){var a={create:function(a){return function(c){this.name=a;this.message=c}}},d=["ArgumentsException","XMLParsingException","XMLSerializingException"].reduce(function(b,c){b[c]=a.create(c);return b},{});return{initializerErrors:function(a,c,f,e,k,m){if(!a&&0!==a)throw new d.ArgumentsException("User MUST supply width, see http://www.iab.net/media/file/VPAID_2.0_Final_04-10-2012.pdf p18-19.");if(!c&&0!==c)throw new d.ArgumentsException("User MUST supply height, see http://www.iab.net/media/file/VPAID_2.0_Final_04-10-2012.pdf p18-19.");
if(!m)throw new d.ArgumentsException("User MUST supply environmentVars object, see http://www.iab.net/media/file/VPAID_2.0_Final_04-10-2012.pdf p18-19.");if(!m.slot)throw new d.ArgumentsException("User MUST supply environmentVars.slot, see http://www.iab.net/media/file/VPAID_2.0_Final_04-10-2012.pdf p18-19.");if(!m.videoSlot)throw new d.ArgumentsException("User MUST supply environmentVars.videoSlot, see http://www.iab.net/media/file/VPAID_2.0_Final_04-10-2012.pdf p18-19.");},xmlParseError:function(a){if(!n.isEmpty(h.get("parsererror",
a)))throw new d.XMLParsingException("supplied XML is invalid");},xmlSerializeError:function(){if(!n.isFunction(XMLSerializer))throw new d.XMLSerializingException("XML Serializer does not exist in this browser");}}}(),X=function(a,d){this.element=a;this.parent=void 0;this.children=[];this.remove=function(){this.parent instanceof v&&this.parent.children.splice(this.parent.children.indexOf(this),1);this.parent=void 0;this.children.forEach(function(a){a.remove()});h.remove(this.element);return this};
this.appendChild=function(a){};this.appendTo=function(a){};this.updateProps=function(a){Object.keys(a).forEach(function(c){this.updateProp(c,a[c])}.bind(this));return this};this.updateProp=function(a,c){this.element.setAttribute?this.element.setAttribute(a,c):this.element[a]=c;return this};this.getName=function(){return"player"};this.attr=function(a){return this.element[a]};this.is=function(a){return this.getName()===a};this.getWindow=function(){var a=d.ownerDocument;return a.defaultView||a.parentWindow};
this.getDocument=function(){return d.ownerDocument};this.addEventListener=this.element.addEventListener.bind(this.element);this.removeEventListener=this.element.removeEventListener.bind(this.element)},F=function(){var a=[];return{addDomElement:function(d){a.push(d)},clearDomElements:function(){a.forEach(h.remove);a=[]}}}(),H=function(){return{get:function(a){if(n.isFalsy(a))return Promise.reject(D.WRAPPER_URI_TIMEOUT);var d=new XMLHttpRequest;d.open("GET",a);d.send(null);return new Promise(function(a,
c){d.addEventListener("load",function(){/^5/.test(d.status)&&c(D.WRAPPER_URI_TIMEOUT);a(d.response)});d.addEventListener("error",function(a){c(D.WRAPPER_URI_TIMEOUT)})})},getImg:function(a){var d=new Image;d.src=a;return new Promise(function(a,c){d.addEventListener("load",a);d.addEventListener("error",c)})}}}(),z=function(){var a=function(a){return h.create("a",{href:a}).search.replace(/^\?/,"").split("&").reduce(function(a,b){var c=a.slice(-1).join();return/originalVast/.test(c)?(c=c.concat("&",
b),a.slice(0,-1).concat(c)):a.concat(b)},[]).filter(n.isTruthy).reduce(function(a,b){var c=b.split("=");a[c[0]]=c.slice(1).join("=");return a},{})},d=function(a){try{return decodeURIComponent(a)}catch(b){return console.error(b),a}},b=function(b,f){var e=a(b)[f];return e?d(e):""};return{isValid:function(a){if(!n.isDefined(a)||!n.isString(a))return!1;if(0<=a.indexOf("iasOverrideHostnameValidation"))return!0;var b=h.create("a",{href:a});return b.hostname&&b.hostname!==s.getWindow().location.hostname&&
0<=a.indexOf(b.hostname)},getQueryParams:a,getQueryParamByName:b,getOriginalVast:function(a){return b(a,"originalVast")},toRelativeProtocol:function(a){return n.isString(a)&&d(a.replace(/^https?:\/\//,"//"))},parseIASVidOpts:function(a){return{config:[].concat(b(a,"IAS_VID_OPTS")||"").map(d).join().split("|").filter(n.isTruthy).reduce(function(a,b){a[b]=!0;return a},{})}}}}(),J=function(a,d){a=a||'<?xml version="1.0" encoding="utf-8"?><xml></xml>';d=d||{};var b=h.parseXML(a);this.normalize=function(b,
f){var e=a.replace(RegExp("(</?)"+b,"gi"),"$1"+f);return new J(e,d)};this.select=function(a,f){var e=h.get(a,b);d[f]=e;return this};this.create=function(a,f,e){a=h.create(a,e,b);d[f]=[a];return this};this.createCDATA=function(a,f){d[f]=[b.createCDATASection(a)];return this};this.concatenateWithVAST=function(){var a=h.parseXML('<?xml version="1.0" encoding="utf-8"?>\n<VAST version="2.0">\n<Ad id="">\n<InLine>\n<AdSystem version="2.0"/>\n<AdTitle><![CDATA[]]\x3e</AdTitle>\n<Description><![CDATA[]]\x3e</Description>\n<Impression></Impression>\n<Creatives>\n<Creative sequence="1" id="">\n<Linear>\n<Duration>\n00:00:15\n</Duration>\n<TrackingEvents></TrackingEvents>\n<VideoClicks>\n<ClickThrough></ClickThrough>\n</VideoClicks>\n<MediaFiles></MediaFiles>\n</Linear>\n</Creative>\n</Creatives>\n</InLine>\n</Ad>\n</VAST>');
Object.keys(d).forEach(function(b){d[b].forEach(function(d){h.getOne(b,a).appendChild(d)})});return a}},n=function(){var a=function(a){return a.name||(a.toString().trim().match(/^function\s*([^\s(]+)/)||[]).slice(-1).join()},d=function(b){return a(b.constructor)||(b.constructor.toString().match(/\s\w+/)||[]).join().trim()};return{noop:function(){},fname:a,cname:d,isDOMElement:function(a){return!!a.nodeName},isOfDOMType:function(a,c){return!!a.nodeName&&a.nodeName.toLowerCase()===c.toLowerCase()},
isType:function(a,c){return d(a)===c},isString:function(a){return"string"===typeof a},isFunction:function(a){return"function"===typeof a},isNonNullObj:function(a){return null!==a&&"object"===typeof a},isUndefined:function(a){return"undefined"===typeof a},isDefined:function(a){return"undefined"!==typeof a},isTruthy:function(a){return Boolean(a)},isFalsy:function(a){return!Boolean(a)},toArray:function(a){return Array.prototype.slice.call(a)},isEmpty:function(a){return Array.isArray(a)&&0===a.length},
isEmptyObj:function(a){return 0===Object.keys(a).length&&a.constructor===Object},mergeObjects:function(){return n.toArray(arguments).reduce(function(a,c){return Object.keys(c).reduce(function(a,b){var d=c[b];a[b]?Array.isArray(a[b])?a[b]=a[b].concat(d):a[b]=[a[b]].concat(d):a[b]=d;return a},a)},{})},clone:function(a){return Object.keys(a).reduce(function(c,d){var e;e=a[d]instanceof Array?a[d].slice():a[d]instanceof Function?a[d]:a[d]instanceof Object?n.clone(a[d]):a[d];c[d]=e;return c},{})},del:function(a,
c){return Object.keys(a).reduce(function(d,e){e!==c&&(d[e]=a[e]);return d},{})},throttle:function(a,c,d){var e,k,m;return function(){var p=d||this;k=(new Date).getTime();!e||k-e>=c?(e=k,m=a.apply(p,arguments)):m=function(){};return m}},fromJSON:function(a){var c;try{JSON.parse(a)}catch(d){c={}}finally{return c}}}}(),D={XML_PARSE_ERROR:{code:100,message:"XML parsing error."},VAST_SCHEMA_ERROR:{code:101,message:"VAST schema validation error."},VAST_VERSION_RESPONSE_ERROR:{code:102,message:"VAST version of response not supported."},
VAST_TRAFFICKING_ERROR:{code:200,message:"Trafficking error. Video player received an Ad type that it was not expecting and/or cannot display."},EXPECTING_LINEARARITY_ERROR:{code:201,message:"Video player expecting different linearity."},INCORRECT_DURATION_ERROR:{code:202,message:"Video player expecting different duration."},INCORRECT_SIZE_ERROR:{code:203,message:"Video player expecting different size."},GENERAL_WRAPPER_ERROR:{code:300,message:"General Wrapper error."},WRAPPER_URI_TIMEOUT:{code:301,
message:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element. (URI was either unavailable or reached a timeout as defined by the video player.)"},VAST_WRAPPER_LIMIT_EXCEEDED:{code:302,message:"Wrapper limit reached, as defined by the video player. Too many Wrapper responses have been received with no InLine response. "},NO_ADS:{code:303,message:"No Ads VAST response after one or more Wrappers."},LINEAR_AD_ERROR:{code:400,message:"General Linear error. Video player is unable to display the Linear Ad."},
NO_AD_AT_URL:{code:401,message:"File not found. Unable to find Linear/MediaFile from URI."},MEDIAFILE_TIMEOUT:{code:402,message:"Timeout of MediaFile URI."},NO_ACCEPTABLE_MEDIAFILE:{code:403,message:"Couldn\u2019t find MediaFile that is supported by this video player, based on the attributes of the MediaFile element."},MEDIAFILE_NOT_DISPLAYABLE:{code:405,message:"Problem displaying MediaFile. Video player found a MediaFile with supported type but couldn\u2019t display it. MediaFile may include: unsupported codecs, different MIME type than MediaFile@type, unsupported delivery method, etc."},
NON_LINEAR_ADS_ERROR:{code:500,message:"General NonLinearAds error."},CREATIVE_DIMENSION_MISMATCH:{code:501,message:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area (i.e. creative dimension too large)."},NON_LINEAR_FETCH_ERROR:{code:502,message:"Unable to fetch NonLinearAds/NonLinear resource."},MISSING_SUPPORTED_NON_LINEAR_RESOURCE:{code:503,message:"Couldn\u2019t find NonLinear resource with supported type."},COMPANION_ADS_ERROR:{code:600,message:"General CompanionAds error."},
CREATIVE_COMPANION_DIMESNION_MISMATCH:{code:601,message:"Unable to display Companion because creative dimensions do not fit within Companion display area (i.e., no available space)."},DISPLAY_COMPANION_ERROR:{code:602,message:"Unable to display Required Companion."},COMPANION_FETCH_ERROR:{code:603,message:"Unable to fetch CompanionAds/Companion resource."},NO_SUPPORTED_COMPANION:{code:604,message:"Couldn\u2019t find Companion resource with supported type."},UNDEFINED_ERROR:{code:900,message:"Undefined Error."},
GENERAL_VPAID_ERROR:{code:901,message:"General VPAID error."}},Z=function(a,d,b,c,f,e){G.initializerErrors.apply(G.initializerErrors,arguments);var k=b||"normal",m=c||-1,p=n.isString(f)?n.fromJSON(f):f||{},u={provideVastURL:function(b){z.getOriginalVast(b);O.getXml(b,a,d,m,p).then(O.provideXml,q.error).then(function(a){var c=z.parseIASVidOpts(b),c=n.mergeObjects(a,c);l.init(a.vastEvents);q.setUrl(c.errorUrl);P.init(c);u.manager.provideAd(c)},q.log)}};u.manager=new Y(a,d,k,m,p,e);return u},Y=function(a,
d,b,c,f,e){var k=new v("iframe",{src:"about:blank",frameBorder:"0","style.border":"none","style.top":"0","style.left":"0",scrolling:"no","style.overflow":"hidden",padding:"0","style.width":h.toPx(a),"style.height":h.toPx(d),allowfullscreen:"true"});k.element.style.setProperty("position","absolute","important");k.width=a;k.height=d;k.viewMode=b;k.desiredBitrate=c;k.creativeData=f;k.environmentVars=e;l.attachTarget(k);E.attachManager(k);k.provideAd=function(a){a.mediaFile.isVPAID()?$(k,a):aa(k,a)};
k.loadSource=function(){l.dispatchEvent("EventBridgeLoadSource")};k.appendTo(e.slot);return k},ba=function(a,d,b){var c=new v("svg",{width:a,height:d,viewBox:"0 0 100 100"});a=new v("circle",{cx:"50%",cy:"50%",r:"25%",fill:"none",stroke:"white","stroke-width":"2px"});d=new v("polygon",{points:"45,40,45,60,60,50",fill:"white"});var f=!1;b.addEventListener("canplay",function(){f=!0});c.addEventListener("click",function(){f&&(b.play(),c.remove())},!1);c.appendChild(a);c.appendChild(d);return c},q=function(){var a;
return{run:function(a,b){var c;try{c=a()}catch(f){q.log(f),q.log(b),q.sendError(b)}finally{return c}},setUrl:function(d){a=d},sendError:function(d){a&&(d=a.replace("[ERRORCODE]",D[d].code),H.get(d))},log:function(){},error:function(a){a.code===D.WRAPPER_URI_TIMEOUT.code&&(g.log("Missing media creative","error","q"),g.log("Missing media creative. Please specify one of the three: 1. `mediaUrl` and `clickUrl`; 2. `originalVast`; 3. Ad Parameters"));throw a;}}}(),Q=function(a,d,b,c,f){var e;b&&n.isOfDOMType(b,
"video")?e=new v(b):n.isNonNullObj(b)&&(e=new X(b,c));e.attr("currentSrc")||e.attr("src");e.attr("currentTime");e._startAd=function(){e.attr("currentTime");e.play()};e.setSource=function(a){a&&(e.updateProp("src",a),e.element.load())};e.play=function(){e.element.play()};e.pause=function(){e.element.pause()};e.seekTo=function(a){e.element.currentTime=a};e.width=a;e.height=d;e.element.addEventListener("durationchange",function(){e.adDuration=Math.floor(e.element.duration)||-2;K.init(e.element,f)},!0);
return e},ea=function(a,d){if(!d.config.hidecountdown){var b=ca(d),c=da(d),f=new v("div",n.mergeObjects({"style.backgroundColor":"rgba(0,0,0,0.7)","style.right":"0","style.width":"100%","style.position":"absolute","style.color":"white","style.fontSize":"12px","style.fontWeight":"200","style.fontFamily":"Helvetica, Arial, sans-serif",id:"ias-countdown-timer"},c)),e=function(){var c;isNaN(a.video.remainingSeconds)||(c=b.replace(/XX/,a.video.remainingSeconds),f.element.textContent=c)};l.addEventListener("countdownupdate",
e);l.addEventListener("EventBridgeEnded",function m(){f.remove();l.removeEventListener("countdownupdate",e);l.removeEventListener("EventBridgeEnded",m)});e();l.addEventListener("AdLoaded",function(){f.appendTo(a)});a.appendChild(f);return f}},fa=function(a,d){var b=d.mediaFile,c=b.getDuration();if(b=b.getSkipoffset()){var f=L(b,c),e=!1,k=new v("div",{"style.backgroundColor":"rgba(0,0,0,0.7)","style.border":"1px solid white","style.cursor":"pointer","style.color":"white","style.text-align":"center",
"style.font-size":"12px","style.width":"135px","style.height":"35px","style.line-height":"35px","style.right":"20px","style.bottom":"20px","style.fontWeight":"200","style.fontFamily":"Helvetica, Arial, sans-serif","style.position":"absolute",id:"ias-skip-button",name:"skip-ad"}),m=function(){var b=isNaN(f-a.video.currentSeconds)?f:f-a.video.currentSeconds,b=(e=0>=b)?"Skip Ad":"You can skip in XXs".replace(/XX/,b);k.element.textContent=b};l.addEventListener("countdownupdate",m);k.addEventListener("click",
function(){e&&l.dispatchEvent("skipped")});l.addEventListener("EventBridgeEnded",function u(){k.remove();l.removeEventListener("countdownupdate",m);l.removeEventListener("EventBridgeEnded",u)});m();a.appendChild(k);return k}},ca=function(a){var d={engtimer:"Advertisement. Your video will begin in XX seconds.",gertimer:"Nur ein Werbespot. Das Video beginnt in XX Sekunden.",frtimer:"Publicit\u00e9: Votre vid\u00e9o commence dans XX secondes."};return Object.keys(d).reduce(function(b,c){return a.config[c]?
d[c]:b},d.engtimer)},da=function(a){var d={topleftcount:{"style.top":"0","style.textAlign":"left"},topmiddlecount:{"style.top":"0","style.textAlign":"center"},toprightcount:{"style.top":"0","style.textAlign":"right"},bottomleftcount:{"style.bottom":"10px","style.textAlign":"left"},bottommiddlecount:{"style.bottom":"10px","style.textAlign":"center"},bottomrightcount:{"style.bottom":"10px","style.textAlign":"right"}};return Object.keys(d).reduce(function(b,c){return a.config[c]?d[c]:b},d.bottommiddlecount)},
L=function(a,d){var b;(b=String(a).match(/([0-9]+)%/))?(b=+b[1],b=b/100*d):b=Date.parse("1970-01-01T"+(a||"00:00:00.0")+"Z")/1E3;return b},E=function(a){var d={vastEventsReset:!1,vpaidEventsReset:!1,bridgeEventsReset:!1,fullscreenEventsReset:!1,stopAd:function(a){d[a]=!0;d.adManager.video.vpaidEvents||(d.vpaidEventsReset=!0);d.vastEventsReset&&d.vpaidEventsReset&&d.bridgeEventsReset&&d.fullscreenEventsReset&&(a=h.createEvent("AdStopped"),q.log(a),d.adManager.dispatchEvent(a))},attachManager:function(a){d.adManager=
a}};return d}(),l=function(){var a={},d,b,c,f=function(a){return a.reduce(function(a,b){a[b]=h.createEvent(b);return a},{})};a.dispatchEvent=function(b){d.dispatchEvent(a.events[b])};a.removeEventListener=function(a,b){d.removeEventListener(a,b)};a.addEventListener=function(a,b){d.addEventListener(a,b)};var e={},k=n.throttle(function(a,b,c,d){d={url:d.video.clickThroughUrl};n.isString(a)?d.url=a:n.isNonNullObj(a)&&!n.isUndefined(a.data)&&n.isNonNullObj(a.data)&&(d=a[d]);z.isValid(d.url)?(q.log("AdUnit probably handles adclickthru",
a),s.getWindow().open(d.url)):d.playerHandles=!0;c[b][d]=d;c[b]()},1E3);a.attachAd=function(f){b=f.vastEvents;(c=f.is("video")||f.is("player")?f:f.ad)&&a.list.adEventNames.forEach(function(p){var u="AdStopped"===p?"EventBridgeEnded":p;e[u]=a.dispatchEvent.bind(f,u);(b.hasEvent(p)?b:c).subscribe(function(a){var b=n.isNonNullObj(a)?a:{};Object.keys(b).forEach(function(a){e[u][a]=b[a]});if("AdClickThru"===u)k(a,u,e,d);else if("EventBridgeEnded"===u)setTimeout(e[u],0);else e[u]()},p)})};a.reset=function(){Object.keys(e).forEach(function(a){(b.hasEvent(a)?
b:c).unsubscribe(e[a],a)});e={};a.synchronizer.reset()};a.attachTarget=function(a){d=a};a.init=function(b){a.list=new ga(a,b);a.synchronizer=new ha(a);a.events=f(a.list.eventNames);a.synchronizer.init()};return a}(),ga=function(a,d){var b={startskipper:function(a){},skipped:function(a){},countdownupdate:function(a){},EventBridgeEnded:function(b){a.reset();E.stopAd("bridgeEventsReset");M.reset();E.stopAd("fullscreenEventsReset")},EventBridgeCleanupsFired:function(a){},clickTracking:function(a){e(a)},
EventBridgeAdCreated:function(a){q.log(a)},EventBridgeLoadSource:function(a){q.log(a)}},c={AdClickThru:function(a){e(h.createEvent("clickthrough"));q.log(a)},AdDurationChange:function(a){q.log(a)},AdError:function(a){q.log(a);q.sendError("GENERAL_VPAID_ERROR")},AdExpandedChange:function(a){q.log(a)},AdImpression:function(a){e(h.createEvent("impression"));q.log(a)},AdInteraction:function(a){q.log(a)},AdLinearChange:function(a){q.log(a)},AdLoaded:function(a){q.log(a)},AdLog:function(a){q.log(a)},AdPaused:function(a){e(h.createEvent("pause"));
q.log(a)},AdPlaying:function(a){e(h.createEvent("resume"));q.log(a)},AdSizeChange:function(a){q.log(a)},AdSkippableStateChange:function(a){q.log(a)},AdSkipped:function(a){e(h.createEvent("skip"));q.log(a)},AdStarted:function(a){e(h.createEvent("creativeview"));q.log(a)},AdStopped:function(a){q.log(a)},AdUserAcceptInvitation:function(a){e(h.createEvent("acceptinvitation"));q.log(a)},AdUserClose:function(a){e(h.createEvent("close"));q.log(a)},AdUserMinimize:function(a){e(h.createEvent("collapse"));
q.log(a)},AdVideoComplete:function(a){e(h.createEvent("complete"));q.log(a)},AdVideoFirstQuartile:function(a){e(h.createEvent("firstquartile"));q.log(a)},AdVideoMidpoint:function(a){e(h.createEvent("midpoint"));q.log(a)},AdVideoStart:function(a){e(h.createEvent("start"));q.log(a)},AdVideoThirdQuartile:function(a){e(h.createEvent("thirdquartile"));q.log(a)},AdVolumeChange:function(a){var b=0<getVPAIDAd().getAdVolume()?"unmute":"mute";e(h.createEvent(b));q.log(a)}},f={acceptinvitation:function(a){},
acceptinvitationlinear:function(a){e(a)},clickthrough:function(b){a.dispatchEvent("clickTracking")},close:function(a){},closelinear:function(a){e(a)},collapse:function(a){},complete:function(a){},creativeview:function(b){a.dispatchEvent("startskipper")},exitfullscreen:function(a){e(a)},expand:function(a){e(a)},firstquartile:function(a){},fullscreen:function(a){e(a)},impression:function(a){},midpoint:function(a){},mute:function(a){},pause:function(a){},progress:function(a){e(a)},resume:function(a){},
rewind:function(a){e(a)},skip:function(a){},start:function(a){},thirdquartile:function(a){},unmute:function(a){}},e=function(a){q.log(a);var b=a.type.toLowerCase();("progress"===b?K.getQueuedUrls():d[b]||[]).filter(z.isValid).forEach(function(b){var c=ia.run(b);q.log(a.type,c);H.getImg(b).then(function(a){q.log("IMG: sent",b,a)},function(a){q.log("IMG: failed",b,a)})})},k=n.mergeObjects(b,c,f),f=Object.keys(f),c=Object.keys(c),m=[].concat(f).concat(c);return{eventNames:[].concat(f).concat(c).concat(Object.keys(b)),
vastEventNames:f,vpaidEventNames:c,adEventNames:m,allListeners:k}},ha=function(a){var d=a.list.allListeners;return{init:function(){Object.keys(d).forEach(function(b){a.addEventListener(b,d[b])})},reset:function(){Object.keys(d).forEach(function(b){a.removeEventListener(b,d[b])})}}},M=function(){var a={video:void 0},d,b,c=[];a.reset=function(){a.unsubscribe();a.video=void 0;c=[]};var f=["fullscreenchange","mozfullscreenchange","MSFullscreenChange","fullscreenChange","webkitfullscreenchange"],e=["fullscreenElement",
"webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"],k=function(a){return e.some(function(b){return a&&a[b]})};a.detect=function(e){a.video=e;var p=e.getDocument();f.forEach(function(a){var e=function(a){var c=k(p);c&&d?d(a):!c&&b&&b(a)};p.addEventListener(a,e);c.push(e)})};a.subscribe=function(a,c){"fullscreen"===a?d=c:"exitFullscreen"===a&&(b=c)};a.unsubscribe=function(){var b;a.video&&(b=a.video.getDocument(),f.forEach(function(a){c.forEach(function(c){b.removeEventListener(a,
c)})}))};return a}(),K=function(){var a={},d=[];return{init:function(b,c){var d=b&&b.duration;if(d&&-1!==d)return Object.keys(c).forEach(function(b){var k=Math.floor(L(b,d));a[k]={urlHasBeenSentToQueue:!1,url:c[b]}}),a},shouldSendUrls:function(b){var c=!1;Object.keys(a).forEach(function(f){var e=a[f];f=b>=f;!e.urlHasBeenSentToQueue&&f&&(d.push(e.url),c=e.urlHasBeenSentToQueue=!0)});return c},getQueuedUrls:function(){var a=d;d=[];return a}}}(),R=function(a){this.video=a;var d=0,b=0,c=!1,f=a.element.muted,
e={seeking:function(){d=a.element.currentTime},playing:function(){setTimeout(function(){c=!1},0)},pause:function(){c=!0},timeupdate:function(){b=a.element.currentTime/a.element.duration||0},volumechange:function(){setTimeout(function(){f=a.element.muted},0)}},k=function(b){Object.keys(e).forEach(function(c){a.element[b](c,e[c])})};k("addEventListener");l.addEventListener("EventBridgeEnded",function B(){k("removeEventListener");E.stopAd("vastEventsReset");l.removeEventListener("EventBridgeEnded",B)});
var m=function(){return!0},p={acceptinvitation:{name:"click",condition:function(){}},acceptinvitationlinear:{name:"click",condition:function(){}},clickthrough:{name:"click",condition:m},close:{name:"click",condition:function(){}},closelinear:{name:"click",condition:function(){}},collapse:{name:"click",condition:function(){}},complete:{name:"ended",condition:m,isUnique:!0,fired:!1},creativeview:{name:"playing",condition:m,isUnique:!0,fired:!1},exitfullscreen:{isFullScreenEvent:!0,condition:m},expand:{name:"click",
condition:function(){}},firstquartile:{name:"timeupdate",condition:function(){return 0.25<=b},isUnique:!0,fired:!1},fullscreen:{isFullScreenEvent:!0,condition:m},impression:{name:"playing",condition:m,isUnique:!0,fired:!1},midpoint:{name:"timeupdate",condition:function(){return 0.5<=b},isUnique:!0,fired:!1},mute:{name:"volumechange",condition:function(){return f}},pause:{name:"pause",condition:m},progress:{name:"timeupdate",condition:function(){return K.shouldSendUrls(a.element.currentTime)},isUnique:!1,
fired:!1},resume:{name:"playing",condition:function(){return c}},rewind:{name:"seeked",condition:function(){return 0>a.element.currentTime-d}},start:{name:"playing",condition:m,isUnique:!0,fired:!1},thirdquartile:{name:"timeupdate",condition:function(){return 0.75<=b},isUnique:!0,fired:!1},unmute:{name:"volumechange",condition:function(){return!f}}},g={},h=function(a){return!!p[a]};this.hasEvent=h;M.detect(a);this.subscribe=function(b,c){if(h(c)){var d=n.clone(p[c]);g[c]=function(){d.isUnique&&d.fired||
!d.condition()||(b(),d.isUnique&&(d.fired=!0))};d.isFullScreenEvent?M.subscribe(c,g[c]):a.addEventListener(p[c].name,g[c])}};this.unsubscribe=function(b,c){g[c]&&(a.removeEventListener(p[c].name,g[c]),g=n.del(g,c))}},ja=function(a){this.video=a;var d=0,b=!1,c={seeking:function(){},playing:function(){setTimeout(function(){b=!1},0)},pause:function(){b=!0},timeupdate:function(){d=a.element.currentTime/a.element.duration||0},volumechange:function(){setTimeout(function(){},0)}},f=function(b){Object.keys(c).forEach(function(d){a.element[b](d,
c[d])})};f("addEventListener");l.addEventListener("EventBridgeEnded",function C(){f("removeEventListener");E.stopAd("vpaidEventsReset");l.removeEventListener("EventBridgeEnded",C)});var e=function(){return!0},k={AdClickThru:{name:"click",condition:e},AdImpression:{name:"playing",condition:e,isUnique:!0,fired:!1},AdLoaded:{name:"canplay",condition:e,isUnique:!0,fired:!1},AdRemainingTimeChange:{name:"timeupdate",condition:e},AdPaused:{name:"pause",condition:e},AdPlaying:{name:"playing",condition:function(){return b}},
AdStarted:{name:"playing",condition:e,isUnique:!0,fired:!1},AdStopped:{name:"ended",condition:e,isUnique:!0,fired:!1},AdVideoComplete:{name:"ended",condition:e,isUnique:!0,fired:!1},AdVideoStart:{name:"playing",condition:e,isUnique:!0,fired:!1},AdVideoFirstQuartile:{name:"timeupdate",condition:function(){return 0.25<=d},isUnique:!0,fired:!1},AdVideoMidpoint:{name:"timeupdate",condition:function(){return 0.5<=d},isUnique:!0,fired:!1},AdVideoThirdQuartile:{name:"timeupdate",condition:function(){return 0.75<=
d},isUnique:!0,fired:!1},AdVolumeChange:{name:"volumechange",condition:e},AdUserClose:{name:"click",condition:function(){}}},m={},p=function(a){return!!k[a]};this.hasEvent=p;this.subscribe=function(b,c){if(p(c)){var d=n.clone(k[c]);m[c]=function(){d.isUnique&&d.fired||!d.condition()||(b(),d.isUnique&&(d.fired=!0))};a.addEventListener(k[c].name,m[c])}};this.unsubscribe=function(b,c){m[c]&&(a.removeEventListener(k[c].name,m[c]),m=n.del(m,c))}},S={"%%VIDEO_DURATION%%":"duration","%%REFERRER_URL_UNESC%%":"referrerUrl",
"%%REFERRER_URL_ESC_ESC%%":"referrerUrlEscEsc","%%CACHEBUSTER%%":"cachebuster","%%CLICK_URL_ESC_ESC%%":"clickThroughUrlEscEsc","%%CLICK_URL_UNESC%%":"clickThroughUrl","%%HEIGHT%%":"height","%%WIDTH%%":"width"},ia=function(){var a=function(a){var b=a;Object.keys(S).forEach(function(a){var d=P.get(S[a])||"";b=b.replace(a,d)});return b};return{run:function(d){return a(d)}}}(),P=function(){var a={duration:"",referrerUrl:"",referrerUrlEscEsc:"",cachebuster:"",clickThroughUrl:"",clickThroughUrlEscEsc:"",
width:"",height:""},d={clickThroughUrl:!0,referrerUrl:!0},b=function(){a.cachebuster=Math.round((new Date).getTime()/1E3)},c=function(c,e){var k=d[c];a[c]=e;k&&(a[c+"EscEsc"]=encodeURIComponent(encodeURIComponent(e)));b()};(function(){var a=s.getWindow().location.href;c("referrerUrl",a)})();return{init:function(d){b();Object.keys(a).forEach(function(a){var b=d[a];b&&c(a,b)})},get:function(b){return a[b]},show:function(){return a}}}(),ka=function(){this.vpaid=new A;this.mp4=new A;this.other=new A;
this.bucket=function(a){a.isInvalid()||(a.isVPAID()?this.vpaid.push(a):a.isMP4()?this.mp4.push(a):this.other.push(a));return this}.bind(this);this.selectOptimum=function(a,d,b){return this.vpaid.length?this.vpaid.selectOptimum.apply(this.vpaid,arguments):this.mp4.length?this.mp4.selectOptimum.apply(this.mp4,arguments):this.other.selectOptimum.apply(this.other,arguments)}.bind(this)},T=function(a){var d=!arguments.length;d||Object.keys(a).forEach(function(b){this[b]=a[b]}.bind(this));this.isEmpty=
function(){return d};this.getWidth=function(){return parseInt(this.width)||0};this.getHeight=function(){return parseInt(this.height)||0};this.getAspectRatio=function(){var a=this.getWidth()/this.getHeight();return!isNaN(a)&&isFinite(a)?a:0};this.getBitrate=function(){return parseInt(this.bitrate)||parseInt(this.maxBitrate)||0};this.getUrl=function(){return this.url};this.isProgressive=function(){return"progressive"===this.delivery};this.isMP4=function(){return"video/mp4"===this.type};this.isVPAID=
function(){return"VPAID"===this.apiFramework&&("application/javascript"===this.type||"application/x-javascript"===this.type)};this.isInvalid=function(){return[/^rtmp/i].some(function(a){return a.test(this.url)}.bind(this))};this.getDuration=function(){return this.duration||0};this.getSkipoffset=function(){return this.skipoffset||0}},A=function(a){arguments.length&&a.forEach(function(a){this.push(a)}.bind(this));var d=function(a,b,c){b=Math.abs(a-b.getAspectRatio());a=Math.abs(a-c.getAspectRatio());
return b>=a?1:-1},b=function(a,b,c){b=Math.abs(a-b.getWidth());a=Math.abs(a-c.getWidth());return b>=a?1:-1},c=function(a,b,c){b=Math.abs(a-b.getBitrate());a=Math.abs(a-c.getBitrate());return b>=a?1:-1};this.selectByBitrate=function(a){a=~a?a:0;var b=this.sort(c.bind(null,a));return a?b[0]:b.slice(-1)[0]};this.widthSort=function(a){this.sort(b.bind(null,a||screen.width));a=this.filter(function(a,b,c){return a.getWidth()===c[0].getWidth()});return new A(a)};this.aspectRatioSort=function(a){this.sort(d.bind(null,
a));a=this.filter(function(a,b,c){return a.getAspectRatio()===c[0].getAspectRatio()});return new A(a)};this.selectOptimum=function(a,b,c){return this.aspectRatioSort(a/b).widthSort(a).selectByBitrate(c)||new T}};A.prototype=[];var U=function(a,d,b,c){var f;return{vastEvents:function(a){return h.get("Tracking, Impression, ClickTracking",a).map(function(a){return{event:(h.getAttribute(a,"event")||h.getName(a)).toLowerCase().split(/-|_/g).join(""),urls:h.getData(a)}}).reduce(function(a,b){return a[b.event]?
a[b.event].push(b.urls):a[b.event]=[b.urls],a},{})}(a),creativeData:{AdParameters:h.getData(h.getOne("AdParameters",a))},mediaFile:function(a){return h.get("MediaFile",a).map(function(a){var b=h.getAttributes(a);b.url=h.getData(a);var c=h.getParentUntil(a,"Linear");a=h.getAttributes(c);c=h.getOne("Duration",c);a.duration=c?h.getText(c):void 0;b=n.mergeObjects(b,a);return new T(b)}).reduce(function(a,b){return a.bucket(b)},new ka).selectOptimum(d,b,c)}(a),companionAds:function(a){return(a=h.get("CompanionAds",
a))&&a.length?h.serializeXMLNode(a[0]):""}(a),errorUrl:h.getData(h.getOne("Error",a)),clickThroughUrl:h.getData(h.getOne("ClickThrough",a)),progressOffsets:function(a){return h.get('Tracking[event="progress"]',a).reduce(function(a,b){var c=h.getAttribute(b,"offset"),d=h.getData(b);c&&(a[c]=d);return a},{})}(a),version:function(a){f||(a=h.getOne("VAST",a))&&(f=a.getAttribute("version"));return f}(a)}},O=function(){var a={},d,b,c,f=function(a,b,c,d){d=q.run(h.parseXML.bind(this,d),"XML_PARSE_ERROR");
c.push(d);d=h.getOne("VASTAdTagURI",d);return n.isTruthy(d)?H.get(h.getData(d)).then(f.bind(this,a,b,c),b):a(c)},e=function(a){return new U(a,d,b,c)},k=function(a,b){Object.keys(b).forEach(function(c){switch(c){case "vastEvents":a[c]=n.mergeObjects(a[c],b[c]);break;case "creativeData":b[c].AdParameters&&(a[c].AdParameters=b[c].AdParameters);break;case "mediaFile":b[c].isEmpty()||(a[c]=b[c]);break;case "progressOffsets":a[c]=n.mergeObjects(a[c],b[c]);break;default:b[c]&&(a[c]=b[c])}});return a};a.getXml=
function(a,e,f,k,h){d=e;b=f;c=k;k=n.isEmptyObj(h)||n.isFalsy(h.AdParameters)?void 0:(new J(h.AdParameters)).normalize("mediafile","MediaFile").select("MediaFile","MediaFiles").concatenateWithVAST();var l=z.getQueryParams(a);n.isEmptyObj(l)||n.isFalsy(l.mediaUrl)?e=void 0:(h=z.toRelativeProtocol(l.mediaUrl),l=z.toRelativeProtocol(l.clickUrl),e=(new J).create("MediaFile","MediaFiles",{delivery:"progressive",bitrate:"600",width:e,height:f,type:"video/mp4"}).createCDATA(h,"MediaFile").createCDATA(l,"ClickThrough").concatenateWithVAST());
e?(g.log("Using `mediaUrl` and `clickUrl`."),a=Promise.resolve(e)):k?(g.log("Using creativeData.AdParameters."),a=Promise.resolve(k)):(g.log("Using originalVast URL."),a=z.getOriginalVast(a),a=H.get(a));return a};a.provideXml=function(a){n.isFalsy(a)&&(g.log("Missing media creative","error","q"),g.log("Missing media creative. Please specify one of the three: 1. `mediaUrl` and `clickUrl`; 2. `originalVast`; 3. Ad Parameters"));var b=[];return(new Promise(function(c,d){return f(c,d,b,a)})).then(function(a){return a.map(e).reduce(k,
new U)},q.log)};return a}(),la=function(a,d,b){var c,f,e;function k(a){c=a.pageX;f=a.pageY;e=(new Date).getTime()}function g(a){Math.abs(c-a.pageX)<=p&&Math.abs(f-a.pageY)<=p&&(new Date).getTime()-e<=n&&I(a);c=f=-1E10;e=0}e=f=c=void 0;var p=10,n=250,r="ontouchstart"in document.documentElement&&0<=navigator.userAgent.indexOf("iPhone"),w,B=!1,I=function(a){a=(a.target||a.srcElement).id;d.isPaused?d.resumeAd():"ias-skip-button"!==a&&(b.config.continueonclick||d.pauseAd(),w!==d&&(d.dispachEvent?d.dispatchEvent(h.createEvent("click")):
(l.dispatchEvent("AdClickThru"),l.dispatchEvent("clickthrough"),q.log("Can't dispatchEvent to IMA, need to create an intermediate dispatch target"),s.getWindow().open(d.clickThroughUrl))))};c=f=-1E10;e=0;var t=function(){v();var b,c=(b=a.getWindow())&&b.innerWidth&&b.innerHeight,e;try{e=b===top}catch(f){}w=c&&!e?b:d;r?(w.addEventListener("touchstart",k),w.addEventListener("touchend",g)):w.addEventListener("click",I);B=!0},v=function(){w&&B&&(r?(w.removeEventListener("touchstart",k),w.removeEventListener("touchend",
g)):w.removeEventListener("click",I),B=!1)};a.element.addEventListener("load",function(){a.element.contentWindow.addEventListener("resize",t);a.element.contentDocument.addEventListener("onreadystatechange",function(){"complete"===a.element.contentDocument.readyState&&t()})});return{subscribe:t,unsubscribe:v}},ma=function(a,d){a.video=new Q(a.width,a.height,a.environmentVars.videoSlot,a.environmentVars.slot,d.progressOffsets);var b,c=a.video,f=d.mediaFile,e=f.getDuration(),f=f.getSkipoffset();c.countdown=
new ea(a,d);c.skipButton=new fa(a,d);c.clickThroughUrl=d.clickThroughUrl;c.currentSeconds=0;c.remainingSeconds=Math.floor(c.element.duration);c.skipoffsetSeconds=Math.floor(L(f,e));c.isPaused=!1;c.isStarted=!1;c.isStopped=!1;c.vastVersion=d.version;c.adWidth=c.width;c.adHeight=c.height;c.adExpanded=!1;c.adLinear=!0;c.adSkippableState=!1;c.adVolume=c.element.muted?0:c.element.volume;c.adDuration=Math.floor(c.element.duration)||-2;c.adCompanions=d.companionAds;c.adIcons=null;var g=la(a,c,d);g.subscribe();
var m={playing:function(){setTimeout(function(){c.isPaused=!1},0)},pause:function(){c.isPaused=!0},timeupdate:function(){c.currentSeconds=Math.floor(c.element.currentTime);c.remainingSeconds=Math.floor(c.element.duration)-c.currentSeconds;c.adRemainingTime=c.remainingSeconds;c.adSkippableState=c.currentSeconds>=c.skipoffsetSeconds;l.dispatchEvent("countdownupdate")},volumechange:function(){c.adVolume=c.element.volume}};Object.keys(m).forEach(function(a){c.addEventListener(a,m[a])});l.addEventListener("EventBridgeLoadSource",
function C(){c.vastEvents=new R(c);c.vpaidEvents=new ja(c);l.attachAd(c);c.setSource(d.mediaFile.url);l.removeEventListener("EventBridgeLoadSource",C)});l.addEventListener("EventBridgeEnded",function w(){Object.keys(m).forEach(function(a){c.removeEventListener(a,m[a])});g.unsubscribe();l.removeEventListener("EventBridgeEnded",w)});l.addEventListener("AdLoaded",function(){c.isPaused=c.element.paused});c.subscribe=function(a,b,d){c.vpaidEvents.subscribe(d?a.bind(d):a,b)};c.unsubscribe=function(a,b){c.vpaidEvents.unsubscribe(a,
b)};var p=function(a){a?["mozRequestFullScreen","webkitRequestFullScreen","msRequestFullScreen","requestFullscreen"].filter(function(a){return c.element[a]}).slice(0,1).forEach(function(a){c.element[a]()}):["webkitExitFullscreen","mozCancelFullScreen","exitFullscreen"].filter(function(a){return document[a]}).slice(0,1).forEach(function(a){document[a]()})};c._resizeTo=function(b,d,e){"fullscreen"===b||"fullscreen"===e?(b=s.getWindow().innerWidth,d=s.getWindow().innerHeight,p(!0),c.updateProps({"style.width":"100%",
"style.height":"100%"}),a.updateProps({"style.width":"100%","style.height":"100%"})):(p(!1),c.updateProps({"style.width":h.toPx(b),"style.height":h.toPx(d)}),a.updateProps({"style.width":h.toPx(b),"style.height":h.toPx(d)}));c.adWidth=b;c.adHeight=d};c.resizeAd=function(a,b,d){c._resizeTo(a,b,d);l.dispatchEvent("AdSizeChange")};c.startAd=function(){c.isStarted||c.isStopped||(c.isStarted=!0,c._startAd())};c.stopAd=function(){c.isStarted&&!c.isStopped&&(c.isStopped=!0,c.pause(),l.dispatchEvent("AdStopped"))};
c.pauseAd=function(){!c.isStarted||c.isStopped||c.isPaused||(c.pause(),c.isPaused=!0,d.config.hideplaybutton||(b=new ba(a.width,a.height,c),b.appendTo(a)))};c.resumeAd=function(){c.isStarted&&!c.isStopped&&c.isPaused&&(c.play(),c.isPaused=!1,b&&b.remove(),b=null)};c.expandAd=function(){c.adExpanded||(c.adExpanded=!0,p(!0),l.dispatchEvent("AdExpandedChange"))};c.collapseAd=function(){c.adExpanded&&(c.adExpanded=!1,p(!1),l.dispatchEvent("AdExpandedChange"))};c.skipAd=function(){c.adSkippableState&&
(c.pause(),l.dispatchEvent("skip"),l.dispatchEvent("AdSkipped"),l.dispatchEvent("AdStopped"))};c.setAdVolume=function(a){0<=a&&1>=a&&(c.element.volume=a,c.adVolume=a,"onvolumechange"in c.element||l.dispatchEvent("AdVolumeChange"))};return c},na=function(a,d){var b={},c=!1;b.handshakeVersion=function(a){c="2.0"===a;return"2.0"};b.onLoad=function(a){b.resolve=a;return b};b.initAd=function(f,e,g,h,p,n){c&&(b._vast=new ma(a,d),b.vastEvents=b._vast.vastEvents,b._refresh(),b.resolve(b._vast),b._vast._resizeTo(f,
e,g),l.addEventListener("skipped",function w(){b._vast.skipAd();l.removeEventListener("skipped",w)}))};b.subscribe=function(a,c,d){b._vast.subscribe(a,c,d)};b.unsubscribe=function(a,c){b._vast.unsubscribe(a,c)};b.resizeAd=function(a,c,d){b._vast.resizeAd(a,c,d)};b.startAd=function(){b._vast.startAd()};b.stopAd=function(){b._vast.stopAd()};b.pauseAd=function(){b._vast.pauseAd()};b.resumeAd=function(){b._vast.resumeAd()};b.expandAd=function(){b._vast.expandAd()};b.collapseAd=function(){b._vast.collapseAd()};
b.skipAd=function(){b._vast.skipAd()};b.setAdVolume=function(a){b._vast.setAdVolume(a)};b.getAdLinear=function(){return b._vast.adLinear};b.getAdWidth=function(){return b._vast.adWidth};b.getAdHeight=function(){return b._vast.adHeight};b.getAdExpanded=function(){return b._vast.adExpanded};b.getAdSkippableState=function(){return b._vast.adSkippableState};b.getAdRemainingTime=function(){return b._vast.adRemainingTime};b.getAdDuration=function(){return b._vast.adDuration};b.getAdVolume=function(){return b._vast.adVolume};
b.getAdCompanions=function(){return b._vast.adCompanions};b.getAdIcons=function(){return b._vast.adIcons};b._refresh=function(){b.adLinear=b._vast.adLinear;b.adWidth=b._vast.adWidth;b.adHeight=b._vast.adHeight;b.adExpanded=b._vast.adExpanded;b.adSkippableState=b._vast.adSkippableState;b.adRemainingTime=b._vast.adRemainingTime;b.adDuration=b._vast.adDuration;b.adVolume=b._vast.adVolume;b.adCompanions=b._vast.adCompanions;b.adIcons=b._vast.adIcons};return b},aa=function(a,d){a.vast=new na(a,d);a.vast.onLoad(function(b){a.ad=
a.vast;l.dispatchEvent("EventBridgeAdCreated")});l.addEventListener("AdLoaded",function c(){l.removeEventListener("AdLoaded",c)});a.vast.handshakeVersion("2.0");a.vast.initAd(a.width,a.height,a.viewMode,a.desiredBitrate,a.creativeData,a.environmentVars)},oa=function(a){var d=new v("script",{src:a.url,type:"text/javascript"});d.onLoad=function(a){d.resolve=a;return d};d.addEventListener("load",function(){d.ad=d.getWindow().getVPAIDAd();d.resolve(d);d.ad.handshakeVersion("2.0");d.ad.initAd(a.width,
a.height,a.viewMode,a.desiredBitrate,a.creativeData,a.environmentVars)});return d},$=function(a,d){a.video=new Q(a.width,a.height,a.environmentVars.videoSlot,a.environmentVars.slot,d.progressOffsets);a.vpaid=new oa({url:d.mediaFile.url,width:a.width,height:a.height,viewMode:a.viewMode,desiredBitrate:d.mediaFile.bitrate||a.desiredBitrate,creativeData:d.creativeData||a.creativeData,environmentVars:a.environmentVars});a.vpaid.onLoad(function(b){b.vastEvents=new R(a.video);l.attachAd(a.vpaid);a.ad=a.vpaid.ad;
l.dispatchEvent("EventBridgeAdCreated")});l.addEventListener("AdLoaded",function c(){l.removeEventListener("AdLoaded",c)});l.addEventListener("skipped",function f(){a.ad.skipAd();l.removeEventListener("skipped",f)});a.appendChild(a.vpaid)},t={pendingEvents:[],vastHandlerCachedAdSlot:void 0,postToJsvid:function(a){t.vastHandlerCachedAdSlot||(t.vastHandlerCachedAdSlot=window.getVPAIDAd(!0).adSlot);var d=t.vastHandlerCachedAdSlot.ownerDocument,d=d.defaultView||d.parentWindow;d.location.origin||(d.location.origin=
d.location.protocol+"//"+d.location.hostname+(d.location.port?":"+d.location.port:""));try{var b=d.location.origin;if("null"===b||"undefined"===b)b=!1;d.postMessage(JSON.stringify(a),b||"*");g.log('Posted to IAS script, event "'+a.messageType+'", params: '+JSON.stringify(a.eventData))}catch(c){}},sendVideoMessage:function(a,d){var b={messageType:a,id:g.getVideoId(),time:g.now(),eventData:d};t.handshakeComplete?t.postToJsvid(b):t.pendingEvents.push(b)},sendPerfSample:function(a){t.sendVideoMessage("PerfCheckpoint",
{type:"jswrapper",code:a,timestamp:g.now()})},issueVPAIDEvent:function(a,d,b,c){if(a instanceof r){var f=s.getWindow(),e=this.adTag;if("AdStarted"===a.eventName){if(f.issuedAdStart&&f.issuedAdStart[e])return;f.issuedAdStart||(f.issuedAdStart={});f.issuedAdStart[e]=!0}if("AdImpression"===a.eventName){if(f.issuedAdImpression&&f.issuedAdImpression[e])return;f.issuedAdImpression||(f.issuedAdImpression={});f.issuedAdImpression[e]=!0}(this.dispatchEvent_?this.dispatchEvent_.bind(this):V.dispatchEvent_.bind(this))(a.eventName);
c||(b=b||a.eventName,t.sendVideoMessage(b,d||{}))}else g.log("This function expects an object from the vpaidEvents enumeration.","error","j")},triggerAdRemainingTimeChange_:function(){var a=x.getAdRemainingTime.call(this),d=this.application_;a||(a=x.getAdDuration.call(this));t.issueVPAIDEvent(this.vpaidEvents.AD_DURATION_CHANGE,{adRemainingTime:a},"adRemainingTimeChange",d.lastRemainingTime===a);d.lastRemainingTime=a},exposeHandshake:function(){var a=g.getVideoId();this.adContainer["IASid"+a]=function(d){g.log("IAS function called with "+
d+". Expected : "+a+".");d==a&&(t.handshakeComplete=!0,t.flushPendingEvents(),t.sendPerfSample(60));return t.handshakeComplete?"jvw":null}},flushPendingEvents:function(){0<t.pendingEvents.length&&(t.pendingEvents.forEach(function(a){t.postToJsvid(a)}),t.pendingEvents.length=0)}},V={initialUserAction:function(){g.log("initialUserAction called");var a=this,d,b=function(){clearTimeout(d);a.adIsCreated=!0;a.loadAdsManager_(a.adDisplayContainer_.manager);a.sendPerfSample(120);a.initialized=!0;g.log("adsManager initialized.");
a.sendVideoMessage("initAd",{width:a.width_,height:a.height_,viewMode:"fullscreen"===a.viewMode_?"fullscreen":"normal",desiredBitrate:a.desiredBitrate_});a.sendPerfSample(110);a.adDisplayContainer_.manager.loadSource();a.companionAds=a.adDisplayContainer_.manager.ad.adCompanions};this.initialCalled||(this.initialCalled=!0,a.adIsCreated=!1,a.sendPerfSample(100),a.adDisplayContainer_=new Z(a.width_,a.height_,a.viewMode_,a.desiredBitrate_,a.creativeData_,a.environmentVars_),a.adDisplayContainer_.manager.addEventListener("EventBridgeAdCreated",
b.bind(a)),d=setTimeout(function(){g.log("cannot init adsManager.","error","G");a.issueVPAIDEvent(a.vpaidEvents.AD_ERROR,{})},5E3),a.wrappedUrl=g.getFullUrl(),a.adTag=g.getAdTagUrl(),a.adDisplayContainer_.provideVastURL(a.wrappedUrl))},requestAds:function(){g.log("requestAds called");this.adsRequested||(this.adsRequested=!0,this.application_.adsDone_||(this.application_.onClick_(),g.log("requesting ads from "+this.application_.adTagUrl_)))},getVolume:function(){return this.adsManager_.ad.getAdVolume()},
loadAdsManager_:function(a){g.log("Ads manager loaded.");this.sendPerfSample(130);this.adsManager_=a;F.addDomElement(a.element);this.processAdsManager_(this.adsManager_)},processAdsManager_:function(a){g.log("processing adsManager...");var d="AdClickThru AdDurationChange AdError AdExpandedChange AdImpression AdInteraction AdLinearChange AdLoaded AdLog AdPaused AdPlaying AdSizeChange AdSkippableStateChange AdSkipped AdStarted AdStopped AdUserAcceptInvitation AdUserClose AdUserMinimize AdVideoComplete AdVideoFirstQuartile AdVideoMidpoint AdVideoStart AdVideoThirdQuartile AdVolumeChange acceptinvitation acceptinvitationlinear clickthrough close closelinear collapse complete creativeview exitfullscreen expand firstquartile fullscreen impression midpoint mute pause progress resume rewind skip start thirdquartile unmute".split(" "),
b;for(b in d)a.addEventListener(d[b],this.onAdEvent_.bind(this))},onContentPauseRequested_:function(){this.application_.pauseForAd()},onAdEvent_:function(a){g.log("Ad event: "+a.type);var d=this.vpaidEvents,b;switch(a.type){case "AdClickThru":this.issueVPAIDEvent(d.AD_CLICK_THRU,{});this.application_.adClicked();break;case "AdDurationChange":b=!0;break;case "AdError":g.log("Ad error: "+a.toString(),"R");this.sendVideoMessage("adError",{error:a.toString()});break;case "AdImpression":this.sendPerfSample(140);
var c;a={};c=this.videoSlot;if("object"===typeof HTMLElement?c instanceof HTMLElement:c&&"object"===typeof c&&null!==c&&1===c.nodeType&&"string"===typeof c.nodeName)a.vpWidth=this.videoSlot.offsetWidth,a.vpHeight=this.videoSlot.offsetHeight;if(c=this.adsManager_.ad._vast)a.vVer=c.vastVersion;c=g.getAdTagUrl();a.origVastDomain=c&&c.match(/\/\/(.[^/]+)/)[1];a.isVpaid="undefined"!==typeof this.adsManager_.vpaid;this.issueVPAIDEvent(d.AD_IMPRESSION,a);break;case "AdLinearChange":this.issueVPAIDEvent(d.AD_LINEAR_CHANGE,
{});break;case "AdLoaded":this.issueVPAIDEvent(d.AD_LOADED,{});b=!0;this.sendVideoMessage("AdVolumeChange",{volume:this.getVolume()});break;case "AdLog":this.issueVPAIDEvent(d.AD_LOG,{});break;case "AdPaused":this.issueVPAIDEvent(d.AD_PAUSED,{});break;case "AdPlaying":this.issueVPAIDEvent(d.AD_PLAYING,{});break;case "AdSizeChange":this.issueVPAIDEvent(d.AD_SIZE_CHANGE,{});break;case "AdSkipped":this.issueVPAIDEvent(d.AD_SKIPPED,{});break;case "AdSkippableStateChange":this.issueVPAIDEvent(d.AD_SKIPPABLE_STATE_CHANGE,
{});break;case "AdStarted":this.issueVPAIDEvent(this.vpaidEvents.AD_STARTED,{});break;case "AdStopped":this.issueVPAIDEvent(d.AD_STOPPED,{});break;case "AdVideoComplete":this.issueVPAIDEvent(d.AD_VIDEO_COMPLETE,{});break;case "AdVideoFirstQuartile":this.issueVPAIDEvent(d.AD_VIDEO_FIRST_QUARTILE,{});break;case "AdVideoMidpoint":this.issueVPAIDEvent(d.AD_VIDEO_MIDPOINT,{});break;case "AdVideoStart":this.sendPerfSample(150);this.application_.pauseForAd();this.issueVPAIDEvent(d.AD_VIDEO_START,{});break;
case "AdVideoThirdQuartile":this.issueVPAIDEvent(d.AD_VIDEO_THIRD_QUARTILE,{});break;case "AdVolumeChange":this.issueVPAIDEvent(d.AD_VOLUME_CHANGE,{volume:this.getVolume()});break;case "AdUserClose":this.issueVPAIDEvent(d.AD_USER_CLOSE,{})}b&&this.triggerAdRemainingTimeChange_()},dispatchEvent_:function(a){var d,b=s.getWindow();a&&(d=s.getDoc().createEvent("HTMLEvents"),d.initEvent(a,!0,!0),"AdSkipped"===a?(this.adVideoSkippedIssued=!0,b.dispatchEvent(d),this.stopLock()):"AdVideoComplete"===a?(this.adVideoCompleteIssued=
!0,b.dispatchEvent(d),this.stopLock()):"AdStopped"===a?(this.adStoppedIssued=!0,this.stopLock(),setTimeout(function(){b.dispatchEvent(d)},750)):b.dispatchEvent(d))},setContainerDims:function(a,d){this.adContainer.style.height=d+"px";this.adContainer.style.width=a+"px"},subscribe:function(a,d,b){g.log("subscribing to "+d);s.getWindow().addEventListener(d,a.bind(b))},unsubscribe:function(a,d,b){g.log("unsubscribing from "+d);s.getWindow().removeEventListener(d,a.bind(b))}},r=function(a){this.eventName=
a},pa={AD_LOADED:new r("AdLoaded"),AD_STARTED:new r("AdStarted"),AD_STOPPED:new r("AdStopped"),AD_SKIPPED:new r("AdSkipped"),AD_SKIPPABLE_STATE_CHANGE:new r("AdSkippableStateChange"),AD_SIZE_CHANGE:new r("AdSizeChange"),AD_LINEAR_CHANGE:new r("AdLinearChange"),AD_DURATION_CHANGE:new r("AdDurationChange"),AD_EXPANDED_CHANGE:new r("AdExpandedChange"),AD_REMAINING_TIME_CHANGE:new r("AdRemainingTimeChange"),AD_VOLUME_CHANGE:new r("AdVolumeChange"),AD_IMPRESSION:new r("AdImpression"),AD_VIDEO_START:new r("AdVideoStart"),
AD_VIDEO_FIRST_QUARTILE:new r("AdVideoFirstQuartile"),AD_VIDEO_MIDPOINT:new r("AdVideoMidpoint"),AD_VIDEO_THIRD_QUARTILE:new r("AdVideoThirdQuartile"),AD_VIDEO_COMPLETE:new r("AdVideoComplete"),AD_CLICK_THRU:new r("AdClickThru"),AD_INTERACTION:new r("AdInteraction"),AD_USER_ACCEPT_INVITATION:new r("AdUserAcceptInvitation"),AD_USER_MINIMIZE:new r("AdUserMinimize"),AD_USER_CLOSE:new r("AdUserClose"),AD_PAUSED:new r("AdPaused"),AD_PLAYING:new r("AdPlaying"),AD_LOG:new r("AdLog"),AD_ERROR:new r("AdError")},
qa={handshakeVersion:function(){return"2.0"},initAd:function(a,d,b,c,f,e){try{g.log("initAd called");this.videoSlot=e.videoSlot;this.adSlot=e.slot;this.sendPerfSample(70);var h=g.getQueryParamByName("forceHeight"),m=g.getQueryParamByName("forceWidth");"string"===typeof h&&h.length&&(d=h);"string"===typeof m&&m.length&&(a=m);"string"===typeof a&&(a=parseInt(a.replace("px","")));"string"===typeof d&&(d=parseInt(d.replace("px","")));this.width_=a;this.height_=d;this.viewMode_=b;this.desiredBitrate_=
c;this.creativeData_=f;this.environmentVars_=e;this.isRhythmOne="undefined"!==typeof e.rhythmone;var l=e.videoSlot&&e.videoSlot.videoSlotCanAutoPlay,n="true"===g.getQueryParamByName("forceStart");if(l||n)this.environmentVars_.videoSlotCanAutoPlay=!0;var q=this.adSlot.ownerDocument;(q.defaultView||q.parentWindow).ias_ev=function(a){var b={},c;for(c in a)"videoSlot"!==c&&"slot"!==c&&(b[c]=a[c]);return b}(e);var r=this;(function(){var a=s.getDoc().createElement("ias-ad");a.style.top=0;a.style.setProperty("position",
"absolute","important");a.style.left=0;a.style.height="100%";a.style.width="100%";r.adSlot.insertBefore(a,a.nextSibling);r.adContainer=a;r.sendPerfSample(80);F.addDomElement(a)})();(function(){r.adContainer.getVersion=function(){return r.application_.version_}})();(function(){var a=g.getVideoId(),b=g.getIasScript(a);g.log("IAS script path: "+b);r.exposeHandshake();g.loadJsCssFile(b,"js",r.adContainer.ownerDocument);r.sendPerfSample(90);g.log("attaching ias script with id "+a)})();this.initialUserAction();
this.setContainerDims(a,d)}catch(t){N("html5Video_initAd",t)}},getAdSlotDocOrigin:function(){return this.adSlot?this.adSlot.ownerDocument.origin:void 0},resizeAd:function(a,d,b,c){"string"===typeof b&&(b=b.toLowerCase());"string"===typeof a&&(a=parseInt(a.replace("px","")));"string"===typeof d&&(d=parseInt(d.replace("px","")));if(c||a!==this.width_||d!==this.height_)g.log("resizeAd called"),this.adsManager_&&(this.width_=a,this.height_=d,this.sendVideoMessage("resizeAd",{width:a,height:d,viewMode:"fullscreen"===
b||this.application_.fullscreen?"fullscreen":"normal"}),this.adsManager_.ad.resizeAd(a,d,"normal"!==b||this.application_.fullscreen?"fullscreen":"normal"),this.setContainerDims(a,d))},startAd:function(){this.started||(this.adsManager_.ad.startAd(),this.issueVPAIDEvent(this.vpaidEvents.AD_STARTED,{}),this.started=!0);g.log("startAd called")},stopAd:function(){g.log("stopAd called");this.issueVPAIDEvent(this.vpaidEvents.AD_STOPPED,{});this.adsManager_.ad.stopAd()},pauseAd:function(){g.log("pauseAd called");
this.adsManager_.ad.pauseAd()},resumeAd:function(){g.log("resumeAd called");this.adsManager_.ad.resumeAd()},expandAd:function(){g.log("expandAd called");this.application_.onFullscreenClick_()},collapseAd:function(){g.log("collapseAd called");this.application_.onFullscreenClick_()},skipAd:function(){g.log("skipAd called");this.adsManager_.ad.skipAd()},getVPAID:function(){return this}},x={getAdLinear:function(){return this.adsManager_.ad.getAdLinear()},setAdLinear:function(){g.log("'setAdLinear' is not implemented",
"warn")},getAdWidth:function(){return this.width_},setAdWidth:function(){g.log("'setAdWidth' is not implemented","warn")},getAdHeight:function(){return this.height_},setAdHeight:function(){g.log("'setAdHeight' is not implemented","warn")},getAdExpanded:function(){return this.application_.fullscreen?1:0},setAdExpanded:function(){g.log("'setAdExpanded' is not implemented","warn")},getAdSkippableState:function(){return this.adsManager_.ad.getAdSkippableState()},setAdSkippableState:function(){g.log("'setAdSkippableState' is not implemented",
"warn")},getAdRemainingTime:function(){return this.adsManager_.ad.getAdRemainingTime()},setAdRemainingTime:function(){g.log("'setAdRemainingTime' is not implemented","warn")},getAdDuration:function(){var a=this.adsManager_.ad.getAdDuration();return a||-1},setAdDuration:function(){g.log("'setAdDuration' is not implemented","warn")},getAdVolume:function(){return this.adsManager_.ad.getAdVolume()},setAdVolume:function(a){this.adsManager_.ad.setAdVolume(a)},getAdCompanions:function(){return this.companionAds},
setAdCompanions:function(){g.log("'setAdCompanions' is not implemented","warn")},getAdIcons:function(){g.log("'getAdIcons' is not implemented","warn")},setAdIcons:function(){g.log("'setAdIcons' is not implemented","warn")}};Object.defineProperty(x,"adLinear",{get:function(){return this.getAdLinear()},set:function(a){this.setAdLinear(a)}});Object.defineProperty(x,"adWidth",{get:function(){return this.getAdWidth()},set:function(a){this.setAdWidth(a)}});Object.defineProperty(x,"adHeight",{get:function(){return this.getAdHeight()},
set:function(a){this.setAdHeight(a)}});Object.defineProperty(x,"adExpanded",{get:function(){return this.getAdExpanded()},set:function(a){this.setAdExpanded(a)}});Object.defineProperty(x,"adSkippableState",{get:function(){return this.getAdSkippableState()},set:function(a){this.setAdSkippableState(a)}});Object.defineProperty(x,"adRemainingTime",{get:function(){return this.getAdRemainingTime()},set:function(a){this.setAdRemainingTime(a)}});Object.defineProperty(x,"adDuration",{get:function(){return this.getAdDuration()},
set:function(a){this.setAdDuration(a)}});Object.defineProperty(x,"adVolume",{get:function(){return this.getAdVolume()},set:function(a){this.setAdVolume(a)}});Object.defineProperty(x,"adCompanions",{get:function(){return this.getAdCompanions()},set:function(a){this.setAdCompanions(a)}});Object.defineProperty(x,"adIcons",{get:function(){return this.getAdIcons()},set:function(a){this.setAdIcons(a)}});var W=function(a){var d=this,b=s.getWindow();this.application_=a;this.contentCompleteCalled_=!1;this.adsManager_=
null;this.initialized=this.adsRequested=this.initialCalled=!1;this.companionAds="";this.stopLock=function(){d.videoCallSentByJsVid&&d.adStoppedIssued&&(d.adVideoSkippedIssued||d.adVideoCompleteIssued)&&setTimeout(function(){var a;F.clearDomElements();g.log("dt -4 issued, issuing AdStopped");a=s.getDoc().createEvent("HTMLEvents");a.initEvent("AdStopped",!0,!0);b.dispatchEvent(a)},250)};b.addEventListener("message",function(a){var b;try{b=JSON.parse(a.data),"unloadComplete"===b.msg&&b.id==g.getVideoId()&&
(d.videoCallSentByJsVid=!0,d.stopLock())}catch(e){}});this.sendPerfSample(30)},y=function(){var a=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange"];this.adTagBox_=s.getDoc().getElementById("vpaidURL");this.fullscreenHeight=this.fullscreenWidth=null;for(var d in a)s.getDoc().addEventListener(a[d],this.bind_(this,this.onFullscreenClick_),!1);this.IAS_VID_OPTS=g.getIasVidOpts();this.fullscreen=this.adsDone_=this.adsActive_=this.playing_=!1;this.adTagUrl_="";this.version_="17.4.17";
t.sendPerfSample(20);this.ads_=new W(this);g.log("VWrapper constructed.")};y.prototype.pauseForAd=function(){this.playing_=this.adsActive_=!0};y.prototype.adClicked=function(){this.IAS_VID_OPTS.continueonclick||this.ads_.adDisplayContainer_.manager.video.element.paused||this.ads_.pauseAd()};y.prototype.bind_=function(a,d){return function(){d.apply(a,arguments)}};y.prototype.isMobilePlatform=function(){var a=g.getUserAgent();return a.match(/(iPod|iPhone|iPad)/)||-1<a.toLowerCase().indexOf("android")};
y.prototype.onClick_=function(){var a;g.log("VWRapper.onClick called");if(this.adsDone_)this.adsActive_&&(this.playing_?this.ads_.pauseAd():this.ads_.resume()),this.playing_=!this.playing_;else{if(a=g.getAdTagUrl())this.adTagUrl_=a;this.adsDone_=!0;this.ads_.initialUserAction()}};y.prototype.onFullscreenClick_=function(){var a,d=s.getWindow(),b=s.getDoc();if(this.fullscreen)if(d=b.exitFullscreen||b.exitFullScreen||b.webkitCancelFullScreen||b.mozCancelFullScreen)d.call(b);else this.onFullscreenChange_();
else(a=b.documentElement.requestFullscreen||b.documentElement.webkitRequestFullscreen||b.documentElement.mozRequestFullscreen||b.documentElement.requestFullScreen||b.documentElement.webkitRequestFullScreen||b.documentElement.mozRequestFullScreen)?(this.fullscreenWidth=d.screen.width,this.fullscreenHeight=d.screen.height,a.call(b.documentElement)):(this.fullscreenWidth=d.innerWidth,this.fullscreenHeight=d.innerHeight,this.onFullscreenChange_());a.call(b.documentElement)};y.prototype.loadAds_=function(){this.adTagUrl_||
(this.adTagUrl_=g.getAdTagUrl());this.ads_.requestAds(this.adTagUrl_)};y.prototype.onFullscreenChange_=function(){this.ads_.sendVideoMessage("adExpandedChange",{});this.fullscreen?this.fullscreen=!1:(this.makeAdsFullscreen_(),this.fullscreen=!0)};y.prototype.makeAdsFullscreen_=function(){this.ads_.resize(this.fullscreenWidth,this.fullscreenHeight)};(function(){var a,d=s.getWindow();t.sendPerfSample(10);"object"!==typeof JSON||"function"!==typeof postMessage?g.log("Your browser is not compatible with HTML5 video ads",
"error","B"):(g.log("Building Ads interface..."),g.extend(W.prototype,[V,t,{vpaidEvents:pa},qa,x]),g.log("Constructing VWrapper..."),a=new y,d.getVPAIDAd=function(b){g.log("getVPAIDAd called");b||t.sendPerfSample(50);return a.ads_},t.sendPerfSample(40))})()}catch(ra){N("html5Video_Wrapper",ra)}})();
