<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="output.css">
    <style media="screen">

      .pages {

      }

      .page {
        display: flex;
        position: sticky;
        background: white;
        top: 0;
        margin-bottom: 40px;
        box-shadow: -20px 0 20px rgba(0,0,0,0.2)
      }

      p {
        margin: 0 auto 1.5em;
        line-height: 1.4;
      }

      h2 {
        font-size: 2em;
        font-weight: 400;
        margin-bottom: 1.1em
      }

      .body {
        width: 50%;
        min-width: 50%;
        padding: 3em 3em;
      }

      .body-wrap {
        align-items: center;
        margin-bottom: 4em;
      }

      .image {
        top: 0;
        flex: 1;
      }

      .image-wrap {
        position: absolute;
        position: sticky;
        top: 0;
        opacity: 1;
        transition: 0.5s opacity;
        will-change: opacity;
      }

      .image-wrap:first-of-type ~ .image-wrap {
        opacity: 0;
      }

      .image img {
        object-fit: cover;
        position: absolute;
        height: 100vh;
        width: 100%;
        top: 0;
      }

    </style>
  </head>
  <body>
    <div class="pages">

      <div class="page">
        <div class="body">
          <div class="body-wrap">
            <h2 data-id="0">Story 1 Headline</h2>
            <p>However hard he threw himself onto his right, he always rolled back to where he was.
            <p>One morning, when Gregor Samsa woke from troubled dreams, he found himself transformed in his bed into a horrible vermin.
            <p>He lay on his armour-like back, and if he lifted his head a little he could see his brown belly, slightly domed and divided by arches into stiff sections.
            <p>The bedding was hardly able to cover it and seemed ready to slide off any moment.
          </div>

          <div class="body-wrap">
            <h2 data-id="1">Story 2 Headline</h2>
            <p>However hard he threw himself onto his right, he always rolled back to where he was.
            <p>One morning, when Gregor Samsa woke from troubled dreams, he found himself transformed in his bed into a horrible vermin.
            <p>He lay on his armour-like back, and if he lifted his head a little he could see his brown belly, slightly domed and divided by arches into stiff sections.
            <p>The bedding was hardly able to cover it and seemed ready to slide off any moment.
          </div>

          <div class="body-wrap">
            <h2 data-id="2">Story 3 Headline</h2>
            <p>However hard he threw himself onto his right, he always rolled back to where he was.
            <p>One morning, when Gregor Samsa woke from troubled dreams, he found himself transformed in his bed into a horrible vermin.
            <p>He lay on his armour-like back, and if he lifted his head a little he could see his brown belly, slightly domed and divided by arches into stiff sections.
            <p>The bedding was hardly able to cover it and seemed ready to slide off any moment.
          </div>

          <div class="body-wrap">
            <h2 data-id="3">Story 4 Headline</h2>
            <p>However hard he threw himself onto his right, he always rolled back to where he was.
            <p>One morning, when Gregor Samsa woke from troubled dreams, he found himself transformed in his bed into a horrible vermin.
            <p>He lay on his armour-like back, and if he lifted his head a little he could see his brown belly, slightly domed and divided by arches into stiff sections.
            <p>The bedding was hardly able to cover it and seemed ready to slide off any moment.
          </div>

          <div class="body-wrap">
            <h2 data-id="4">Story 5 Headline</h2>
            <p>However hard he threw himself onto his right, he always rolled back to where he was.
            <p>One morning, when Gregor Samsa woke from troubled dreams, he found himself transformed in his bed into a horrible vermin.
            <p>He lay on his armour-like back, and if he lifted his head a little he could see his brown belly, slightly domed and divided by arches into stiff sections.
            <p>The bedding was hardly able to cover it and seemed ready to slide off any moment.
          </div>

        </div>

        <div class="image">
          <div class="image-wrap">
            <img src="https://e3.365dm.com/17/11/2048x1152/skynews-theresa-may-priti-patel_4149855.jpg?20171108012646" alt="">
          </div>

          <div class="image-wrap">
            <img src="https://e3.365dm.com/17/06/2048x1152/1db47ea208b59cc44a53d6419ee13eaa55c21809ff9f4e41235d88538fb7c024_3982084.jpg?20170620154937" alt="">
          </div>

          <div class="image-wrap">
            <img src="https://e3.365dm.com/17/11/2048x1536/skynews-priti-patel-cabinet-minister_4150609.jpg?20171109130402" alt="">
          </div>

          <div class="image-wrap">
            <img src="https://e3.365dm.com/17/11/2048x1152/skynews-gary-goldsmith-uncle-kate-middleton_4155444.jpg?20171114122331" alt="">
          </div>

          <div class="image-wrap">
            <img src="https://e3.365dm.com/17/11/2048x1152/skynews-vladimir-putin-moscow-tv-interview_4155492.jpg?20171114131313" alt="">
          </div>

        </div>
      </div>


    </div>


<script>

NodeList.prototype.forEach = Array.prototype.forEach;

var images = document.querySelectorAll('.image-wrap');
var page = document.querySelector('.pages');
var headlines = document.querySelectorAll('h2');

function opacity(index){

  images.forEach(function(item){
    item.style.cssText = "opacity:0";
  });

  images[index].style.cssText = "opacity: 1"
}


function tick(){

  var match = 0;

  headlines.forEach(function(item, index){
    if(item.getBoundingClientRect().top < (window.innerHeight/2)){
      match = index;
    }
  });

  opacity(match);

  // console.log(list);

  requestAnimationFrame(tick);

}

tick();





</script>
  </body>
</html>
