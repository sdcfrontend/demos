!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.script=t():e.script=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=function(e){if(200===e.status)return e;throw new Error("Bad request")};function o(e,t){return!!{}.hasOwnProperty.call(e,t)&&e[t]}function i(e,t){return!(!e||!t)&&t.replace(/\${([a-zA-Z.]*)}/g,(t,n)=>{const r=o(e,n);return r||(r||-1===n.indexOf(".")?"":function(e,t){const n=t.split(".");return!!{}.hasOwnProperty.call(e,n[0])&&o(e[n[0]],n[1])}(e,n))})}function a({nodeList:e,templateName:t}){let n=document.createElement("div");return e.forEach(e=>{e.id===t&&(n=e)}),n}function l({dataItem:e,template:t}){const n=document.createElement("div");return n.innerHTML=i(e,t),n}function c({dataItem:e,template:t}){return l({dataItem:e,template:t})}function u({polledEvent:e,config:t}){e.id="post";const n=a({nodeList:t.templates,templateName:"post"});return null===n?document.createElement("div"):function({dataItem:e,template:t}){return l({dataItem:e,template:t}).querySelector(`[data-id="${e.feedTimestamp}"]`)}({dataItem:e,template:n.innerHTML})}var d=function(e,t,n){if(!e||!t||!n)return;const r=n,o=e.getElementsByClassName("sdc-site-match-timeline__post"),i=document.createDocumentFragment();null!==r&&r.items&&r.items.forEach(e=>{const n=`sdc-site-match-timeline-${e.feedTimestamp}`;if([...o].some(e=>n===e.id))return;e.badge&&(e.badge=function({polledEvent:e,config:t}){const n=a({nodeList:t.templates,templateName:"badge"});return n?c({dataItem:{badge:e.badge},template:n.innerHTML}).innerHTML:""}({polledEvent:e,config:t})),e.iconName&&(e.iconHtml=function({polledData:e,polledEvent:t,config:n}){const r=a({nodeList:n.templates,templateName:"icon"});return r?c({dataItem:{iconsPath:e.iconsPath,type:t.type},template:r.innerHTML}).innerHTML:""}({polledData:r,polledEvent:e,config:t}));const l=u({polledEvent:e,config:t});""!==l.innerHTML&&i.appendChild(l)}),e.insertBefore(i,e.firstChild),function(e,t){const n=t.items.map(e=>`sdc-site-match-timeline-${e.feedTimestamp}`);[...e].filter(e=>!n.includes(e.id)).forEach(e=>e.remove())}(o,r)};let s;function f(e,t){if(!e.dataset.url||!e.dataset.interval)return;const n=e.getAttribute("data-url-auth"),o=new Headers;n&&o.append("Authorization",n),fetch(e.dataset.url,{headers:o}).then(r).then(e=>e.json()).then(d.bind(null,e,t)).catch(e=>console.error(e)),s=setTimeout(f.bind(null,e,t),1e3*parseInt(e.dataset.interval,10))}var p=function(e,t){e&&t&&t.fetchPolyfill&&function(e,t,n){if(!0===e)n();else{const e=document.createElement("script");e.src=t,e.onreadystatechange=n,e.onload=n,e.onerror=()=>console.error("no polyfill found!"),document.querySelector("head").appendChild(e)}}("fetch"in window&&Array.from&&Array.prototype.includes,t.fetchPolyfill,()=>{!function(e,t){void 0!==document.visibilityState&&document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState?f(e,t):clearTimeout(s)},!1),f(e,t)}(e,t)})};t.default=function(e,t){if(!e)return;const n={url:null,interval:15,fetchPolyfill:"https://cdn.polyfill.io/v2/polyfill.min.js?features=fetch,Array.from,Array.prototype.includes",templates:e.querySelectorAll("[data-type='text-template']")};!function(e,t){if(t)for(const n in t)e[n]=t[n]}(n,t),!n.templates||n.templates.length<=0||p(e,n)}}])}));