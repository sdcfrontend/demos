!function e(t,n,i){function r(o,s){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){var n=t[o][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(){OO||(OO={})},{}],2:[function(e){e("./InitOO.js"),window._||(window._=e("underscore")),OO._||(OO._=window._.noConflict())},{"./InitOO.js":1,underscore:5}],3:[function(){!function(e,t){e.STATE={LOADING:"loading",READY:"ready",PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering",ERROR:"error",DESTROYED:"destroyed",__end_marker:!0},e.EVENTS={PLAYER_CREATED:"playerCreated",PLAYER_EMBEDDED:"playerEmbedded",SET_EMBED_CODE:"setEmbedCode",SET_EMBED_CODE_AFTER_OOYALA_AD:"setEmbedCodeAfterOoyalaAd",EMBED_CODE_CHANGED:"embedCodeChanged",SET_ASSET:"setAsset",ASSET_CHANGED:"assetChanged",UPDATE_ASSET:"updateAsset",ASSET_UPDATED:"assetUpdated",AUTH_TOKEN_CHANGED:"authTokenChanged",GUID_SET:"guidSet",WILL_FETCH_PLAYER_XML:"willFetchPlayerXml",PLAYER_XML_FETCHED:"playerXmlFetched",WILL_FETCH_CONTENT_TREE:"willFetchContentTree",SAVE_PLAYER_SETTINGS:"savePlayerSettings",CONTENT_TREE_FETCHED:"contentTreeFetched",WILL_FETCH_METADATA:"willFetchMetadata",METADATA_FETCHED:"metadataFetched",SKIN_METADATA_FETCHED:"skinMetadataFetched",THUMBNAILS_FETCHED:"thumbnailsFetched",WILL_FETCH_AUTHORIZATION:"willFetchAuthorization",AUTHORIZATION_FETCHED:"authorizationFetched",WILL_FETCH_AD_AUTHORIZATION:"willFetchAdAuthorization",AD_AUTHORIZATION_FETCHED:"adAuthorizationFetched",CAN_SEEK:"canSeek",WILL_RESUME_MAIN_VIDEO:"willResumeMainVideo",PLAYBACK_READY:"playbackReady",INITIAL_PLAY:"initialPlay",WILL_PLAY:"willPlay",REPLAY:"replay",PLAYHEAD_TIME_CHANGED:"playheadTimeChanged",BUFFERING:"buffering",BUFFERED:"buffered",DOWNLOADING:"downloading",BITRATE_INFO_AVAILABLE:"bitrateInfoAvailable",SET_TARGET_BITRATE:"setTargetBitrate",BITRATE_CHANGED:"bitrateChanged",CLOSED_CAPTIONS_INFO_AVAILABLE:"closedCaptionsInfoAvailable",SET_CLOSED_CAPTIONS_LANGUAGE:"setClosedCaptionsLanguage",CLOSED_CAPTION_CUE_CHANGED:"closedCaptionCueChanged",ASSET_DIMENSION:"assetDimension",SCRUBBING:"scrubbing",SCRUBBED:"scrubbed",SEEK:"seek",SEEKED:"seeked",PLAY:"play",PLAYING:"playing",PLAY_FAILED:"playFailed",PAUSE:"pause",PAUSED:"paused",PLAYED:"played",DISPLAY_CUE_POINTS:"displayCuePoints",INSERT_CUE_POINT:"insertCuePoint",RESET_CUE_POINTS:"resetCuePoints",WILL_CHANGE_FULLSCREEN:"willChangeFullscreen",FULLSCREEN_CHANGED:"fullscreenChanged",SIZE_CHANGED:"sizeChanged",CHANGE_VOLUME:"changeVolume",VOLUME_CHANGED:"volumeChanged",CHANGE_MUTE_STATE:"changeMuteState",MUTE_STATE_CHANGED:"muteStateChanged",CONTROLS_SHOWN:"controlsShown",CONTROLS_HIDDEN:"controlsHidden",END_SCREEN_SHOWN:"endScreenShown",ERROR:"error",API_ERROR:"apiError",BITRATE_INITIAL:"bitrateInitial",BITRATE_FIVE_SEC:"bitrateFiveSec",BITRATE_STABLE:"bitrateStable",PLAYBACK_START_ERROR:"playbackStartError",PLAYBACK_MIDSTREAM_ERROR:"playbackMidstreamError",PLUGIN_LOADED:"pluginLoaded",VC_PLUGIN_ERROR:"videoPluginError",DESTROY:"destroy",WILL_PLAY_FROM_BEGINNING:"willPlayFromBeginning",DISABLE_PLAYBACK_CONTROLS:"disablePlaybackControls",ENABLE_PLAYBACK_CONTROLS:"enablePlaybackControls",VC_READY:"videoControllerReady",VC_CREATE_VIDEO_ELEMENT:"videoControllerCreateVideoElement",VC_UPDATE_ELEMENT_STREAM:"videoControllerUpdateElementStream",VC_VIDEO_ELEMENT_CREATED:"videoControllerVideoElementCreated",VC_FOCUS_VIDEO_ELEMENT:"videoControllerFocusVideoElement",VC_VIDEO_ELEMENT_IN_FOCUS:"videoControllerVideoElementInFocus",VC_VIDEO_ELEMENT_LOST_FOCUS:"videoControllerVideoElementLostFocus",VC_DISPOSE_VIDEO_ELEMENT:"videoControllerDisposeVideoElement",VC_VIDEO_ELEMENT_DISPOSED:"videoControllerVideoElementDisposed",VC_SET_VIDEO_STREAMS:"videoControllerSetVideoStreams",VC_ERROR:"videoControllerError",VC_SET_INITIAL_TIME:"videoSetInitialTime",VC_PLAY:"videoPlay",PLAY_VIDEO_ELEMENT:"playVideoElement",VC_WILL_PLAY:"videoWillPlay",VC_PLAYING:"videoPlaying",VC_PLAYED:"videoPlayed",VC_PLAY_FAILED:"videoPlayFailed",VC_PAUSE:"videoPause",VC_PAUSED:"videoPaused",VC_SEEK:"videoSeek",VC_SEEKING:"videoSeeking",VC_SEEKED:"videoSeeked",VC_PRELOAD:"videoPreload",VC_RELOAD:"videoReload",VC_PRIME_VIDEOS:"videoPrimeVideos",VC_TAG_FOUND:"videoTagFound",INITIAL_PLAY_STARTING:"initialPlayStarting",AD_SDK_LOADED:"adSdkLoaded",AD_SDK_LOAD_FAILED:"adSdkLoadFailed",AD_REQUEST:"adRequest",AD_REQUEST_SUCCESS:"adRequestSuccess",AD_REQUEST_ERROR:"adRequestError",AD_REQUEST_EMPTY:"adRequestEmpty",AD_PLAYBACK_ERROR:"adPlaybackError",AD_SDK_IMPRESSION:"adSdkImpression",AD_COMPLETED:"adCompleted",WILL_FETCH_ADS:"willFetchAds",DISABLE_SEEKING:"disableSeeking",ENABLE_SEEKING:"enableSeeking",WILL_PLAY_ADS:"willPlayAds",WILL_PLAY_SINGLE_AD:"willPlaySingleAd",WILL_PAUSE_ADS:"willPauseAds",WILL_RESUME_ADS:"willResumeAds",WILL_PLAY_NONLINEAR_AD:"willPlayNonlinearAd",PLAY_NONLINEAR_AD:"playNonlinearAd",NONLINEAR_AD_DISPLAYED:"nonlinearAdDisplayed",ADS_PLAYED:"adsPlayed",SINGLE_AD_PLAYED:"singleAdPlayed",ADS_ERROR:"adsError",ADS_CLICKED:"adsClicked",FIRST_AD_FETCHED:"firstAdFetched",AD_CONFIG_READY:"adConfigReady",WILL_SHOW_COMPANION_ADS:"willShowCompanionAds",AD_FETCH_FAILED:"adFetchFailed",MIDROLL_PLAY_FAILED:"midrollPlayFailed",SKIP_AD:"skipAd",UPDATE_AD_COUNTDOWN:"updateAdCountdown",REPORT_EXPERIMENT_VARIATIONS:"reportExperimentVariations",FETCH_STYLE:"fetchStyle",STYLE_FETCHED:"styleFetched",SET_STYLE:"setStyle",USE_SERVER_SIDE_HLS_ADS:"useServerSideHlsAds",LOAD_ALL_VAST_ADS:"loadAllVastAds",ADS_FILTERED:"adsFiltered",ADS_MANAGER_HANDLING_ADS:"adsManagerHandlingAds",ADS_MANAGER_FINISHED_ADS:"adsManagerFinishedAds",OVERLAY_RENDERING:"overlayRendering",SHOW_AD_CONTROLS:"showAdControls",SHOW_AD_MARQUEE:"showAdMarquee",SDK_AD_EVENT:"sdkAdEvent",PAGE_UNLOAD_REQUESTED:"pageUnloadRequested",PAGE_PROBABLY_UNLOADING:"pageProbablyUnloading",REPORT_DISCOVERY_IMPRESSION:"reportDiscoveryImpression",REPORT_DISCOVERY_CLICK:"reportDiscoveryClick",PLAYLISTS_READY:"playlistReady",VIDEO_TYPE_CHANGED:"videoTypeChanged",UI_READY:"uiReady",__end_marker:!0},e.ERROR={API:{NETWORK:"network",SAS:{GENERIC:"sas",GEO:"geo",DOMAIN:"domain",FUTURE:"future",PAST:"past",DEVICE:"device",PROXY:"proxy",CONCURRENT_STREAMS:"concurrent_streams",INVALID_HEARTBEAT:"invalid_heartbeat",ERROR_DEVICE_INVALID_AUTH_TOKEN:"device_invalid_auth_token",ERROR_DEVICE_LIMIT_REACHED:"device_limit_reached",ERROR_DEVICE_BINDING_FAILED:"device_binding_failed",ERROR_DEVICE_ID_TOO_LONG:"device_id_too_long",ERROR_DRM_RIGHTS_SERVER_ERROR:"drm_server_error",ERROR_DRM_GENERAL_FAILURE:"drm_general_failure",ERROR_INVALID_ENTITLEMENTS:"invalid_entitlements"},CONTENT_TREE:"content_tree",METADATA:"metadata"},PLAYBACK:{GENERIC:"playback",STREAM:"stream",LIVESTREAM:"livestream",NETWORK:"network_error"},CHROMECAST:{MANIFEST:"chromecast_manifest",MEDIAKEYS:"chromecast_mediakeys",NETWORK:"chromecast_network",PLAYBACK:"chromecast_playback"},UNPLAYABLE_CONTENT:"unplayable_content",INVALID_EXTERNAL_ID:"invalid_external_id",EMPTY_CHANNEL:"empty_channel",EMPTY_CHANNEL_SET:"empty_channel_set",CHANNEL_CONTENT:"channel_content",VC:{UNSUPPORTED_ENCODING:"unsupported_encoding",UNABLE_TO_CREATE_VIDEO_ELEMENT:"unable_to_create_video_element"}},e.URLS={VAST_PROXY:t.template("http://player.ooyala.com/nuplayer/mobile_vast_ads_proxy?callback=<%=cb%>&embed_code=<%=embedCode%>&expires=<%=expires%>&tag_url=<%=tagUrl%>"),EXTERNAL_ID:t.template("<%=server%>/player_api/v1/content_tree/external_id/<%=pcode%>/<%=externalId%>"),CONTENT_TREE:t.template("<%=server%>/player_api/v1/content_tree/embed_code/<%=pcode%>/<%=embedCode%>"),METADATA:t.template("<%=server%>/player_api/v1/metadata/embed_code/<%=playerBrandingId%>/<%=embedCode%>?videoPcode=<%=pcode%>"),SAS:t.template("<%=server%>/player_api/v1/authorization/embed_code/<%=pcode%>/<%=embedCode%>"),ANALYTICS:t.template("<%=server%>/reporter.js"),THUMBNAILS:t.template("<%=server%>/api/v1/thumbnail_images/<%=embedCode%>"),__end_marker:!0},e.PLUGINS={ADS:"ads",VIDEO:"video",ANALYTICS:"analytics",PLAYLIST:"playlist",SKIN:"skin"},e.VIDEO={MAIN:"main",ADS:"ads",ENCODING:{DRM:{HLS:"hls_drm",DASH:"dash_drm"},AUDIO:"audio",DASH:"dash",HDS:"hds",HLS:"hls",IMA:"ima",PULSE:"pulse",MP4:"mp4",YOUTUBE:"youtube",RTMP:"rtmp",SMOOTH:"smooth",WEBM:"webm",AKAMAI_HD_VOD:"akamai_hd_vod",AKAMAI_HD2_VOD_HLS:"akamai_hd2_vod_hls",AKAMAI_HD2_VOD_HDS:"akamai_hd2_vod_hds",AKAMAI_HD2_HDS:"akamai_hd2_hds",AKAMAI_HD2_HLS:"akamai_hd2_hls",FAXS_HLS:"faxs_hls",WIDEVINE_HLS:"wv_hls",WIDEVINE_MP4:"wv_mp4",WIDEVINE_WVM:"wv_wvm",UNKNOWN:"unknown"},FEATURE:{CLOSED_CAPTIONS:"closedCaptions",VIDEO_OBJECT_SHARING_GIVE:"videoObjectSharingGive",VIDEO_OBJECT_SHARING_TAKE:"videoObjectSharingTake",BITRATE_CONTROL:"bitrateControl"},TECHNOLOGY:{FLASH:"flash",HTML5:"html5",MIXED:"mixed",OTHER:"other"}},e.CSS={VISIBLE_POSITION:"0px",INVISIBLE_POSITION:"-100000px",VISIBLE_DISPLAY:"block",INVISIBLE_DISPLAY:"none",VIDEO_Z_INDEX:1e4,SUPER_Z_INDEX:2e4,ALICE_SKIN_Z_INDEX:11e3,OVERLAY_Z_INDEX:10500,TRANSPARENT_COLOR:"rgba(255, 255, 255, 0)",__end_marker:!0},e.TEMPLATES={RANDOM_PLACE_HOLDER:["[place_random_number_here]","<now>","[timestamp]","<rand-num>","[cache_buster]","[random]"],REFERAK_PLACE_HOLDER:["[referrer_url]","[LR_URL]","[description_url]"],EMBED_CODE_PLACE_HOLDER:["[oo_embedcode]"],MESSAGE:'                  <table width="100%" height="100%" bgcolor="black" style="padding-left:55px; padding-right:55px;                   background-color:black; color: white;">                  <tbody>                  <tr valign="middle">                  <td align="right"><span style="font-family:Arial; font-size:20px">                  <%= message %>                  </span></td></tr></tbody></table>                  ',__end_marker:!0},e.CONSTANTS={AD_PLAY_COUNT_KEY:"oo_ad_play_count",AD_ID_TO_PLAY_COUNT_DIVIDER:":",AD_PLAY_COUNT_DIVIDER:"|",MAX_AD_PLAY_COUNT_HISTORY_LENGTH:20,CONTROLS_BOTTOM_PADDING:10,SEEK_TO_END_LIMIT:4,CLOSED_CAPTIONS:{SHOWING:"showing",HIDDEN:"hidden",DISABLED:"disabled"},OOYALA_PLAYER_SETTINGS_KEY:"ooyala_player_settings",__end_marker:!0}}(OO,OO._)},{}],4:[function(){!function(e,t,n){e.getRandomString=function(){return Math.random().toString(36).substring(7)},e.safeClone=function(i){if(t.isNumber(i)||t.isString(i)||t.isBoolean(i)||t.isFunction(i)||t.isNull(i)||t.isUndefined(i))return i;var r=i instanceof Array?[]:{};try{n.extend(!0,r,i)}catch(a){e.log("deep clone error",a)}return r},e.d=function(){e.isDebug&&e.log.apply(e,arguments),e.$("#OOYALA_DEBUG_CONSOLE").append(JSON.stringify(e.safeClone(arguments))+"<br>")},e.inherit=function(t,n){if("function"!=typeof t)return e.log("invalid inherit, ParentClass need to be a class",t),null;var i=function(){t.apply(this,arguments),"function"==typeof n&&n.apply(this,arguments)},r=new t;return e._.extend(i.prototype,r),i.prototype.parentClass=r,i};var i={};e.attachStyle=function(e,t){var r=n('<style type="text/css">'+e+"</style>").appendTo("head");i[t]=i[t]||[],i[t].push(r)},e.removeStyles=function(t){e._.each(i[t],function(e){e.remove()})},e.getInnerProperty=function(e,n){for(var i=e,r=n;r.length>0;){var a=r.shift();if(t.isNull(i)||!t.isObject(i)||t.isFunction(i)||t.isArray(i))return null;i=i[a]}return i},e.formatSeconds=function(e){var t=parseInt(e,10)%60,n=parseInt(e/3600,10),i=parseInt((e-3600*n)/60,10);return 10>n&&(n="0"+n),10>i&&(i="0"+i),10>t&&(t="0"+t),parseInt(n,10)>0?n+":"+i+":"+t:i+":"+t},e.timeStringToSeconds=function(e){var n=(e||"").split(":");return t.reduce(n,function(e,t){return 60*e+parseInt(t,10)},0)},e.leftPadding=function(e,t){for(var n="0",i=e?e.toString():"";i.length<t;)i=n+i;return i},e.getColorString=function(t){return"#"+e.leftPadding(t.toString(16),6).toUpperCase()},e.hexToRgb=function(e){var t=(16711680&e)>>16,n=(65280&e)>>8,i=255&e;return[t,n,i]},e.changeColor=function(t,n,i){var r=i?Math.max:Math.min,a=i?0:255,o=Math.round(255*n)*(i?-1:1),s=e.hexToRgb(t);return[e.leftPadding(r(s[0]+o,a).toString(16),2),e.leftPadding(r(s[1]+o,a).toString(16),2),e.leftPadding(r(s[2]+o,a).toString(16),2)].join("")},e.decode64=function(e){e=e.replace(/\n/g,"");var t,n="",i=0,r=[],a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";if(window.atob)return atob(e);do{for(t=0;4>t;t++)r[t]=a.indexOf(e.charAt(i++));n+=String.fromCharCode(r[0]<<2|r[1]>>4,64==r[2]?0:(15&r[1])<<4|r[2]>>2,64==r[3]?0:(3&r[2])<<6|r[3])}while(i<e.length);return n.replace(/\0/g,"")},e.pixelPing=function(t){var n=new Image;n.onerror=n.onabort=function(){e.d("onerror:",t)},n.src=e.getNormalizedTagUrl(t)},e.pixelPings=function(n){t.isEmpty(n)||t.each(n,function(t){e.pixelPing(t)},this)},e.stringToBoolean=function(e){return"string"==typeof e?e.toLowerCase().indexOf("true")>-1||e.toLowerCase().indexOf("yes")>-1:!!e},e.regexEscape=function(e){var t=/[<>()\[\]{}]/g;return e.replace(t,"\\$&")},e.getNormalizedTagUrl=function(n,i){var r=(new Date).getTime(),a=escape(document.URL),o=function(i,r){t.each(i,function(t){var i=new RegExp("("+e.regexEscape(t)+")","gi");n=n.replace(i,r)},this)};return o(e.TEMPLATES.RANDOM_PLACE_HOLDER,r),o(e.TEMPLATES.REFERAK_PLACE_HOLDER,a),i&&o(e.TEMPLATES.EMBED_CODE_PLACE_HOLDER,i),n},e.safeSeekRange=function(e){return{start:e.length>0?e.start(0):0,end:e.length>0?e.end(0):0}},e.loadedJS=e.loadedJS||{},e.jsOnSuccessList=e.jsOnSuccessList||{},e.safeFuncCall=function(t){if("function"==typeof t)try{t.apply()}catch(n){e.log("Can not invoke function!",n)}},e.loadScriptOnce=function(t,i,r,a){return e.jsOnSuccessList[t]=e.jsOnSuccessList[t]||[],e.loadedJS[t]?("loaded"===e.loadedJS[t]?e.safeFuncCall(i):"loading"===e.loadedJS[t]&&e.jsOnSuccessList[t].unshift(i),!1):(e.loadedJS[t]="loading",n.ajax({url:t,type:"GET",cache:!0,dataType:"script",timeout:a||15e3,success:function(){e.loadedJS[t]="loaded",e.jsOnSuccessList[t].unshift(i),e._.each(e.jsOnSuccessList[t],function(t){e.safeFuncCall(t)},this),e.jsOnSuccessList[t]=[]},error:function(){e.safeFuncCall(r)}}),!0)};try{e.localStorage=window.localStorage}catch(r){e.log(r)}e.localStorage||(e.localStorage={getItem:function(e){return e&&this.hasOwnProperty(e)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},key:function(e){return unescape(document.cookie.replace(/\s*\=(?:.(?!;))*$/,"").split(/\s*\=(?:[^;](?!;))*[^;]?;\s*/)[e])},setItem:function(e,t){e&&(document.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/",this.length=document.cookie.match(/\=/g).length)},length:0,removeItem:function(e){e&&this.hasOwnProperty(e)&&(document.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",this.length--)},hasOwnProperty:function(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}},e.localStorage.length=(document.cookie.match(/\=/g)||e.localStorage).length),e.setItem=function(t,n){try{e.localStorage.setItem(t,n)}catch(i){e.log(i)}},e.JSON=window.JSON}(OO,OO._,OO.$)},{}],5:[function(e,t,n){(function(){function e(t,n,i){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;if(t._chain&&(t=t._wrapped),n._chain&&(n=n._wrapped),t.isEqual&&D.isFunction(t.isEqual))return t.isEqual(n);if(n.isEqual&&D.isFunction(n.isEqual))return n.isEqual(t);var r=c.call(t);if(r!=c.call(n))return!1;switch(r){case"[object String]":return t==String(n);case"[object Number]":return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=typeof t||"object"!=typeof n)return!1;for(var a=i.length;a--;)if(i[a]==t)return!0;i.push(t);var o=0,s=!0;if("[object Array]"==r){if(o=t.length,s=o==n.length)for(;o--&&(s=o in t==o in n&&e(t[o],n[o],i)););}else{if("constructor"in t!="constructor"in n||t.constructor!=n.constructor)return!1;for(var l in t)if(D.has(t,l)&&(o++,!(s=D.has(n,l)&&e(t[l],n[l],i))))break;if(s){for(l in n)if(D.has(n,l)&&!o--)break;s=!o}}return i.pop(),s}var i=this,r=i._,a={},o=Array.prototype,s=Object.prototype,l=Function.prototype,d=o.slice,u=o.unshift,c=s.toString,E=s.hasOwnProperty,A=o.forEach,h=o.map,_=o.reduce,f=o.reduceRight,p=o.filter,g=o.every,T=o.some,m=o.indexOf,I=o.lastIndexOf,O=Array.isArray,S=Object.keys,R=l.bind,D=function(e){return new w(e)};"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=D),n._=D):i._=D,D.VERSION="1.3.3";var C=D.each=D.forEach=function(e,t,n){if(null!=e)if(A&&e.forEach===A)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,r=e.length;r>i;i++)if(i in e&&t.call(n,e[i],i,e)===a)return}else for(var o in e)if(D.has(e,o)&&t.call(n,e[o],o,e)===a)return};D.map=D.collect=function(e,t,n){var i=[];return null==e?i:h&&e.map===h?e.map(t,n):(C(e,function(e,r,a){i[i.length]=t.call(n,e,r,a)}),e.length===+e.length&&(i.length=e.length),i)},D.reduce=D.foldl=D.inject=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),_&&e.reduce===_)return i&&(t=D.bind(t,i)),r?e.reduce(t,n):e.reduce(t);if(C(e,function(e,a,o){r?n=t.call(i,n,e,a,o):(n=e,r=!0)}),!r)throw new TypeError("Reduce of empty array with no initial value");return n},D.reduceRight=D.foldr=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return i&&(t=D.bind(t,i)),r?e.reduceRight(t,n):e.reduceRight(t);var a=D.toArray(e).reverse();return i&&!r&&(t=D.bind(t,i)),r?D.reduce(a,t,n,i):D.reduce(a,t)},D.find=D.detect=function(e,t,n){var i;return L(e,function(e,r,a){return t.call(n,e,r,a)?(i=e,!0):void 0}),i},D.filter=D.select=function(e,t,n){var i=[];return null==e?i:p&&e.filter===p?e.filter(t,n):(C(e,function(e,r,a){t.call(n,e,r,a)&&(i[i.length]=e)}),i)},D.reject=function(e,t,n){var i=[];return null==e?i:(C(e,function(e,r,a){t.call(n,e,r,a)||(i[i.length]=e)}),i)},D.every=D.all=function(e,t,n){var i=!0;return null==e?i:g&&e.every===g?e.every(t,n):(C(e,function(e,r,o){return(i=i&&t.call(n,e,r,o))?void 0:a}),!!i)};var L=D.some=D.any=function(e,t,n){t||(t=D.identity);var i=!1;return null==e?i:T&&e.some===T?e.some(t,n):(C(e,function(e,r,o){return i||(i=t.call(n,e,r,o))?a:void 0}),!!i)};D.include=D.contains=function(e,t){var n=!1;return null==e?n:m&&e.indexOf===m?-1!=e.indexOf(t):n=L(e,function(e){return e===t})},D.invoke=function(e,t){var n=d.call(arguments,2);return D.map(e,function(e){return(D.isFunction(t)?t||e:e[t]).apply(e,n)})},D.pluck=function(e,t){return D.map(e,function(e){return e[t]})},D.max=function(e,t,n){if(!t&&D.isArray(e)&&e[0]===+e[0])return Math.max.apply(Math,e);if(!t&&D.isEmpty(e))return-1/0;var i={computed:-1/0};return C(e,function(e,r,a){var o=t?t.call(n,e,r,a):e;o>=i.computed&&(i={value:e,computed:o})}),i.value},D.min=function(e,t,n){if(!t&&D.isArray(e)&&e[0]===+e[0])return Math.min.apply(Math,e);if(!t&&D.isEmpty(e))return 1/0;var i={computed:1/0};return C(e,function(e,r,a){var o=t?t.call(n,e,r,a):e;o<i.computed&&(i={value:e,computed:o})}),i.value},D.shuffle=function(e){var t,n=[];return C(e,function(e,i){t=Math.floor(Math.random()*(i+1)),n[i]=n[t],n[t]=e}),n},D.sortBy=function(e,t,n){var i=D.isFunction(t)?t:function(e){return e[t]};return D.pluck(D.map(e,function(e,t,r){return{value:e,criteria:i.call(n,e,t,r)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;return void 0===n?1:void 0===i?-1:i>n?-1:n>i?1:0}),"value")},D.groupBy=function(e,t){var n={},i=D.isFunction(t)?t:function(e){return e[t]};return C(e,function(e,t){var r=i(e,t);(n[r]||(n[r]=[])).push(e)}),n},D.sortedIndex=function(e,t,n){n||(n=D.identity);for(var i=0,r=e.length;r>i;){var a=i+r>>1;n(e[a])<n(t)?i=a+1:r=a}return i},D.toArray=function(e){return e?D.isArray(e)?d.call(e):D.isArguments(e)?d.call(e):e.toArray&&D.isFunction(e.toArray)?e.toArray():D.values(e):[]},D.size=function(e){return D.isArray(e)?e.length:D.keys(e).length},D.first=D.head=D.take=function(e,t,n){return null==t||n?e[0]:d.call(e,0,t)},D.initial=function(e,t,n){return d.call(e,0,e.length-(null==t||n?1:t))},D.last=function(e,t,n){return null==t||n?e[e.length-1]:d.call(e,Math.max(e.length-t,0))},D.rest=D.tail=function(e,t,n){return d.call(e,null==t||n?1:t)},D.compact=function(e){return D.filter(e,function(e){return!!e})},D.flatten=function(e,t){return D.reduce(e,function(e,n){return D.isArray(n)?e.concat(t?n:D.flatten(n)):(e[e.length]=n,e)},[])},D.without=function(e){return D.difference(e,d.call(arguments,1))},D.uniq=D.unique=function(e,t,n){var i=n?D.map(e,n):e,r=[];return e.length<3&&(t=!0),D.reduce(i,function(n,i,a){return(t?D.last(n)===i&&n.length:D.include(n,i))||(n.push(i),r.push(e[a])),n},[]),r},D.union=function(){return D.uniq(D.flatten(arguments,!0))},D.intersection=D.intersect=function(e){var t=d.call(arguments,1);return D.filter(D.uniq(e),function(e){return D.every(t,function(t){return D.indexOf(t,e)>=0})})},D.difference=function(e){var t=D.flatten(d.call(arguments,1),!0);return D.filter(e,function(e){return!D.include(t,e)})},D.zip=function(){for(var e=d.call(arguments),t=D.max(D.pluck(e,"length")),n=new Array(t),i=0;t>i;i++)n[i]=D.pluck(e,""+i);return n},D.indexOf=function(e,t,n){if(null==e)return-1;var i,r;if(n)return i=D.sortedIndex(e,t),e[i]===t?i:-1;if(m&&e.indexOf===m)return e.indexOf(t);for(i=0,r=e.length;r>i;i++)if(i in e&&e[i]===t)return i;return-1},D.lastIndexOf=function(e,t){if(null==e)return-1;if(I&&e.lastIndexOf===I)return e.lastIndexOf(t);for(var n=e.length;n--;)if(n in e&&e[n]===t)return n;return-1},D.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=0,a=new Array(i);i>r;)a[r++]=e,e+=n;return a};var v=function(){};D.bind=function(e,t){var n,i;if(e.bind===R&&R)return R.apply(e,d.call(arguments,1));if(!D.isFunction(e))throw new TypeError;return i=d.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(d.call(arguments)));v.prototype=e.prototype;var r=new v,a=e.apply(r,i.concat(d.call(arguments)));return Object(a)===a?a:r}},D.bindAll=function(e){var t=d.call(arguments,1);return 0==t.length&&(t=D.functions(e)),C(t,function(t){e[t]=D.bind(e[t],e)}),e},D.memoize=function(e,t){var n={};return t||(t=D.identity),function(){var i=t.apply(this,arguments);return D.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},D.delay=function(e,t){var n=d.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},D.defer=function(e){return D.delay.apply(D,[e,1].concat(d.call(arguments,1)))},D.throttle=function(e,t){var n,i,r,a,o,s,l=D.debounce(function(){o=a=!1},t);return function(){n=this,i=arguments;var d=function(){r=null,o&&e.apply(n,i),l()};return r||(r=setTimeout(d,t)),a?o=!0:s=e.apply(n,i),l(),a=!0,s}},D.debounce=function(e,t,n){var i;return function(){var r=this,a=arguments,o=function(){i=null,n||e.apply(r,a)};n&&!i&&e.apply(r,a),clearTimeout(i),i=setTimeout(o,t)}},D.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments))}},D.wrap=function(e,t){return function(){var n=[e].concat(d.call(arguments,0));return t.apply(this,n)}},D.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},D.after=function(e,t){return 0>=e?t():function(){return--e<1?t.apply(this,arguments):void 0}},D.keys=S||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)D.has(e,n)&&(t[t.length]=n);return t},D.values=function(e){return D.map(e,D.identity)},D.functions=D.methods=function(e){var t=[];for(var n in e)D.isFunction(e[n])&&t.push(n);return t.sort()},D.extend=function(e){return C(d.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},D.pick=function(e){var t={};return C(D.flatten(d.call(arguments,1)),function(n){n in e&&(t[n]=e[n])}),t},D.defaults=function(e){return C(d.call(arguments,1),function(t){for(var n in t)null==e[n]&&(e[n]=t[n])}),e},D.clone=function(e){return D.isObject(e)?D.isArray(e)?e.slice():D.extend({},e):e},D.tap=function(e,t){return t(e),e},D.isEqual=function(t,n){return e(t,n,[])},D.isEmpty=function(e){if(null==e)return!0;if(D.isArray(e)||D.isString(e))return 0===e.length;for(var t in e)if(D.has(e,t))return!1;return!0},D.isElement=function(e){return!(!e||1!=e.nodeType)},D.isArray=O||function(e){return"[object Array]"==c.call(e)},D.isObject=function(e){return e===Object(e)},D.isArguments=function(e){return"[object Arguments]"==c.call(e)},D.isArguments(arguments)||(D.isArguments=function(e){return!(!e||!D.has(e,"callee"))}),D.isFunction=function(e){return"[object Function]"==c.call(e)},D.isString=function(e){return"[object String]"==c.call(e)},D.isNumber=function(e){return"[object Number]"==c.call(e)},D.isFinite=function(e){return D.isNumber(e)&&isFinite(e)},D.isNaN=function(e){return e!==e},D.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},D.isDate=function(e){return"[object Date]"==c.call(e)},D.isRegExp=function(e){return"[object RegExp]"==c.call(e)},D.isNull=function(e){return null===e},D.isUndefined=function(e){return void 0===e},D.has=function(e,t){return E.call(e,t)},D.noConflict=function(){return i._=r,this},D.identity=function(e){return e},D.times=function(e,t,n){for(var i=0;e>i;i++)t.call(n,i)},D.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},D.result=function(e,t){if(null==e)return null;var n=e[t];return D.isFunction(n)?n.call(e):n},D.mixin=function(e){C(D.functions(e),function(t){k(t,D[t]=e[t])})};var y=0;D.uniqueId=function(e){var t=y++;return e?e+t:t},D.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/.^/,P={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var M in P)P[P[M]]=M;var V=/\\|'|\r|\n|\t|\u2028|\u2029/g,b=/\\(\\|'|r|n|t|u2028|u2029)/g,U=function(e){return e.replace(b,function(e,t){return P[t]})};D.template=function(e,t,n){n=D.defaults(n||{},D.templateSettings);var i="__p+='"+e.replace(V,function(e){return"\\"+P[e]}).replace(n.escape||N,function(e,t){return"'+\n_.escape("+U(t)+")+\n'"}).replace(n.interpolate||N,function(e,t){return"'+\n("+U(t)+")+\n'"}).replace(n.evaluate||N,function(e,t){return"';\n"+U(t)+"\n;__p+='"})+"';\n";n.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+i+"return __p;\n";var r=new Function(n.variable||"obj","_",i);if(t)return r(t,D);var a=function(e){return r.call(this,e,D)};return a.source="function("+(n.variable||"obj")+"){\n"+i+"}",a},D.chain=function(e){return D(e).chain()};var w=function(e){this._wrapped=e};D.prototype=w.prototype;var F=function(e,t){return t?D(e).chain():e},k=function(e,t){w.prototype[e]=function(){var e=d.call(arguments);return u.call(e,this._wrapped),F(t.apply(D,e),this._chain)}};D.mixin(D),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];w.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var i=n.length;return"shift"!=e&&"splice"!=e||0!==i||delete n[0],F(n,this._chain)}}),C(["concat","join","slice"],function(e){var t=o[e];w.prototype[e]=function(){return F(t.apply(this._wrapped,arguments),this._chain)}}),w.prototype.chain=function(){return this._chain=!0,this},w.prototype.value=function(){return this._wrapped}}).call(this)},{}],6:[function(e){e("../html5-common/js/utils/InitModules/InitOOUnderscore.js"),e("../html5-common/js/utils/constants.js"),e("../html5-common/js/utils/utils.js"),function(e,t){var n={};OO.Ads.manager(function(e,t){var i=function(){this.name="google-ima-ads-manager",this.ready=!1,this.runningUnitTests=!1,this.sharedVideoElement=null,this.initTime=Date.now(),this.enableIosSkippableAds=!1;var i,o,s,l,d,u,c,E=null,A=!1,h=null,_=null,f=null,p=10004,g=15e3,T=15e3,m="r",I="t",O="p",S="Ooyala",R="1.0",D=({left:OO.CSS.VISIBLE_POSITION,visibility:"visible"},{left:OO.CSS.INVISIBLE_POSITION,visibility:"hidden"}),C=50,L=50,v=500,y="ooyalaImaPluginTimeout",N=e.bind(function(t){return e.isFunction(t)?e.bind(t,this):void a("Error: Trying to make private function but "+t+" is not a function.")},this);this.initialize=function(e,t){n[t]=this,E=e;var i=OO.DEBUG?"_debug.js":".js",r="//imasdk.googleapis.com/js/sdkloader/ima3"+i;P(),M(),this.runningUnitTests?Q(!0):E.loadAdModule(this.name,r,Q)};var P=N(function(){this.ready=!1,this.preloadAdRulesAds=!1,o=!0,this.initialPlayRequestTime=-1,this.adRequestTime=-1,this.adResponseTime=-1,this.mainContentDuration=0,this.initialPlayRequested=!1,this.canSetupAdsRequest=!0,this.adTagUrl=null,this.currentMedia=null,this.currentImpressionTime=0,this.adFinalTagUrl=null,this.adPosition=-1,this.showInAdControlBar=!1,this.adsReady=!1,this.additionalAdTagParameters=null,this.adsRequested=!1,this.adsRequestTimeoutRef=null,this.disableFlashAds=!1,this.contentEnded=!1,this.pauseAdOnClick=null,this.isFullscreen=!1,this.maxAdsRequestTimeout=g,this.uiRegistered=!1,this.metadataReady=!1,this.allAdInfo=null,this.currentAMCAdPod=null,this.currentIMAAd=null,this.currentNonLinearIMAAd=null,this.isReplay=!1,this.requestAdsOnReplay=!0,c=!1,q(),this.hasPreroll=!1,this.adPlaybackStarted=!1,this.savedVolume=-1,this.showAdControls=!1,this.useGoogleAdUI=!1,this.useGoogleCountdown=!1,this.useInsecureVpaidMode=!1,this.imaIframeZIndex=p,this.adRulesLoadError=!1,s=null,l=null,d=!1,u=null}),M=N(function(){E.addPlayerListener(E.EVENTS.INITIAL_PLAY_REQUESTED,k),E.addPlayerListener(E.EVENTS.CONTENT_COMPLETED,H),E.addPlayerListener(E.EVENTS.PLAYHEAD_TIME_CHANGED,Y),E.addPlayerListener(E.EVENTS.SIZE_CHANGED,B),E.addPlayerListener(E.EVENTS.CONTENT_CHANGED,gt),E.addPlayerListener(E.EVENTS.REPLAY_REQUESTED,w),E.addPlayerListener(E.EVENTS.FULLSCREEN_CHANGED,x)}),V=N(function(){E&&(E.removePlayerListener(E.EVENTS.INITIAL_PLAY_REQUESTED,k),E.removePlayerListener(E.EVENTS.CONTENT_COMPLETED,H),E.removePlayerListener(E.EVENTS.PLAYHEAD_TIME_CHANGED,Y),E.removePlayerListener(E.EVENTS.SIZE_CHANGED,B),E.removePlayerListener(E.EVENTS.CONTENT_CHANGED,gt),E.removePlayerListener(E.EVENTS.REPLAY_REQUESTED,w),E.removePlayerListener(E.EVENTS.FULL_SCREEN_CHANGED,x))});this.loadMetadata=function(t,n,i){this.mainContentDuration=i.duration/1e3,this.allAdInfo=t.all_ads;var r=function(e){return e.position_type==m},a=e.find(t.all_ads,r);o=!!a,this.adRulesLoadError=!1,this.adTagUrl=null,o&&(this.adTagUrl=a.tag_url,this.adPosition=0),this.preloadAdRulesAds=!1,this.requestAdsOnReplay=!0,E.adManagerSettings.hasOwnProperty(E.AD_SETTINGS.REPLAY_ADS)&&(this.requestAdsOnReplay=E.adManagerSettings[E.AD_SETTINGS.REPLAY_ADS]),this.maxAdsRequestTimeout=g,e.isFinite(E.adManagerSettings[E.AD_SETTINGS.AD_LOAD_TIMEOUT])&&(E.adManagerSettings[E.AD_SETTINGS.AD_LOAD_TIMEOUT]>0||this.runningUnitTests)&&(this.maxAdsRequestTimeout=E.adManagerSettings[E.AD_SETTINGS.AD_LOAD_TIMEOUT]),this.additionalAdTagParameters=null,t.hasOwnProperty("additionalAdTagParameters")&&(this.additionalAdTagParameters=t.additionalAdTagParameters),this.showAdControls=!1,t.hasOwnProperty("showAdControls")&&(this.showAdControls=t.showAdControls),this.useGoogleAdUI=!1,t.hasOwnProperty("useGoogleAdUI")&&(this.useGoogleAdUI=t.useGoogleAdUI),this.useGoogleCountdown=!1,t.hasOwnProperty("useGoogleCountdown")&&(this.useGoogleCountdown=t.useGoogleCountdown),this.useInsecureVpaidMode=!1,t.hasOwnProperty("vpaidMode")&&(this.useInsecureVpaidMode="insecure"===t.vpaidMode),this.disableFlashAds=!1,t.hasOwnProperty("disableFlashAds")&&(this.disableFlashAds=t.disableFlashAds),this.imaIframeZIndex=p,t.hasOwnProperty("iframeZIndex")&&(this.imaIframeZIndex=t.iframeZIndex),this.enableIosSkippableAds=!1,t.hasOwnProperty("enableIosSkippableAds")&&(this.enableIosSkippableAds=t.enableIosSkippableAds),u?s||Z():z(),this.metadataReady=!0,et();var l=b();l&&l.length>0&&o&&(this.preloadAdRulesAds?(this.canSetupAdsRequest=!0,j()):this.canSetupAdsRequest=!1)},this.registerUi=function(){this.uiRegistered=!0,E.ui.useSingleVideoElement&&!this.sharedVideoElement&&E.ui.ooyalaVideoElement[0]&&"video"===E.ui.ooyalaVideoElement[0].className&&this.setupSharedVideoElement(E.ui.ooyalaVideoElement[0]),z(),j()
},this.setupSharedVideoElement=function(e){this.sharedVideoElement&&OO.isIphone&&"function"==typeof this.sharedVideoElement.removeEventListener&&this.sharedVideoElement.removeEventListener("webkitendfullscreen",lt),this.sharedVideoElement=e,this.sharedVideoElement&&OO.isIphone&&"function"==typeof this.sharedVideoElement.addEventListener&&this.sharedVideoElement.addEventListener("webkitendfullscreen",lt)},this.buildTimeline=function(){var e=[];if(o){var t={};t[OO.VIDEO.ENCODING.IMA]="";var n=[new E.Ad({position:0,duration:0,adManager:this.name,ad:{},streams:t,adType:E.ADTYPE.UNKNOWN_AD_REQUEST})];return n}var i=b();if(i)for(var r=0;r<i.length;r++){var a=i[r];if(a.position_type!=m){var t={};t[OO.VIDEO.ENCODING.IMA]="";var s={position:a.position/1e3,adManager:this.name,ad:a,streams:t,adType:E.ADTYPE.UNKNOWN_AD_REQUEST,mainContentDuration:this.mainContentDuration};a.position_type===O&&(s.positionType=O,s.position=a.position);var l=new E.Ad(s);e.push(l)}}return e};var b=N(function(){return this.allAdInfo?e.filter(this.allAdInfo,U):null}),U=N(function(e){if(!e)return!1;var t=e.tag_url,n=e.position_type==m,i=o==n;return i&&t&&"string"==typeof t});this.playAd=function(e){this.currentAMCAdPod&&Dt(!0),this.currentAMCAdPod=e,this.currentAMCAdPod?this.currentAMCAdPod.ad||a("playAd() called but amcAdPod.ad is null."):a("playAd() called but amcAdPod is null.");var n=t("iframe[src^='http://imasdk.googleapis.com/']")[0];return n&&n.style&&(n.style.zIndex=this.imaIframeZIndex),o&&this.currentAMCAdPod.adType==E.ADTYPE.UNKNOWN_AD_REQUEST?(E.notifyPodStarted(this.currentAMCAdPod.id,1),void(this.preloadAdRulesAds&&this.adRulesLoadError&&E.notifyPodEnded(this.currentAMCAdPod.id,1))):(!E.ui.useSingleVideoElement&&E.ui.adVideoElement&&E.ui.adVideoElement.css(D),void(o&&this.currentAMCAdPod.ad.forced_ad_type!==E.ADTYPE.NONLINEAR_OVERLAY?Tt():this.currentAMCAdPod.ad.forced_ad_type!=E.ADTYPE.NONLINEAR_OVERLAY?(F(),this.adTagUrl=this.currentAMCAdPod.ad.tag_url,this.adPosition=this.currentAMCAdPod.ad.position/1e3,j()):(this.currentAMCAdPod&&this.currentNonLinearIMAAd&&(this.currentAMCAdPod.width=this.currentNonLinearIMAAd.getWidth(),this.currentAMCAdPod.height=this.currentNonLinearIMAAd.getHeight(),this.currentAMCAdPod.paddingWidth=C,this.currentAMCAdPod.paddingHeight=L,B()),E.sendURLToLoadAndPlayNonLinearAd(this.currentAMCAdPod,this.currentAMCAdPod.id,null))))},this.cancelOverlay=function(e){this.cancelAd(e)},this.cancelAd=function(e){e&&this.currentAMCAdPod&&e.id!=this.currentAMCAdPod.id&&a("AMC canceling ad that is not the current one playing."),OO.log("GOOGLE IMA: ad got canceled by AMC"),o||$(),Dt(!0)},this.pauseAd=function(){l&&this.adPlaybackStarted&&l.pause()},this.resumeAd=function(){l&&this.adPlaybackStarted&&(OO.isIphone&&this.sharedVideoElement&&(r()||this.sharedVideoElement.webkitEnterFullscreen(),this.sharedVideoElement.play()),l.resume())},this.getVolume=function(){var e=1;return l&&(e=l.getVolume()),e},this.setVolume=function(e){l?(this.savedVolume=-1,l.setVolume(e),this.videoControllerWrapper&&this.sharedVideoElement&&this.videoControllerWrapper.raiseVolumeEvent()):this.savedVolume=e},this.getCurrentTime=function(){var e=0;return l&&this.currentIMAAd&&l.getRemainingTime()>=0&&l.getRemainingTime()<=this.currentIMAAd.getDuration()&&(e=this.currentIMAAd.getDuration()-l.getRemainingTime()),e},this.getDuration=function(){var e=0;return this.currentIMAAd&&(e=this.currentIMAAd.getDuration()),e},this.adVideoFocused=function(){};var w=N(function(){s||Z(),this.isReplay=!0,F(),q(),this.contentEnded=!1,this.adRulesLoadError=!1,o&&j()}),F=N(function(){ft(),$(),s&&s.contentComplete(),this.currentIMAAd=null,this.currentNonLinearIMAAd=null,this.adsRequested=!1}),k=N(function(){this.initialPlayRequestTime=(new Date).valueOf(),OO.log("_onInitialPlayRequested"),u||(nt(),E.unregisterAdManager(this.name),a("onInitialPlayRequested called but _IMAAdDisplayContainer not created yet.")),this.initialPlayRequested=!0,this.isReplay=!1,u.initialize(),G(),this.preloadAdRulesAds||(this.canSetupAdsRequest=!0,j())}),G=N(function(){if(l&&this.initialPlayRequested&&!d&&_)try{o&&!this.hasPreroll&&this.currentAMCAdPod&&this.currentAMCAdPod.adType==E.ADTYPE.UNKNOWN_AD_REQUEST&&Dt(!0),l.init(_.clientWidth,_.clientHeight,google.ima.ViewMode.NORMAL),l.start(),d=!0,OO.log("tryInitadsManager successful: adsManager started")}catch(e){nt(e)}}),H=N(function(){0==this.contentEnded&&(this.contentEnded=!0,s&&s.contentComplete())}),Y=N(function(e,t,n){i||q(),c||(i.currentTime=t,i.duration=n)}),x=N(function(e,t){this.isFullscreen=t,B()}),B=N(function(){W()}),W=N(function(){if(l&&_){var e=this.isFullscreen?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL,t=_.clientWidth,n=_.clientHeight;this.currentAMCAdPod&&this.currentNonLinearIMAAd&&(this.currentAMCAdPod.width&&(t=this.currentAMCAdPod.width,this.currentAMCAdPod.paddingWidth&&(t+=this.currentAMCAdPod.paddingWidth)),this.currentAMCAdPod.height&&(n=this.currentAMCAdPod.height,this.currentAMCAdPod.paddingHeight&&(n+=this.currentAMCAdPod.paddingHeight))),l.resize(t,n,e)}}),q=N(function(){i?i.currentTime=0:i={duration:0,currentTime:0}}),j=N(function(){if(!this.adsRequested&&this.canSetupAdsRequest&&this.adTagUrl&&this.uiRegistered&&E.currentEmbedCode&&s&&K()){google&&google.ima&&google.ima.settings&&google.ima.settings.setDisableFlashAds(this.disableFlashAds);var t=new google.ima.AdsRequest;if(this.additionalAdTagParameters){var n=this.adTagUrl.indexOf("?")>0?"&":"?",i=[],r=null;for(r in this.additionalAdTagParameters)i.push(r+"="+this.additionalAdTagParameters[r]);this.adTagUrl+=n+i.join("&")}t.adTagUrl=OO.getNormalizedTagUrl(this.adTagUrl,E.currentEmbedCode),this.adFinalTagUrl=t.adTagUrl;var a=E.ui.width,o=E.ui.height;t.linearAdSlotWidth=a,t.linearAdSlotHeight=o,t.nonLinearAdSlotWidth=a,t.nonLinearAdSlotHeight=o,F(),_t(),s.requestAds(t),this.adRequestTime=(new Date).valueOf(),E.onAdRequest(this.name,this.adPosition),this.runningUnitTests&&0===this.maxAdsRequestTimeout?tt():this.adsRequestTimeoutRef=e.delay(tt,this.maxAdsRequestTimeout),this.adsRequested=!0}}),K=N(function(){return this.isReplay?this.requestAdsOnReplay:!0}),Q=N(function(e){return A=e,OO.log("onSdkLoaded!"),e&&Ct()?(z(),void j()):(nt(),errorString="ERROR Google SDK failed to load",e&&!Ct()&&(errorString="ERROR Google SDK loaded but could not be validated"),E.onAdSdkLoadFailure(this.name,errorString),void E.unregisterAdManager(this.name))}),z=N(function(){A&&this.uiRegistered&&(Ct()||a("IMA SDK loaded but does not contain valid data"),u&&u.destroy(),google.ima.settings.setPlayerVersion(R),google.ima.settings.setPlayerType(S),google.ima.settings.setLocale(OO.getLocale()),google.ima.settings.setVpaidMode(this.useInsecureVpaidMode?google.ima.ImaSdkSettings.VpaidMode.INSECURE:google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.enableIosSkippableAds),_=E.ui.playerSkinPluginsElement?E.ui.playerSkinPluginsElement[0]:E.ui.pluginsElement[0],u=new google.ima.AdDisplayContainer(_,this.sharedVideoElement),Z(),et())}),Z=N(function(){if(u){var e=google.ima.AdsManagerLoadedEvent.Type,t=google.ima.AdErrorEvent.Type;X(),s=new google.ima.AdsLoader(u),s.getSettings().setAutoPlayAdBreaks(!1),s.addEventListener(e.ADS_MANAGER_LOADED,it,!1),s.addEventListener(t.AD_ERROR,nt,!1)}}),J=N(function(){u&&(u.destroy(),u=null)}),X=N(function(){s&&(s.destroy(),s=null)}),$=N(function(){l&&(l.stop(),l.destroy(),l=null,d=!1)});this.destroy=function(){_=null,ft(),$(),X(),J(),P(),V()};var et=N(function(){u&&this.metadataReady&&(this.ready=!0,E.onAdManagerReady(),E.reportPluginLoaded(Date.now()-this.initTime,this.name))}),tt=N(function(){OO.log("IMA Ad request timed out"),this.adsReady||nt(y)}),nt=N(function(e){if(clearTimeout(this.adsRequestTimeoutRef),o&&(this.adsReady||(this.adRulesLoadError=!0),ft()),$(),e===y&&X(),e){var t="ERROR Google IMA";if(e.getError){var n=e.getError(),i=!1,r=!1,a=!1,s={vastErrorCode:n.getVastErrorCode(),innerErrorCode:n.getInnerError(),errorCode:n.getErrorCode()};OO.log("GOOGLE_IMA:: SDK Error received: Error Code List",JSON.stringify(s));var l=google.ima.AdError.ErrorCode;switch(s.vastErrorCode){case l.VAST_MEDIA_LOAD_TIMEOUT:case l.VAST_LOAD_TIMEOUT:i=!0;break;case l.VAST_NO_ADS_AFTER_WRAPPER:case l.VAST_EMPTY_RESPONSE:r=!0;break;case l.VAST_MEDIA_ERROR:case l.VIDEO_PLAY_ERROR:a=!0}s.errorCode==l.VIDEO_PLAY_ERROR&&(a=!0),E.onSdkAdEvent(this.name,e.type,{errorData:n}),r?E.onAdRequestEmpty(this.name,this.adPosition,this.adFinalTagUrl,s,n.getMessage()):a?E.onAdPlaybackError(this.name,this.adPosition,this.adFinalTagUrl,s,n.getMessage(),this.currentMedia):E.onAdRequestError(this.name,this.adPosition,this.adFinalTagUrl,s,n.getMessage(),i),t="ERROR Google SDK: "+e.getError()}else t="ERROR Google IMA plugin: "+e;E?E.raiseAdError(t):OO.log(t)}Dt(!0)}),it=N(function(e){clearTimeout(this.adsRequestTimeoutRef),this.adResponseTime=(new Date).valueOf();var t=this.adResponseTime-this.adRequestTime,n=this.adResponseTime-this.initialPlayRequestTime;E.onAdRequestSuccess(this.name,this.adPosition,t,n),E.onSdkAdEvent(this.name,e.type,{eventData:{}}),!o&&l&&($(),this.currentIMAAd=null,this.currentNonLinearIMAAd=null);var r=new google.ima.AdsRenderingSettings;r.loadVideoTimeout=T,r.restoreCustomPlaybackStateOnAdBreakComplete=!1,r.useStyledNonLinearAds=!0,this.useGoogleCountdown&&(r.uiElements=[google.ima.UiElements.COUNTDOWN,google.ima.UiElements.AD_ATTRIBUTION]),r.useStyledLinearAds=this.useGoogleAdUI,l=e.getAdsManager(i,r),this.videoControllerWrapper&&(this.videoControllerWrapper.readyForCss=!0),this.videoControllerWrapper&&this.videoControllerWrapper.applyStoredCss();var a=l.getCuePoints();this.hasPreroll=a.indexOf(0)>=0;var s=google.ima.AdEvent.Type;l.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,nt,!1,this);var d=[s.AD_BREAK_READY,s.AD_METADATA,s.ALL_ADS_COMPLETED,s.CLICK,s.COMPLETE,s.CONTENT_PAUSE_REQUESTED,s.CONTENT_RESUME_REQUESTED,s.DURATION_CHANGE,s.FIRST_QUARTILE,s.IMPRESSION,s.INTERACTION,s.LINEAR_CHANGED,s.LOADED,s.LOG,s.MIDPOINT,s.PAUSED,s.RESUMED,s.SKIPPABLE_STATE_CHANGED,s.SKIPPED,s.STARTED,s.THIRD_QUARTILE,s.USER_CLOSE,s.VOLUME_CHANGED,s.VOLUME_MUTED],u=function(e){l.addEventListener(e,ut,!1,this)};OO._.each(d,u,this),et(),this.adsReady=!0,G()}),rt=N(function(e){return OO.log("GOOGLE_IMA:: Ad Rules ad break ready!",e),o?(this.currentAMCAdPod&&this.currentNonLinearIMAAd&&this.cancelAd(this.currentAMCAdPod),f=_.getAttribute("style")||"",_.setAttribute("style","display: block; width: 100%; height: 100%; visibility: hidden; pointer-events: none;"),B(),void l.start()):void l.start()}),at=N(function(){E.adsClicked(),E.adsClickthroughOpened()}),ot=N(function(){if(OO.log("GOOGLE_IMA:: Content Pause Requested by Google IMA!"),c=!0,o){var e={position_type:m,forced_ad_type:E.ADTYPE.LINEAR_VIDEO};if(i.currentTime>0){var t={};t[OO.VIDEO.ENCODING.IMA]="",E.forceAdToPlay(this.name,e,E.ADTYPE.LINEAR_VIDEO,t)}}}),st=N(function(){Dt(!0),OO.log("GOOGLE_IMA:: Content Resume Requested by Google IMA!")}),lt=N(function(){this.videoControllerWrapper&&this.videoControllerWrapper.raisePauseEvent()}),dt=N(function(t){if(t&&E.pageSettings.companionAd&&E.pageSettings.companionAd.slots){var n=E.pageSettings.companionAd.slots,i=[],r=null;e.each(n,function(n){n.width&&n.height&&(r=t.getCompanionAds(n.width,n.height),r.length&&e.each(r,function(e){i.push({slotSize:n.width+"x"+n.height,ad:e.getContent()})}))}),i.length&&E.showCompanion(i)}}),ut=N(function(e){if(ct(e))return void OO.log("Ignoring IMA EVENT: ",e.type,e);E.onSdkAdEvent(this.name,e.type,{adData:e.getAdData()});{var t=google.ima.AdEvent.Type,n=e.getAd();e.getAdData()}switch(e.type){case t.LOADED:this.currentMedia=n.getMediaUrl(),Et(),n.isLinear()&&(c=!0,E.focusAdVideo());break;case t.STARTED:this.videoControllerWrapper.requiresMutedAutoplay()&&this.videoControllerWrapper&&this.videoControllerWrapper.raiseVolumeEvent(),this.adPlaybackStarted=!0,n.isLinear()?(c=!0,this.savedVolume>=0&&(this.setVolume(this.savedVolume),this.savedVolume=-1),E.hidePlayerUi(this.showAdControls,!1),r()&&OO.isIphone&&this.enableIosSkippableAds===!0&&this.sharedVideoElement&&this.sharedVideoElement.webkitExitFullscreen()):this.currentNonLinearIMAAd=n,this.currentIMAAd=n,B(),Tt(),this.videoControllerWrapper&&(n.isLinear()&&this.videoControllerWrapper.raisePlayEvent(),this.videoControllerWrapper.raiseTimeUpdate(this.getCurrentTime(),this.getDuration()),At()),o&&!n.isLinear()&&Ot();break;case t.RESUMED:this.videoControllerWrapper&&n.isLinear()&&this.videoControllerWrapper.raisePlayEvent();break;case t.USER_CLOSE:case t.SKIPPED:case t.COMPLETE:o&&(this.adResponseTime=(new Date).valueOf());var i=!1;e.type===t.SKIPPED&&(i=!0);var a=(new Date).valueOf()-this.currentImpressionTime;if(E.onAdCompleted(this.name,a,i),this.adPlaybackStarted=!1,this.videoControllerWrapper&&n&&n.isLinear()){ht();var s=e.type===t.COMPLETE?this.getDuration():this.getCurrentTime();this.videoControllerWrapper.raiseTimeUpdate(s,this.getDuration()),this.videoControllerWrapper.raiseEndedEvent()}this.savedVolume=this.getVolume(),n&&n.isLinear()||(this.currentNonLinearIMAAd=null),Dt(!1),c=!1,pt(e);break;case t.PAUSED:lt();break;case t.ALL_ADS_COMPLETED:c=!1,OO.log("all google ima ads completed!"),ft(),OO.isIos&&this.contentEnded&&E.isLastAdPlayed()&&st();break;case t.IMPRESSION:this.currentImpressionTime=(new Date).valueOf();var d=this.currentImpressionTime-this.adResponseTime,u="VAST";n&&n.g&&n.g.vpaid===!0&&(u="VPAID");var A="unknown";A=n&&n.isLinear()?0===n.getContentType().lastIndexOf("video",0)?E.ADTYPE.LINEAR_VIDEO:E.ADTYPE.LINEAR_OVERLAY:n&&0===n.getContentType().lastIndexOf("video",0)?E.ADTYPE.NONLINEAR_VIDEO:E.ADTYPE.NONLINEAR_OVERLAY,E.onAdSdkImpression(this.name,this.adPosition,d,u,A);break;case t.FIRST_QUARTILE:case t.MIDPOINT:case t.THIRD_QUARTILE:pt(e);break;case t.VOLUME_CHANGED:case t.VOLUME_MUTED:e.type!==t.VOLUME_MUTED||this.adPlaybackStarted||l.resume(),this.videoControllerWrapper&&this.videoControllerWrapper.raiseVolumeEvent();break;case t.DURATION_CHANGE:this.videoControllerWrapper&&this.videoControllerWrapper.raiseDurationChange(this.getCurrentTime(),this.getDuration());break;case t.AD_BREAK_READY:rt(e);break;case t.CLICK:at(e);break;case t.CONTENT_PAUSE_REQUESTED:if(o&&n){var h=n.getAdPodInfo(),_=h.getPodIndex();0!=_&&(this.adResponseTime=(new Date).valueOf())}ot(e);break;case t.CONTENT_RESUME_REQUESTED:st(e)}}),ct=N(function(t){var n=google.ima.AdEvent.Type,i=[n.COMPLETE,n.SKIPPED,n.FIRST_QUARTILE,n.MIDPOINT,n.PAUSED,n.RESUMED,n.THIRD_QUARTILE,n.USER_CLOSE];return!t||!this.adPlaybackStarted&&e.contains(i,t.type)}),Et=N(function(){_&&"undefined"!=typeof f&&null!==f&&_.setAttribute("style",f),f=null}),At=N(function(){ht(),this.runningUnitTests||(h=setInterval(e.bind(function(){c?this.videoControllerWrapper.raiseTimeUpdate(this.getCurrentTime(),this.getDuration()):ht()},this),v))}),ht=N(function(){clearInterval(h),h=null}),_t=N(function(){o&&E.adManagerWillControlAds(this.name)}),ft=N(function(){o&&E&&E.adManagerDoneControllingAds(this.name)}),pt=N(function(e){OO.log("Google IMA Ad playthrough",e.type)}),gt=N(function(){this.contentEnded=!1,ft(),F(),q()}),Tt=N(function(){var e=null;return this.currentIMAAd&&this.currentAMCAdPod&&(this.currentIMAAd.isLinear()?(e=E.ADTYPE.LINEAR_VIDEO,mt()):(e=E.ADTYPE.NONLINEAR_OVERLAY,It())),e}),mt=N(function(){this.currentIMAAd||a("Trying to start linear ad and this.currentIMAAd is falsy"),this.currentAMCAdPod||a("Trying to start linear ad and this.currentAMCAdPod is falsy");var e=this.currentAMCAdPod.id,t={},n=1;t.indexInPod=1,t.name=null,t.duration=0,t.hasClickUrl=!1,t.skippable=!1;try{var i=this.currentIMAAd.getAdPodInfo();n=i.getTotalAds(),t.indexInPod=i.getAdPosition()}catch(r){a("IMA ad returning bad value for this.currentIMAAd.getAdPodInfo().")}"function"==typeof this.currentIMAAd.getTitle&&(t.name=this.currentIMAAd.getTitle()),"function"==typeof this.currentIMAAd.getDuration&&(t.duration=this.currentIMAAd.getDuration()),"function"==typeof this.currentIMAAd.isSkippable&&(t.skippable=this.currentIMAAd.isSkippable()),1==t.indexInPod&&E.notifyPodStarted(e,n),dt(this.currentIMAAd),E.notifyLinearAdStarted(e,t)}),It=N(function(){this.currentAMCAdPod||a("Trying to start non linear overlay and this.currentAMCAdPod is falsy"),E.notifyPodStarted(this.currentAMCAdPod.id);var e={position_type:I,forced_ad_type:E.ADTYPE.NONLINEAR_OVERLAY};dt(this.currentIMAAd),Dt(!0),E.forceAdToPlay(this.name,e,E.ADTYPE.NONLINEAR_OVERLAY)}),Ot=N(function(){var e={position_type:m,forced_ad_type:E.ADTYPE.NONLINEAR_OVERLAY};dt(this.currentIMAAd),E.forceAdToPlay(this.name,e,E.ADTYPE.NONLINEAR_OVERLAY)}),St=N(function(e){E.notifyNonlinearAdEnded(e),o||F()}),Rt=N(function(e){if(this.currentAMCAdPod){var t=this.currentAMCAdPod,n=t.id;this.currentAMCAdPod=null,c=!1,e?E.notifyPodEnded(n):St(n)}}),Dt=N(function(e){if(this.currentAMCAdPod)if(this.currentIMAAd){var t=this.currentIMAAd;if(this.currentIMAAd=null,t.isLinear()){var n=t.getAdPodInfo();n||(e&&Rt(!0),a("IMA ad returning bad value for this.currentIMAAd.getAdPodInfo().")),E.notifyLinearAdEnded(this.currentAMCAdPod.id);var i=n.getAdPosition(),r=n.getTotalAds();(!E.ui.useSingleVideoElement&&i==r||e)&&Rt(!0)}else Rt(this.currentAMCAdPod.isRequest)}else Rt(!0);Et(),this.currentIMAAd=null,this.adPlaybackStarted=!1}),Ct=N(function(){return google&&google.ima&&google.ima.AdDisplayContainer});this.registerVideoControllerWrapper=function(e){this.videoControllerWrapper=e}},r=function(){return!(OO.iosMajorVersion<10&&OO.isIphone)},a=function(e){throw new Error("GOOGLE IMA: "+e)};return new i});var i=function(){this.name="GoogleIMAVideoTech",this.encodings=[OO.VIDEO.ENCODING.IMA],this.features=[OO.VIDEO.FEATURE.VIDEO_OBJECT_SHARING_TAKE],this.technology=OO.VIDEO.TECHNOLOGY.HTML5,this.create=function(e,t,i,a,o){var s=n[o],l=new r(s);return l.controller=i,l.subscribeAllEvents(),l},this.createFromExisting=function(e,i,a){var o=n[a];o.setupSharedVideoElement(t("#"+e)[0]);var s=new r(o);return s.controller=i,s.subscribeAllEvents(),s},this.destroy=function(){this.encodings=[],this.create=function(){},this.createFromExisting=function(){}},this.maxSupportedElements=-1},r=function(n){var i=n;this.controller={},this.disableNativeSeek=!0,this.isControllingVideo=!0,this.readyForCss=!1;var r=null,a=1;this.sharedElementTake=function(){this.isControllingVideo=!0},this.sharedElementGive=function(){this.isControllingVideo=!1},this.subscribeAllEvents=function(){i.registerVideoControllerWrapper(this)},this.setVideoUrl=function(){return!0},this.load=function(){},this.setInitialTime=function(){},this.play=function(){i.resumeAd()},this.pause=function(){i.pauseAd()},this.seek=function(){},this.requiresMutedAutoplay=function(){return OO.isSafari&&OO.macOsSafariVersion>=11||OO.isIos||OO.isAndroid},this.mute=function(){var e=i.getVolume();e&&(a=e),i.setVolume(0)},this.unmute=function(){i.setVolume(a?a:1)},this.setVolume=function(e,t){t?this.mute():i.setVolume(e)},this.getCurrentTime=function(){var e=i.getCurrentTime();return e},this.applyCss=function(e){this.readyForCss?o(e):r=e},this.applyStoredCss=function(){this.applyCss(r)},this.onAdsPlayed=function(){};var o=e.bind(function(e){e&&this.isControllingVideo&&i.sharedVideoElement&&t(i.sharedVideoElement).css(e)},this);this.destroy=function(){i.sharedVideoElement=null};var s=e.bind(function(e,t){this.isControllingVideo&&this.controller.notify(e,t)},this);this.raisePlayEvent=function(){s(this.controller.EVENTS.PLAY,{}),s(this.controller.EVENTS.PLAYING)},this.raiseEndedEvent=function(){s(this.controller.EVENTS.ENDED)},this.raisePauseEvent=function(){s(this.controller.EVENTS.PAUSED)},this.raiseVolumeEvent=function(){var e=i.getVolume();s(this.controller.EVENTS.VOLUME_CHANGE,{volume:e}),0===e?s(this.controller.EVENTS.MUTE_STATE_CHANGE,{muted:!0}):s(this.controller.EVENTS.MUTE_STATE_CHANGE,{muted:!1})},this.raiseTimeUpdate=function(e,t){l(this.controller.EVENTS.TIME_UPDATE,e,t)},this.raiseDurationChange=function(e,t){l(this.controller.EVENTS.DURATION_CHANGE,e,t)};var l=e.bind(function(e,t,n){s(e,{currentTime:t,duration:n,buffer:0,seekRange:{begin:0,end:0}})},this)};OO.Video.plugin(new i)}(OO._,OO.$)},{"../html5-common/js/utils/InitModules/InitOOUnderscore.js":2,"../html5-common/js/utils/constants.js":3,"../html5-common/js/utils/utils.js":4}]},{},[6]);