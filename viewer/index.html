<!DOCTYPE html>
<html lang="en" class="">
  
<head>

  <meta name="viewport" id="viewport" content="width=device-width,maximum-scale=1,minimum-scale=1,minimal-ui">

  <style>
  
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: sans-serif;
  }
  
  .view {
    overflow: hidden;
    position: relative
  }
  
  .view-frame {
    background: #eee;
    min-width: 500px;
    position: relative;
    left: 50%;
    transform: translateX(-50%)
  }
  
  .view-image {
    width: 100%;
  }

  .view-overlay {
    position: absolute;
    background: rgba(255, 0, 0, 0.1);
    min-width: 320px;
    width: 64%;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    height: 100%;
  }

  .view-spot {
    width: 20px;
    height: 20px;
    overflow: hidden;
    background: rgba(255, 0, 0, 0.897);
    border: 2px solid white;
    filter: drop-shadow(1px 1px 2px rgba(0, 0, 0, 0.288));
    border-radius: 50%;
    position: absolute;
    z-index: 10;
    transform: translate(-50%,-50%);
    cursor: pointer;
  }

  .view-caption {
    background: powderblue;
    color: black;
    padding: 18px;
    position: absolute;
    z-index: 11;
    line-height: 1.4;
    margin: 20px 0 0 -20px;
    width: 300px;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.166s
  }

  .view-spot--open + .view-caption {
    visibility: visible;
    opacity: 1;
  }

  @media all and (max-width: 560px){
    .view-caption {
      left: 50%!important;
      transform: translate(-50%,0);
      margin-left: 0!important;
    }
  }

</style>
  
</head>
  <body>
  <div class="view">
    <div class="view-frame">
      <div class="view-overlay" data-role="overlay">
      </div>
      <img class="view-image" src="https://e3.365dm.com/18/01/768x1024/skynews-clones-monkey-china_4214099.jpg?bypass-service-worker&20180124234456" alt="">
    </div>

  </div>

  <script>
    var overlay = document.querySelector('[data-role="overlay"]');

    overlay.onclick = function(e){
      
      if(e.target.className.match(/view-spot/)){
        return;
      }

      var width = overlay.offsetWidth;
      var height = overlay.offsetHeight;

      var x = e.offsetX;
      var y = e.offsetY;

      var dot = document.createElement('a');
      dot.href = "#";
      dot.className = 'view-spot';
      dot.style.cssText = "left:"+toPercent(x, width)+"%;top:"+toPercent(y, height)+"%";

      var caption = document.createElement('div');
      caption.className = 'view-caption';
      caption.textContent = "The organisation’s charitable trust has two joint chairmen: Bruce Ritchie, a Mayfair property developer who founded Residential Land, and David Meller, from the luxury good specialist Meller Group, who also sits on the board of the Department for Education and the Mayor’s Fund for London.";

      if(e.target.className.match(/view-spot/)){
        overlay.removeChild(e.target);
      }
      else {
        overlay.appendChild(dot);
        overlay.appendChild(caption); 
        dot.onclick = function(event){
          event.preventDefault();
          positionCaption(event, dot, caption, overlay);
        }
      }  
    }

    function toPercent(value, total){
      return (100/total)*value;
    }

    function toPercentConstraint(value, parent, caption){
      var left = value;
      var dims = parent.getBoundingClientRect();
      var offset = (caption.offsetWidth + value) - dims.width;
      
      if(offset > 0){
        left = left - offset;
      }

      return toPercent(left, dims.width);
    }

    function positionCaption(event, dot, caption, overlay){

      document.querySelectorAll('.view-spot').forEach(function(item){
        if(item!==dot){
          item.classList.remove('view-spot--open');
        }
      });

      dot.classList.toggle('view-spot--open');

      var x = event.target.offsetLeft;
      var y = event.target.offsetTop;
      caption.style.cssText = "left:"+toPercentConstraint(x, overlay, caption)+"%;top:"+toPercent(y, overlay.offsetHeight)+"%"; 
    }
  </script>
  </body>
  </html>