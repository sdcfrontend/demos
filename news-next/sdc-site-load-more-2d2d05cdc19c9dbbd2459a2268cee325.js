!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("sdc-site-load-more",[],e):"object"==typeof exports?exports["sdc-site-load-more"]=e():t["sdc-site-load-more"]=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="/js/modules/components",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=r(o),u=n(2),i=r(u),d=n(4),l=r(d);e.default=function(t){if(!t)return!1;var e=t.getAttribute("data-ajax-config"),n={itemsToShow:parseInt(t.getAttribute("data-items-to-show"),10),itemsToIncrement:parseInt(t.getAttribute("data-items-to-increment"),10),loadMoreButtonText:t.getAttribute("data-button-label"),loadingText:t.hasAttribute("data-loading-label")?t.getAttribute("data-loading-label"):"",ajax:e?JSON.parse(e):null};return e?(0,a.default)("fetch"in window,"https://cdn.polyfill.io/v2/polyfill.min.js?features=fetch,Promise",function(){(0,i.default)(t,n)}):(0,l.default)(t,n)},t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){if(!0===t)return n();var r=document.createElement("script");r.src=e,r.onreadystatechange=n,r.onload=n,r.onerror=function(){return console.error("no polyfill found!")},document.querySelector("head").appendChild(r)},t.exports=e.default},function(t,e,n){"use strict";function r(t){t.loading=!0,t.classList.add("loading"),t.setAttribute("aria-label",t.getAttribute("data-loading-text")),t.setAttribute("role","progressbar")}function o(t){t.classList.remove("loading"),t.removeAttribute("aria-label"),t.removeAttribute("role"),t.loading=!1}function a(t,e){var n=document.createElement("button");return n.setAttribute("data-role","load-more-button"),n.setAttribute("aria-controls",e.ajax.itemContainerId),n.setAttribute("data-ajax-page",e.ajax.currentPage||1),n.setAttribute("data-ajax-url",e.ajax.url),n.setAttribute("data-loading-text",e.loadingText),n.className="sdc-site-load-more__button",n.innerText=e.loadMoreButtonText,t.appendChild(n),n}Object.defineProperty(e,"__esModule",{value:!0});var u=n(3),i=function(t){return t&&t.__esModule?t:{default:t}}(u);e.default=function(t,e){if(!t||!e)return!1;var n=t.querySelector(e.ajax.itemsContainer);if(!n)return void console.error("No container element found for ajax content");var u=a(t,e);n.setAttribute("aria-live","polite"),u.loading=!1,u.addEventListener("click",function(t){if(t.preventDefault(),!u.loading){var a=parseInt(u.dataset.ajaxPage,10),d=u.dataset.ajaxUrl.replace("${page}",a+1);r(u),(0,i.default)(d).then(function(t){n.insertAdjacentHTML("beforeend",t.items),(!t.hasNext||t.itemsReturned<e.ajax.itemsToIncrement)&&u.setAttribute("aria-hidden",!0),u.setAttribute("data-ajax-page",t.page),o(u)}).catch(function(t){return console.error(t)})}})},t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return fetch(t).then(function(t){return t.json()}).then(function(t){return t}).catch(function(t){return console.error(t)})},t.exports=e.default},function(t,e,n){"use strict";function r(t,e){o(t,e),t.setAttribute("data-active",!0)}function o(t,e){a(t,e,e.itemsToShow)}function a(t,e,n){var r=f(t);t.setAttribute("data-items-to-show",n),u(r,n),n>=r.length&&p(t)}function u(t,e){for(var n=0;n<t.length;n+=1)n>=e?i(t[n]):d(t[n])}function i(t){t.setAttribute("aria-hidden",!0)}function d(t){t.removeAttribute("aria-hidden")}function l(t,e){return s(t)||e.itemsToIncrement}function s(t){var e=c(t);return!!e&&(0,x.default)(e,"items-to-show-")}function c(t){return t.querySelector('[data-role="load-more-item"]')}function f(t){return t.querySelectorAll('[data-role="load-more-item"]')}function m(t,e){var n=document.createElement("button");return n.setAttribute("data-role","load-more-button"),n.className="sdc-site-load-more__button",n.innerText=e.loadMoreButtonText,t.appendChild(n),n}function p(t){t.querySelector(".sdc-site-load-more__button").className="sdc-site-load-more__button--is-hidden"}Object.defineProperty(e,"__esModule",{value:!0});var b=n(5),x=function(t){return t&&t.__esModule?t:{default:t}}(b);e.default=function(t,e){if(!t||!e)return!1;var n=f(t);return!(e.itemsToShow>=n.length)&&(m(t,e).addEventListener("click",function(n){n.preventDefault();var r=parseInt(t.getAttribute("data-items-to-show"),10),o=l(t,e);a(t,e,r+o)}),r(t,e))},t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(!t||"object"!=typeof t||!e||!window.getComputedStyle)return!1;var n=window.getComputedStyle(t,null).getPropertyValue("counter-increment"),r=new RegExp(e+"([0-9]?[0-9])"),o=n.match(r);return!(!o||!o[1])&&parseInt(o[1],10)},t.exports=e.default}])});
//# sourceMappingURL=sdc-site-load-more.js.map